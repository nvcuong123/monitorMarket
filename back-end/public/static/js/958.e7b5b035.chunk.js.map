{"version":3,"file":"static/js/958.e7b5b035.chunk.js","mappings":"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","sources":["components/ColorRange.js","components/Change24H.js","Utils/index.js","components/TradingVol24H.js","pages/Analysis/Binance/BinanceHeatmap.js"],"sourcesContent":["export const percentRangeColors = [\n  {\n    min: Number.NEGATIVE_INFINITY,\n    max: -20,\n    color: \"#D73B51\",\n  },\n  { min: -20, max: -10, color: \"#F1475C\" },\n  { min: -10, max: -0, color: \"#F96E80\" },\n  { min: -0, max: +0, color: \"#77808F\" },\n  { min: +0, max: +10, color: \"#48D69D\" },\n  { min: +10, max: +20, color: \"#0FCB80\" },\n  {\n    min: +20,\n    max: Number.POSITIVE_INFINITY,\n    color: \"#0EAF6F\",\n  },\n];\nexport const fundingRateColors = [\n  {\n    min: -Infinity,\n    max: -0.01,\n    color: \"#D73B51\",\n  },\n  { min: -0.01, max: -0.005, color: \"#F1475C\" },\n  { min: -0.005, max: -0.0, color: \"#F96E80\" },\n  { min: -0.0, max: +0.0, color: \"#77808F\" },\n  { min: +0.0, max: +0.005, color: \"#48D69D\" },\n  { min: +0.005, max: +0.01, color: \"#0FCB80\" },\n  {\n    min: +0.01,\n    max: +Infinity,\n    color: \"#0EAF6F\",\n  },\n];\nexport const getColor = (dataCoverage, indicator) => {\n  let retcolor = \"#77808F\";\n  let listCheck = percentRangeColors;\n  if (indicator === \"Funding Rates\") {\n    listCheck = fundingRateColors;\n  }\n  // console.log(\"dataCoverage\", dataCoverage);\n  const rangeMatch = listCheck.find((range) => {\n    const val = Number(dataCoverage);\n    return val >= range.min && val < range.max;\n  });\n  if (rangeMatch) {\n    retcolor = rangeMatch.color;\n  }\n  return retcolor;\n};\n\nexport const getColorList = (indicator) => {\n  if (indicator === \"Funding Rates\") {\n    return fundingRateColors;\n  } else {\n    return percentRangeColors;\n  }\n};\n","// ref https://stackblitz.com/edit/vitejs-vite-ptbfk9?file=src%2FTreemapChart.tsx\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\nimport { TreemapController, TreemapElement } from \"chartjs-chart-treemap\";\nimport { useEffect, useState } from \"react\";\nimport { Chart } from \"react-chartjs-2\";\nimport { getColor } from \"./ColorRange\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  TreemapController,\n  TreemapElement\n);\n\nlet options = {\n  animation: false,\n  plugins: {\n    title: {\n      display: true,\n      text: \"Price Change 24H\",\n    },\n    legend: {\n      display: false,\n    },\n    tooltip: {\n      displayColors: true,\n      callbacks: {\n        title(items) {\n          return items[0].raw._data.name;\n        },\n        label(item) {\n          const {\n            _data: { percentChange, dataCoverage, price, lastFundingRate },\n          } = item.raw;\n\n          return [\n            `Price : ${price}`,\n            `24h change: ${Number(percentChange).toFixed(2)}%`,\n            `Funding Rate: ${Number(lastFundingRate).toFixed(4)}%`,\n          ];\n        },\n      },\n    },\n  },\n  aspectRatio: 1,\n};\n\nexport default function TreemapChart(props) {\n  const [data24h, $data24h] = useState();\n\n  useEffect(() => {\n    const indicator = props.indicator;\n    const fundingRates = props.fundingRates;\n    const topRangeValue = props.topRangeValue;\n    // const prices = props.prices;\n    const pricePrecisions = props.pricePrecisions;\n\n    let data = {\n      datasets: [\n        {\n          tree: [],\n          key: \"absPricePercent\",\n          labels: {\n            display: true,\n            align: \"left\",\n            formatter: (context) => [\n              context.raw._data.name,\n              context.raw._data.price,\n              `${Number(\n                new Intl.NumberFormat(\"en-US\", {\n                  signDisplay: \"exceptZero\",\n                }).format(context.raw._data.percentChange)\n              ).toFixed(2)}%`,\n            ],\n            color: \"white\",\n            overflow: \"fit\",\n            font: [\n              {\n                size: 20,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n              {\n                size: 14,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n            ],\n          },\n          backgroundColor(context) {\n            if (context.type !== \"data\") return \"transparent\";\n            const { dataCoverage } = context.raw._data;\n            return getColor(dataCoverage, indicator);\n          },\n          spacing: -0.5,\n          borderWidth: 0.75,\n          borderColor: \"#000000\",\n          onclick: (element) => {\n            console.log(\"element\", element);\n          },\n        },\n      ],\n    };\n    let data24hTemp = { ...data };\n    let tree = [];\n    const topChange24h = props.change24Hs.slice(0, topRangeValue);\n    console.log(\"topChange24h\", topChange24h);\n    // console.log(\n    //   \"topChange24h\",\n    //   topChange24h.forEach(\n    //     (elem) => `${elem.symbol}: ${elem.percentChange * 100}%`\n    //   )\n    // );\n\n    topChange24h.forEach((contract, idx) => {\n      const fdObj = fundingRates?.find(\n        (element) => element.symbol === contract.symbol\n      );\n      const lastFundingRate = Number(fdObj?.fundingRate * 100 || 0);\n\n      tree.push({\n        name: contract.symbol,\n        // price: `$${Number(prices[contract.symbol]).toFixed(\n        //   pricePrecisions[contract.symbol]\n        // )}`,\n        price: `$${Number(contract.close).toFixed(\n          pricePrecisions[contract.symbol]\n        )}`,\n        lastFundingRate: lastFundingRate,\n        percentChange: contract.percentChange,\n        absPricePercent: Math.abs(contract.percentChange),\n        dataCoverage:\n          indicator === \"Funding Rates\"\n            ? lastFundingRate\n            : contract.percentChange,\n      });\n      // if (idx === 0) {\n      //   console.log(\"props.change24Hs:contract\", contract);\n      //   console.log(\"tree[idx]\", idx, tree[idx]);\n      // }\n    });\n    data24hTemp.datasets[0].tree = tree;\n    $data24h(data24hTemp);\n  }, [props]);\n\n  return (\n    <>{data24h && <Chart type=\"treemap\" data={data24h} options={options} />}</>\n  );\n}\n","export const CurrencyFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n\n  // These options are needed to round to whole numbers if that's what you want.\n  //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n  //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});\n\nconst Utils = {\n  CurrencyFormatter,\n};\n\nexport default Utils;\n","// ref https://stackblitz.com/edit/vitejs-vite-ptbfk9?file=src%2FTreemapChart.tsx\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\nimport { TreemapController, TreemapElement } from \"chartjs-chart-treemap\";\nimport { useEffect, useState } from \"react\";\nimport { Chart } from \"react-chartjs-2\";\nimport { CurrencyFormatter } from \"../Utils/index\";\nimport { getColor } from \"./ColorRange\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  TreemapController,\n  TreemapElement\n);\n\nlet options = {\n  animation: false,\n  plugins: {\n    title: {\n      display: true,\n      text: \"Trading Volume 24H\",\n    },\n    legend: {\n      display: false,\n    },\n    tooltip: {\n      displayColors: true,\n      callbacks: {\n        title(items) {\n          return items[0].raw._data.name;\n        },\n        label(item) {\n          const {\n            _data: { percentChange, quoteVolume, price, lastFundingRate },\n          } = item.raw;\n\n          return [\n            `Price : ${price}`,\n            `Volume 24H: ${CurrencyFormatter.format(quoteVolume)}`,\n            `24h change: ${Number(\n              new Intl.NumberFormat(\"en-US\", {\n                signDisplay: \"exceptZero\",\n              }).format(percentChange)\n            ).toFixed(2)}%`,\n            `Funding Rate: ${Number(lastFundingRate).toFixed(4)}%`,\n          ];\n        },\n      },\n    },\n  },\n  aspectRatio: 1,\n};\n\nexport default function TreemapChart(props) {\n  const [data24h, $data24h] = useState();\n\n  useEffect(() => {\n    const indicator = props.indicator;\n    const fundingRates = props.fundingRates;\n    const topRangeValue = props.topRangeValue;\n    // const prices = props.prices;\n    const pricePrecisions = props.pricePrecisions;\n\n    let data = {\n      datasets: [\n        {\n          tree: [],\n          key: \"quoteVolume\",\n          labels: {\n            display: true,\n            align: \"left\",\n            formatter: (context) => [\n              context.raw._data.name,\n              context.raw._data.price,\n              `Vol: ${CurrencyFormatter.format(context.raw._data.quoteVolume)}`,\n              `${Number(\n                new Intl.NumberFormat(\"en-US\", {\n                  signDisplay: \"exceptZero\",\n                }).format(context.raw._data.percentChange)\n              ).toFixed(2)}%`,\n            ],\n            color: \"white\",\n            overflow: \"fit\",\n            font: [\n              {\n                size: 20,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n              {\n                size: 14,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n            ],\n          },\n          backgroundColor(context) {\n            if (context.type !== \"data\") return \"transparent\";\n            const { dataCoverage } = context.raw._data;\n            return getColor(dataCoverage, indicator);\n          },\n          spacing: -0.5,\n          borderWidth: 0.75,\n          borderColor: \"#000000\",\n          onclick: (element) => {\n            console.log(\"element\", element);\n          },\n        },\n      ],\n    };\n    let data24hTemp = { ...data };\n    let tree = [];\n    props.tradingVol24H.slice(0, topRangeValue).forEach((contract, idx) => {\n      const fdObj = fundingRates?.find(\n        (element) => element.symbol === contract.symbol\n      );\n      const lastFundingRate = Number(fdObj?.fundingRate * 100 || 0);\n\n      tree.push({\n        name: contract.symbol,\n        // price: `$${Number(prices[contract.symbol]).toFixed(\n        //   pricePrecisions[contract.symbol]\n        // )}`,\n        price: `$${Number(contract.close).toFixed(\n          pricePrecisions[contract.symbol]\n        )}`,\n        lastFundingRate: lastFundingRate,\n        volume: contract.volume,\n        quoteVolume: contract.quoteVolume,\n        percentChange: contract.percentChange,\n        dataCoverage:\n          indicator === \"Funding Rates\"\n            ? lastFundingRate\n            : contract.percentChange,\n      });\n    });\n    data24hTemp.datasets[0].tree = tree;\n    $data24h(data24hTemp);\n  }, [props]);\n\n  return (\n    <>{data24h && <Chart type=\"treemap\" data={data24h} options={options} />}</>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport useWebSocket from \"react-use-websocket\";\nimport Change24H from \"../../../components/Change24H\";\nimport TradingVol24H from \"../../../components/TradingVol24H\";\nimport { Dropdown, DropdownButton } from \"react-bootstrap\";\nimport {\n  fundingRateColors,\n  percentRangeColors,\n} from \"../../../components/ColorRange\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\n\nconst productionUrl = window.location.origin.replace(\"https\", \"wss\");\nconst socketUrl =\n  process.env.NODE_ENV === \"production\" ? productionUrl : \"ws://127.0.0.1:3000\";\nconsole.log(\"socketUrl\", socketUrl);\n\nconst IndicatorSelect = (props) => {\n  function handleTypeSelect(selection) {\n    props.typeListSelectHandler(selection);\n  }\n  return (\n    <>\n      <DropdownButton\n        id=\"dropdown-exchange\"\n        title={props.curType}\n        size=\"sm\"\n        variant=\"secondary\"\n        menuVariant=\"dark\"\n        onSelect={handleTypeSelect}\n      >\n        {props.typeList &&\n          props.typeList.map((item, index) => {\n            return (\n              <Dropdown.Item eventKey={item} key={index}>\n                {item}\n              </Dropdown.Item>\n            );\n          })}\n      </DropdownButton>\n    </>\n  );\n};\nconst TopRangeSelect = (props) => {\n  function handleTypeSelect(selection) {\n    props.typeListSelectHandler(selection);\n  }\n  return (\n    <>\n      <DropdownButton\n        id=\"dropdown-exchange\"\n        title={props.curType}\n        size=\"sm\"\n        variant=\"secondary\"\n        menuVariant=\"dark\"\n        onSelect={handleTypeSelect}\n      >\n        {props.typeList &&\n          props.typeList.map((item, index) => {\n            return (\n              <Dropdown.Item eventKey={item} key={index}>\n                {item}\n              </Dropdown.Item>\n            );\n          })}\n      </DropdownButton>\n    </>\n  );\n};\n\nconst indicatorList = [\"Performance 24h, %\", \"Funding Rates\"];\nconst topRangeList = {\n  \"Top 10 coins\": 10,\n  \"Top 20 coins\": 20,\n  \"Top 30 coins\": 30,\n  \"Top 50 coins\": 50,\n};\n\nconst ColorLegend = (props) => {\n  const colors =\n    props.indicator === \"Funding Rates\"\n      ? fundingRateColors\n      : percentRangeColors;\n\n  return (\n    <div className=\"mx-2 d-flex flex-row align-items-center\">\n      {colors.map((rangeColor, idx) => {\n        let minstr = rangeColor.min.toString();\n        let maxstr = rangeColor.max.toString();\n        if (props.indicator !== \"Funding Rates\") {\n          if (rangeColor.min !== -Infinity) minstr += \"%\";\n          if (rangeColor.max !== Infinity) maxstr += \"%\";\n        }\n\n        return (\n          <OverlayTrigger\n            placement=\"top\"\n            delay={{ show: 250, hide: 400 }}\n            overlay={\n              <Tooltip id={idx}>\n                {rangeColor.min < 0\n                  ? `${minstr} > ${maxstr}`\n                  : rangeColor.min === 0 && rangeColor.max === 0\n                  ? `${minstr}`\n                  : `${minstr} < ${maxstr}`}\n              </Tooltip>\n            }\n          >\n            <div\n              className=\"color-pattern mx-1\"\n              style={{ backgroundColor: rangeColor.color }}\n            ></div>\n          </OverlayTrigger>\n        );\n      })}\n    </div>\n  );\n};\n\nconst BinanceHeatmap = () => {\n  const [indicator, $indicator] = useState(indicatorList[0]);\n  const [topRange, $topRange] = useState(Object.keys(topRangeList)[0]);\n  function indicatorListSelectHandler(indicator) {\n    $indicator(indicator);\n  }\n  function topRangeListSelectHandler(topRange) {\n    $topRange(topRange);\n  }\n  const { sendMessage, lastMessage, readyState } = useWebSocket(socketUrl, {\n    share: true,\n    retryOnError: true,\n    reconnectAttempts: 1000,\n    reconnectInterval: 3000,\n    //Will attempt to reconnect on all close events, such as server shutting down\n    shouldReconnect: () => true,\n    onOpen: (event) => console.log(\"opened ws\", event),\n    onClose: (closeEvent) => console.log(\"ws closed\", closeEvent),\n    onError: (errEvent) => console.log(\"error\", errEvent),\n    onReconnectStop: (numAttemp) => console.log(\"reconnect stopped\", numAttemp),\n  });\n  const [binanceHeatmap, $binanceHeatmap] = useState({});\n  useEffect(() => {\n    if (lastMessage !== null) {\n      const json = JSON.parse(lastMessage.data);\n      $binanceHeatmap(json);\n    }\n  }, [lastMessage]);\n\n  return (\n    <div>\n      <div className=\"d-flex flex-row justify-content-between\">\n        <div className=\"d-flex flex-row justify-content-start mb-1\">\n          <div className=\"mx-2\">\n            <TopRangeSelect\n              curType={topRange}\n              typeList={Object.keys(topRangeList)}\n              typeListSelectHandler={topRangeListSelectHandler}\n            />\n          </div>\n          <div className=\"mx-2 d-flex flex-row justify-content-start\">\n            <IndicatorSelect\n              curType={indicator}\n              typeList={indicatorList}\n              typeListSelectHandler={indicatorListSelectHandler}\n            />\n            <ColorLegend indicator={indicator} />\n          </div>\n        </div>\n        <div className=\"d-flex flex-row w-50 justify-content-end mb-1\"></div>\n      </div>\n      <div className=\"d-flex flex-row flex-wrap justify-content-around align-content-around\">\n        <div className=\"heatmap-chart\">\n          {readyState && binanceHeatmap.change24Hs && (\n            <Change24H\n              change24Hs={binanceHeatmap.change24Hs}\n              // prices={binanceHeatmap.prices}\n              pricePrecisions={binanceHeatmap.pricePrecisions}\n              indicator={indicator}\n              topRangeValue={topRangeList[topRange]}\n              fundingRates={binanceHeatmap.fundingRates}\n            />\n          )}\n        </div>\n        <div className=\"heatmap-chart\">\n          {readyState && binanceHeatmap.change24Hs && (\n            <TradingVol24H\n              tradingVol24H={binanceHeatmap.tradingVol24H}\n              // change24Hs={binanceHeatmap.change24Hs}\n              // prices={binanceHeatmap.prices}\n              pricePrecisions={binanceHeatmap.pricePrecisions}\n              indicator={indicator}\n              topRangeValue={topRangeList[topRange]}\n              fundingRates={binanceHeatmap.fundingRates}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BinanceHeatmap;\n"],"names":["percentRangeColors","min","Number","NEGATIVE_INFINITY","max","color","POSITIVE_INFINITY","fundingRateColors","Infinity","getColor","dataCoverage","indicator","retcolor","listCheck","rangeMatch","find","range","val","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","TreemapController","TreemapElement","options","animation","plugins","title","display","text","legend","tooltip","displayColors","callbacks","items","raw","_data","name","label","item","percentChange","price","lastFundingRate","toFixed","aspectRatio","TreemapChart","props","useState","data24h","$data24h","useEffect","fundingRates","topRangeValue","pricePrecisions","data","datasets","tree","key","labels","align","formatter","context","Intl","NumberFormat","signDisplay","format","overflow","font","size","style","weight","backgroundColor","type","spacing","borderWidth","borderColor","onclick","element","console","log","data24hTemp","topChange24h","change24Hs","slice","forEach","contract","idx","fdObj","symbol","fundingRate","push","close","absPricePercent","Math","abs","CurrencyFormatter","currency","quoteVolume","tradingVol24H","volume","socketUrl","window","location","origin","replace","IndicatorSelect","DropdownButton","id","curType","variant","menuVariant","onSelect","selection","typeListSelectHandler","typeList","map","index","Dropdown","eventKey","TopRangeSelect","indicatorList","topRangeList","ColorLegend","colors","className","rangeColor","minstr","toString","maxstr","OverlayTrigger","placement","delay","show","hide","overlay","$indicator","Object","keys","topRange","$topRange","useWebSocket","share","retryOnError","reconnectAttempts","reconnectInterval","shouldReconnect","onOpen","event","onClose","closeEvent","onError","errEvent","onReconnectStop","numAttemp","lastMessage","sendMessage","readyState","binanceHeatmap","$binanceHeatmap","json","JSON","parse"],"sourceRoot":""}
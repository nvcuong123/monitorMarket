"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[198],{23131:function(e,n,r){r(72791);var t=r(78983),s=r(80184);n.Z=function(e,n){return(0,s.jsx)(t.oo,{color:"secondary",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(t.xZ,{closeButton:!0,children:(0,s.jsx)("div",{className:"fw-bold me-auto",children:e})}),(0,s.jsx)(t.S3,{children:n})]})})}},45198:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(74165),s=r(15861),i=r(29439),l=r(72791),a=r(55230),c=r(78983),o=r(49265),u=r(80184);function d(e){return e.toString().padStart(2,"0")}var m=function(e){var n=e.openOrders,r=(e.isClose,[]);return n.forEach((function(e){var n=[],t=new Date(e.time),s="".concat(function(e){return[e.getFullYear(),d(e.getMonth()+1),d(e.getDate())].join("-")}(t),", ").concat(String(t.getHours()).padStart(2,"0"),":").concat(String(t.getMinutes()).padStart(2,"0"),"::").concat(String(t.getSeconds()).padStart(2,"0"));n.push(s),n.push(e.symbol),n.push(e.type),n.push(e.side);var i="0"===e.price?e.stopPrice:e.price;n.push(Number(i).toFixed(e.pricePrecision)),n.push((i*e.origQty).toFixed(2)),n.push(e.reduceOnly?"Yes":"No"),n.push("--"),n.push("--"),r.push(n)})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(c.rb,{children:(0,u.jsx)(c.b7,{xl:12,children:(0,u.jsxs)(c.xH,{className:"mb-4",children:[(0,u.jsxs)(c.bn,{children:["Open Orders (",n.length,")"]}),(0,u.jsx)(c.sl,{children:(0,u.jsxs)(c.Sx,{className:"table",children:[(0,u.jsx)(c.V,{children:(0,u.jsx)("tr",{children:["Time","Symbol","Type","Side","Price","Amount","Reduce Only","TP/SL","Cancel All"].map((function(e,n){return(0,u.jsx)("th",{children:e},n)}))})}),(0,u.jsx)(c.NR,{children:r.map((function(e,n){return(0,u.jsx)("tr",{index:n,children:e.map((function(e,n){return(0,u.jsx)("td",{children:(0,u.jsx)("span",{className:"h6",children:e})})}))})}))})]})})]})})})})},p=r(23131),h=r(70152),x="Isolated",f="Short",j="Market",b="Limit",v=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,(0,h.UY)()),o=r.loading,d=r.symbolList,m=r.curSymbol,v=r.userOrderParam,g=r.setOrderInfo,y=v[m],N=y.modeRef,S=y.directionRef,Z=y.leverageRef,w=y.type,P=y.price,k=y.amount,C=y.takeProfitRef,F=y.stoplossRef,L=(0,l.useState)(0),R=(0,i.Z)(L,2),T=R[0],V=R[1],O=(0,l.useRef)(),Y=(0,l.useRef)(null),M=(0,l.useState)(),I=(0,i.Z)(M,2),z=I[0],A=I[1],D=(0,l.useState)("---"),E=(0,i.Z)(D,2),H=E[0],_=E[1],U=(0,l.useState)("---"),X=(0,i.Z)(U,2),B=X[0],$=X[1],Q=(0,l.useState)(0),K=(0,i.Z)(Q,2),q=K[0],J=K[1],G=(0,l.useState)(),W=(0,i.Z)(G,2),ee=(W[0],W[1]);return(0,l.useEffect)((function(){(function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.fetchAccountInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.accounts[0];A(Number(n.availableBalance).toFixed(2))}))}),[]),(0,l.useEffect)((function(){function e(){(function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolMarketInfo(m);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbolMarketInfo;_(n.markPrice),$(n.lastPrice),J(n.pricePrecision<100?n.pricePrecision:0),ee(n),console.log(n)}))}if(e(),m){var n=setInterval(e,2e3);return function(){return clearInterval(n)}}}),[m]),console.log(v[m]),o||null===v[m]?(0,u.jsx)(c.LQ,{color:"info"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.KF,{ref:O,push:T,placement:"top-end"}),(0,u.jsxs)(c.lx,{ref:Y,onSubmit:function(e){e.preventDefault(),w!==b||P?function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={symbol:m,mode:N,side:S,leverage:Z,type:w,amount:k,price:P,tp:C,sl:F,tpslPercentType:0},w!==b||!n.tp&&!n.sl){e.next=11;break}return(r=[]).push([P,k]),s={symbol:m,mode:N,direction:S,leverage:Z,repeatTime:1,sizeUnit:"USD",levels:[].concat(r),takeProfit:{trigger:"mark",type:"market",tpType:"%",value:C,percentType:0},stopLoss:{trigger:"last",type:"limit",slType:"%",value:F,percentType:0}},console.log("gridOrder",s),e.next=8,a.Z.placeGridOrder(s);case 8:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,a.Z.placeNewOrder(n);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){V((0,p.Z)("PLACE ORDER",JSON.stringify(e))),n()})):V((0,p.Z)("Type: Limit","Price should be set (larger than zero)"))},children:[(0,u.jsx)(c.p0,{children:(0,u.jsx)(c.fl,{children:"Order w. Param"})}),(0,u.jsx)(c.sD,{children:(0,u.jsxs)(c.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,u.jsxs)(c.b7,{xs:10,lg:4,children:[(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,u.jsx)(c.LX,{id:"inputSymbol",onChange:function(e){g(h.oU,e.target.value)},value:m,children:d.map((function(e,n){return(0,u.jsx)("option",{children:e},n)}))})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,u.jsxs)(c.LX,{id:"inputMode",value:N,onChange:function(e){console.log(e.target.value),g(h.IK,e.target.value)},children:[(0,u.jsx)("option",{children:x}),(0,u.jsx)("option",{children:"Crossed"})]})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,u.jsx)(c.jO,{type:"number","aria-label":"leverage",className:"col-4",id:"inputLeverage",min:1,max:50,value:Z,onChange:function(e){return g(h.h$,e.target.value)}}),(0,u.jsx)(c.wV,{component:"label",children:"x"})]}),(0,u.jsxs)(c.e_,{color:"primary",children:[(0,u.jsx)("div",{children:"Available Balance"}),(0,u.jsx)("div",{className:"text-primary",children:"".concat(z," USDT")})]})]}),(0,u.jsxs)(c.b7,{xs:10,lg:7,children:[(0,u.jsxs)(c.rb,{children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.C_,{color:"info",children:["Mark Price:"," ",Number(H).toFixed(q)]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.C_,{color:"warning",children:["Last Price:"," ",Number(B).toFixed(q)]})})]}),(0,u.jsxs)(c.rb,{className:"my-2",children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,u.jsxs)(c.LX,{id:"inputSide",value:S,onChange:function(e){g(h.JR,e.target.value)},children:[(0,u.jsx)("option",{children:"Long"}),(0,u.jsx)("option",{children:f})]})]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSide",children:"Type"}),(0,u.jsxs)(c.LX,{id:"inputType",value:w,onChange:function(e){g(h.wD,e.target.value)},children:[(0,u.jsx)("option",{children:b}),(0,u.jsx)("option",{children:j})]})]})})]}),(0,u.jsx)(c.YR,{className:"mt-1 mb-2 md-col-4",children:(0,u.jsxs)(c.YR,{className:"mb-0",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"price",children:"Price"}),(0,u.jsx)(c.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",value:P,id:"price",onChange:function(e){g(h.Id,e.target.value)},disabled:w===j}),(0,u.jsx)(c.wV,{component:"label",htmlFor:"amout",children:"Amount"}),(0,u.jsx)(c.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",value:k,id:"amount",onChange:function(e){g(h.wL,e.target.value)}})]})}),(0,u.jsxs)(c.rb,{className:"my-2",children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-1",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,u.jsx)(c.jO,{type:"number",placeholder:"","aria-label":"Take Profit",value:C,onChange:function(e){return g(h.V_,e.target.value)},id:"inputTP"}),(0,u.jsx)(c.wV,{component:"label",children:"% price"})]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-1",children:[(0,u.jsx)(c.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,u.jsx)(c.jO,{type:"number",placeholder:"","aria-label":"stoploss percent",value:F,onChange:function(e){return g(h.Hg,e.target.value)},id:"inputSL"}),(0,u.jsx)(c.wV,{component:"label",children:"% price"})]})})]})]})]})}),(0,u.jsxs)(c.Ym,{children:[(0,u.jsx)(c.u5,{color:"secondary",onClick:function(){return n()},children:"Close"}),(0,u.jsx)(c.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},g="Isolated",y="Crossed",N=g,S="Short",Z=S,w="Market",P="Limit",k=w,C=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,(0,l.useState)(!0)),o=(0,i.Z)(r,2),d=o[0],m=o[1],h=(0,l.useState)(0),x=(0,i.Z)(h,2),f=x[0],j=x[1],b=(0,l.useRef)(),v=(0,l.useRef)(null),C=(0,l.useState)([]),F=(0,i.Z)(C,2),L=F[0],R=F[1],T=(0,l.useRef)(Z),V=((0,l.useRef)("30"),(0,l.useState)()),O=(0,i.Z)(V,2),Y=O[0],M=O[1],I=(0,l.useRef)("5"),z=(0,l.useRef)(N),A=(0,l.useState)("BTCUSDT"),D=(0,i.Z)(A,2),E=D[0],H=D[1],_=(0,l.useState)(k),U=(0,i.Z)(_,2),X=U[0],B=U[1],$=(0,l.useState)(),Q=(0,i.Z)($,2),K=Q[0],q=Q[1],J=(0,l.useState)(),G=(0,i.Z)(J,2),W=G[0],ee=G[1],ne=(0,l.useState)("---"),re=(0,i.Z)(ne,2),te=re[0],se=re[1],ie=(0,l.useState)("---"),le=(0,i.Z)(ie,2),ae=le[0],ce=le[1],oe=(0,l.useState)(0),ue=(0,i.Z)(oe,2),de=ue[0],me=ue[1],pe=(0,l.useRef)(null),he=(0,l.useRef)(null);return(0,l.useEffect)((function(){(function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbols.sort();R(n)})),function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.fetchAccountInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){var n=e.accounts[0];M(Number(n.availableBalance).toFixed(2))}))}),[]),(0,l.useEffect)((function(){function e(){(function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolMarketInfo(E);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbolMarketInfo;se(n.markPrice),ce(n.lastPrice),me(n.pricePrecision<100?n.pricePrecision:0)}))}var n;if(e(),n=E,function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolInfo(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){var n=e.symbolInfo;z.current.value=!0===n.isolated?g:y,I.current.value=n.leverage})),m(!1),E){var r=setInterval(e,2e3);return function(){return clearInterval(r)}}}),[E]),d?(0,u.jsx)(c.LQ,{color:"info"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.KF,{ref:b,push:f,placement:"top-end"}),(0,u.jsxs)(c.lx,{ref:v,onSubmit:function(e){e.preventDefault(),X!==P||K?function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={symbol:E,mode:z.current.value,side:T.current.value,leverage:I.current.value,type:X,amount:W,price:K,tp:pe.current.value,sl:he.current.value,tpslPercentType:1},X!==P||!n.tp&&!n.sl){e.next=11;break}return(r=[]).push([K,W]),s={symbol:E,mode:z.current.value,direction:T.current.value,leverage:I.current.value,repeatTime:1,sizeUnit:"USD",levels:[].concat(r),takeProfit:{trigger:"mark",type:"market",tpType:"%",value:pe.current.value,percentType:1},stopLoss:{trigger:"last",type:"limit",slType:"%",value:he.current.value,percentType:1}},console.log("gridOrder",s),e.next=8,a.Z.placeGridOrder(s);case 8:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,a.Z.placeNewOrder(n);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){j((0,p.Z)("PLACE ORDER",JSON.stringify(e))),n()})):j((0,p.Z)("Type: Limit","Price should be set (larger than zero)"))},children:[(0,u.jsx)(c.p0,{children:(0,u.jsx)(c.fl,{children:"New Order"})}),(0,u.jsx)(c.sD,{children:(0,u.jsxs)(c.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,u.jsxs)(c.b7,{xs:10,lg:4,children:[(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,u.jsx)(c.LX,{id:"inputSymbol",onChange:function(e){H(e.target.value),q(""),ee("")},value:E,children:L.map((function(e,n){return(0,u.jsx)("option",{children:e},n)}))})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,u.jsxs)(c.LX,{ref:z,id:"inputMode",defaultValue:N,children:[(0,u.jsx)("option",{children:g}),(0,u.jsx)("option",{children:y})]})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,u.jsx)(c.jO,{ref:I,type:"number","aria-label":"profit target",className:"col-4",defaultValue:"5",id:"inputLeverage"}),(0,u.jsx)(c.wV,{component:"label",children:"x"})]}),(0,u.jsxs)(c.e_,{color:"primary",children:[(0,u.jsx)("div",{children:"Available Balance"}),(0,u.jsx)("div",{className:"text-primary",children:"".concat(Y," USDT")})]})]}),(0,u.jsxs)(c.b7,{xs:10,lg:7,children:[(0,u.jsxs)(c.rb,{children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.C_,{color:"info",children:["Mark Price:"," ",Number(te).toFixed(de)]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.C_,{color:"warning",children:["Last Price:"," ",Number(ae).toFixed(de)]})})]}),(0,u.jsxs)(c.YR,{className:"mt-1 mb-2 md-col-4",children:[(0,u.jsx)(c.b7,{xs:7,lg:6,className:"mr-2",children:(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,u.jsxs)(c.LX,{id:"inputSide",ref:T,defaultValue:Z,children:[(0,u.jsx)("option",{children:"Long"}),(0,u.jsx)("option",{children:S})]})]})}),(0,u.jsx)(c.b7,{xs:7,lg:5,children:(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSide",children:"Type"}),(0,u.jsxs)(c.LX,{id:"inputType",value:X,onChange:function(e){B(e.target.value)},children:[(0,u.jsx)("option",{children:P}),(0,u.jsx)("option",{children:w})]})]})}),(0,u.jsxs)(c.YR,{className:"mb-0",size:"md",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"price",children:"Price"}),(0,u.jsx)(c.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",defaultValue:"",id:"price",onChange:function(e){q(Number(e.target.value))},disabled:X===w}),(0,u.jsx)(c.wV,{component:"label",htmlFor:"amout",children:"Amount"}),(0,u.jsx)(c.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",defaultValue:"",id:"amount",onChange:function(e){ee(Number(e.target.value))}})]})]}),(0,u.jsxs)(c.rb,{className:"my-2",children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-1",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,u.jsx)(c.jO,{ref:pe,type:"number",placeholder:"","aria-label":"Take Profit",defaultValue:"",id:"inputTP"}),(0,u.jsx)(c.wV,{component:"label",children:"% marg."})]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-1",children:[(0,u.jsx)(c.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,u.jsx)(c.jO,{ref:he,type:"number",placeholder:"","aria-label":"stoploss percent",defaultValue:"",id:"inputSL"}),(0,u.jsx)(c.wV,{component:"label",children:"% marg."})]})})]})]})]})}),(0,u.jsxs)(c.Ym,{children:[(0,u.jsx)(c.u5,{color:"secondary",onClick:function(){return n()},children:"Close"}),(0,u.jsx)(c.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},F=r(93433),L="USD",R="%",T=L,V="Isolated",O="Crossed",Y=V,M="Short",I=M,z=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,(0,l.useState)(!0)),o=(0,i.Z)(r,2),d=o[0],m=o[1],h=(0,l.useState)(0),x=(0,i.Z)(h,2),f=x[0],j=x[1],b=(0,l.useRef)(),v=(0,l.useRef)(null),g=(0,l.useState)([]),y=(0,i.Z)(g,2),N=y[0],S=y[1],Z=(0,l.useRef)(I),w=((0,l.useRef)("30"),(0,l.useRef)("5")),P=(0,l.useRef)(Y),k=(0,l.useState)(),C=(0,i.Z)(k,2),z=C[0],A=C[1],D=(0,l.useState)("BTCUSDT"),E=(0,i.Z)(D,2),H=E[0],_=E[1],U=(0,l.useState)(),X=(0,i.Z)(U,2),B=X[0],$=X[1],Q=(0,l.useState)(1),K=(0,i.Z)(Q,2),q=K[0],J=K[1],G=(0,l.useState)(5),W=(0,i.Z)(G,2),ee=W[0],ne=W[1],re=(0,l.useState)(T),te=(0,i.Z)(re,2),se=te[0],ie=te[1],le=(0,l.useState)(Array(5)),ae=(0,i.Z)(le,2),ce=ae[0],oe=ae[1],ue=(0,l.useState)(Array(5)),de=(0,i.Z)(ue,2),me=de[0],pe=de[1],he=(0,l.useState)(Array(5)),xe=(0,i.Z)(he,2),fe=xe[0],je=xe[1],be=(0,l.useState)(null),ve=(0,i.Z)(be,2),ge=ve[0],ye=ve[1],Ne=(0,l.useState)(null),Se=(0,i.Z)(Ne,2),Ze=Se[0],we=Se[1],Pe=(0,l.useState)("---"),ke=(0,i.Z)(Pe,2),Ce=ke[0],Fe=ke[1],Le=(0,l.useState)("---"),Re=(0,i.Z)(Le,2),Te=Re[0],Ve=Re[1],Oe=(0,l.useState)(0),Ye=(0,i.Z)(Oe,2),Me=Ye[0],Ie=Ye[1],ze=(0,l.useState)("--"),Ae=(0,i.Z)(ze,2),De=Ae[0],Ee=Ae[1],He=(0,l.useState)("--"),_e=(0,i.Z)(He,2),Ue=_e[0],Xe=_e[1],Be=(0,l.useState)(R),$e=(0,i.Z)(Be,2),Qe=$e[0],Ke=$e[1],qe=(0,l.useRef)(null),Je=(0,l.useState)(R),Ge=(0,i.Z)(Je,2),We=Ge[0],en=Ge[1],nn=(0,l.useRef)(null),rn=(0,l.useState)(),tn=(0,i.Z)(rn,2),sn=tn[0],ln=tn[1];function an(e,n){if(Number.isInteger(e))return e;var r=parseFloat(e).toFixed(16),t=Math.max(n.indexOf("1")-1,0),s=r.indexOf(".");return parseFloat(r.slice(0,s+t+1))}function cn(e,n){if(e>0&&n>0&&B.stepSize){var r=an(n,B.stepSize),t=(r*e).toFixed(Me);return"~".concat(r,"/").concat(t,"$")}}function on(e){var n=Number(e.target.id.replace("price",""));oe((function(r){var t=(0,F.Z)(r);return t[n]=Number(e.target.value),t}))}function un(e){var n=Number(e.target.id.replace("amount",""));pe((function(r){var t=(0,F.Z)(r);return t[n]=Number(e.target.value),t}))}return(0,l.useEffect)((function(){!function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolList();case 2:n=e.sent,r=n.symbols.sort(),S(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.fetchAccountInfo();case 2:n=e.sent,r=n.accounts[0],A(Number(r.availableBalance).toFixed(2));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),(0,l.useEffect)((function(){function e(){(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolMarketInfo(H);case 2:n=e.sent,r=n.symbolMarketInfo,Fe(r.markPrice),Ve(r.lastPrice),Ie(r.pricePrecision<100?r.pricePrecision:0);case 7:case"end":return e.stop()}}),e)})))()}var n;if(e(),n=H,function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var r,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getSymbolInfo(n);case 2:r=e.sent,s=r.symbolInfo,P.current.value=!0===s.isolated?V:O,w.current.value=s.leverage,$(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),m(!1),H){var r=setInterval(e,2e3);return ln(r),function(){return clearInterval(r)}}}),[H]),(0,l.useEffect)((function(){if(B){var e=B.minQty;Te*e<B.minNotional&&(e=B.minNotional/Te),(e=an(e,B.stepSize))*Te<B.minNotional&&(e+=parseFloat(B.stepSize)),Ee(e*Te),Xe(e)}}),[Te,B]),(0,l.useEffect)((function(){var e,n=0,r=0,t=0,s=ce.slice(0,ee),i=[];s.forEach((function(e,s){var l=me[s];if(e>0&&l>0){var a=l;if(se===L)a=an(l/e,B.stepSize);i[s]=a,r+=a*e,n+=a,t+=a*e}})),r=r.toFixed(Me),e=(t/n).toFixed(Me),je((function(e){return[].concat(i)})),we(e),ye(r)}),[ce,me,ee]),d?(0,u.jsx)(c.LQ,{color:"info"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.KF,{ref:b,push:f,placement:"top-end"}),(0,u.jsxs)(c.lx,{ref:v,onSubmit:function(e){e.preventDefault(),clearInterval(sn),function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],ce.slice(0,ee).forEach((function(e,r){var t=me[r],s=fe[r];e>0&&t>0&&n.push([e,t,s])})),r={symbol:H,mode:P.current.value,direction:Z.current.value,leverage:w.current.value,repeatTime:q,sizeUnit:se,levels:[].concat(n),takeProfit:{trigger:"mark",type:"market",tpType:Qe,value:qe.current.value,percentType:1},stopLoss:{trigger:"last",type:"limit",slType:We,value:nn.current.value,percentType:1}},e.next=6,a.Z.placeGridOrder(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){j((0,p.Z)("PLACE ORDER",JSON.stringify(e))),n()}))},children:[(0,u.jsx)(c.p0,{children:(0,u.jsx)(c.fl,{children:"New Multi-Level Order"})}),(0,u.jsx)(c.sD,{children:(0,u.jsxs)(c.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,u.jsxs)(c.b7,{xs:10,lg:4,children:[(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,u.jsx)(c.LX,{id:"inputSymbol",onChange:function(e){_(e.target.value),ne(5),oe(new Array(5)),pe(new Array(5))},value:H,children:N.map((function(e,n){return(0,u.jsx)("option",{children:e},n)}))})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,u.jsxs)(c.LX,{ref:P,id:"inputMode",defaultValue:Y,children:[(0,u.jsx)("option",{children:V}),(0,u.jsx)("option",{children:O})]})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,u.jsx)(c.jO,{ref:w,type:"number","aria-label":"profit target",className:"col-4",defaultValue:"5",id:"inputLeverage"}),(0,u.jsx)(c.wV,{component:"label",children:"x"})]}),(0,u.jsxs)(c.YR,{className:"mb-2",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,u.jsxs)(c.LX,{id:"inputSide",ref:Z,defaultValue:I,children:[(0,u.jsx)("option",{children:"Long"}),(0,u.jsx)("option",{children:M})]})]}),(0,u.jsxs)(c.e_,{color:"primary",children:[(0,u.jsx)("div",{children:"Available Balance"}),(0,u.jsx)("div",{className:"text-primary",children:"".concat(z," USDT")})]})]}),(0,u.jsxs)(c.b7,{xs:10,lg:7,children:[(0,u.jsxs)(c.rb,{children:[(0,u.jsx)(c.b7,{xs:4,children:(0,u.jsxs)(c.C_,{color:"info",children:["Mark Price:"," ",Number(Ce).toFixed(Me)]})}),(0,u.jsx)(c.b7,{xs:4,children:(0,u.jsxs)(c.C_,{color:"warning",children:["Last Price:"," ",Number(Te).toFixed(Me)]})}),(0,u.jsxs)(c.b7,{xs:4,children:[(0,u.jsx)(c.kV,{label:se,id:"sizeUnit",defaultChecked:!0,onClick:function(e){var n=se;"on"===e.target.value?e.target.value="off":e.target.value="on",ie("on"===e.target.value?L:"COIN");var r=(0,F.Z)(me);me.forEach((function(e,t){ce[t]>0&&e>0&&(r[t]=n===L?e/ce[t]:e*ce[t])})),pe((function(){return r}))}}),(0,u.jsx)(c.L8,{children:"Min. ".concat(Ue,"/").concat(Number(De).toFixed(Me),"$")})]})]}),(0,u.jsxs)(c.YR,{className:"mt-1 mb-2 md-col-4",children:[(0,u.jsxs)(c.rb,{className:"my-2",children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-0",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputLevels",children:"Repeat"}),(0,u.jsx)(c.jO,{type:"number",placeholder:q,"aria-label":"",value:q,id:"reapeatTime",onChange:function(e){J(e.target.value)}})]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-0",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputLevels",children:"Levels"}),(0,u.jsx)(c.jO,{type:"number",placeholder:ee,"aria-label":"",value:ee,id:"inputLevels",onChange:function(e){ne(e.target.value)}})]})})]}),!!ee&&me&&Array.from({length:ee}).map((function(e,n){return(0,u.jsxs)(c.YR,{className:"mb-0",size:"sm",children:[(0,u.jsxs)(c.wV,{component:"label",htmlFor:"price"+n,children:["Price ",n+1]}),(0,u.jsx)(c.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",defaultValue:"",id:"price"+n,onChange:on}),(0,u.jsxs)(c.wV,{component:"label",htmlFor:"amout"+n,children:["Size ",n+1]}),(0,u.jsx)(c.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",id:"amount"+n,onChange:un,value:me[n]}),(0,u.jsx)(c.wV,{className:"text-info",component:"label",htmlFor:"price"+n,children:cn(ce[n],fe[n])})]},n)}))]}),(0,u.jsxs)(c.rb,{children:[(0,u.jsx)(c.b7,{xs:4,children:(0,u.jsxs)(c.C_,{color:"danger",children:["Avg Price: ",Ze,"$"]})}),(0,u.jsx)(c.b7,{xs:4,children:(0,u.jsxs)(c.C_,{color:"warning",children:["Total Size: ",ge,"$"]})}),(0,u.jsx)(c.b7,{xs:4,children:(0,u.jsxs)(c.C_,{color:"warning",children:["Balance:"," ",(ge/w.current.value).toFixed(2),"$"]})})]}),(0,u.jsxs)(c.rb,{className:"my-2",children:[(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-1",children:[(0,u.jsx)(c.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,u.jsx)(c.jO,{ref:qe,type:"number",placeholder:"","aria-label":"Take Profit",defaultValue:"",id:"inputTP"}),(0,u.jsx)(c.u5,{onClick:function(){return Ke(Qe===R?"$":R)},children:Qe})]})}),(0,u.jsx)(c.b7,{children:(0,u.jsxs)(c.YR,{className:"mb-1",children:[(0,u.jsx)(c.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,u.jsx)(c.jO,{ref:nn,type:"number",placeholder:"","aria-label":"stoploss percent",defaultValue:"",id:"inputSL"}),(0,u.jsx)(c.u5,{onClick:function(){return en(We===R?"$":R)},children:We})]})})]})]})]})}),(0,u.jsxs)(c.Ym,{children:[(0,u.jsx)(c.u5,{color:"secondary",onClick:function(){return n},children:"Close"}),(0,u.jsx)(c.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},A=function(){var e=(0,l.useState)(null),n=(0,i.Z)(e,2),r=n[0],d=n[1],p=(0,l.useState)(!1),h=(0,i.Z)(p,2),x=h[0],f=h[1],j=(0,l.useState)(!1),b=(0,i.Z)(j,2),g=b[0],y=b[1],N=(0,l.useState)(!1),S=(0,i.Z)(N,2),Z=S[0],w=S[1];function P(){return k.apply(this,arguments)}function k(){return k=(0,s.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.getPositions();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}(0,l.useEffect)((function(){P().then((function(e){return d(e)}));var e=setInterval((function(){P().then((function(e){return d(e)}))}),2e3);return function(){return clearInterval(e)}}),[]);var F=null===r||void 0===r?void 0:r.openOrders;return r?!1===r.success?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{children:"Manual Trade"}),(0,u.jsx)("p",{children:r.message})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.rb,{children:(0,u.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-4",children:(0,u.jsxs)("div",{className:"d-inline-flex justify-content-between align-items-center",children:[(0,u.jsx)("button",{onClick:function(){return f(!0)},className:"btn btn-warning mx-2",children:"Order w. Param"}),(0,u.jsx)(c.Tk,{size:"lg",alignment:"center",visible:x,onClose:function(){return f(!1)},children:(0,u.jsx)(v,{onCloseHandler:function(){return f(!1)}})}),(0,u.jsx)("button",{onClick:function(e){y(!0)},className:"btn btn-warning mx-2",children:"New Order"}),(0,u.jsx)(c.Tk,{size:"lg",alignment:"center",visible:g,onClose:function(){return y(!1)},children:(0,u.jsx)(C,{onCloseHandler:function(){return y(!1)}})}),(0,u.jsx)("button",{onClick:function(e){w(!0)},className:"btn btn-warning mx-2",children:"New Multi-Level Order"}),(0,u.jsx)(c.Tk,{size:"lg",alignment:"center",visible:Z,onClose:function(){return w(!1)},children:(0,u.jsx)(z,{onCloseHandler:function(){return w(!1)}})})]})})}),Array.isArray(r.positions)&&(0,u.jsx)(o.Z,{positions:r.positions.sort((function(e,n){return e.symbol<n.symbol?-1:e.symbol>n.symbol?1:0})),isClose:!0}),Array.isArray(F)&&(0,u.jsx)(m,{openOrders:F})]}):(0,u.jsx)(c.LQ,{color:"info"})}},49265:function(e,n,r){r.d(n,{Z:function(){return h}});var t=r(74165),s=r(15861),i=r(29439),l=r(72791),a=(r(71047),r(55230)),c=r(81694),o=r.n(c),u=r(78983),d=r(80184),m=function(e){var n=e.position,r=e.index,t=e.isClose,s=e.closeHandler,a=e.closeLimitHandler,c=(0,l.useState)(""),m=(0,i.Z)(c,2),p=m[0],h=m[1];var x=n.positionAmt>0?"info":"danger",f=n.pnl>0?"success":"danger";return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(u.T6,{className:"",children:[(0,d.jsxs)(u.NN,{className:"align-middle",children:[(0,d.jsx)(u.C_,{color:x,children:n.symbol}),(0,d.jsx)("span",{children:(0,d.jsxs)(u.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})})]}),(0,d.jsx)(u.NN,{className:o()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.entryPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.markPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-warning",children:n.liquidationPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-info",children:n.lastPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.marginSize}),(0,d.jsxs)(u.NN,{className:o()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]}),t&&(0,d.jsx)(u.NN,{className:"align-middle",children:(0,d.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){s(n)},size:"sm",children:"Market"}),(0,d.jsx)("div",{className:"vr align-middle"}),(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){a(n,p),h("")},size:"sm",children:"Limit"}),(0,d.jsx)("div",{className:"col-4",children:(0,d.jsx)(u.jO,{type:"number",size:"sm",placeholder:"price",value:p,id:"limit-price",onChange:function(e){return h(e.target.value)}})})]})})]},r)})},p=r(23131),h=function(e){var n=e.positions,r=e.isClose,c=(0,l.useState)(0),o=(0,i.Z)(c,2),h=o[0],x=o[1],f=(0,l.useRef)();function j(e,n,r){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)((0,t.Z)().mark((function e(n,r,s){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.closePosition(n,r,s);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){j(e,"market",0).then((function(e){x((0,p.Z)("Close Position",e.message))}))}function g(e,n){var r=e.markPrice-50*e.markPrice/100,t=1.5*e.markPrice;n>=r&&n<=t?j(e,"limit",n).then((function(e){x((0,p.Z)("Close Position",e.message))})):x((0,p.Z)("Close Position","price should be larger or smaller than mark price maximum of 50%"))}function y(){!function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.clearPositions();case 2:return n=e.sent,x((0,p.Z)("Close All Positions","".concat(n.msg))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}var N=n.map((function(e,n){var r=e.symbol,t=e.entryPrice,s=e.unRealizedProfit,i=e.positionAmt,l=(e.isolatedMargin,e.markPrice),a=e.liquidationPrice,c=e.lastPrice,o=e.isolatedWallet,u=e.leverage,d=e.pricePrecision,m=i*t,p=100*s/(Math.abs(m)/u);return{symbol:r,positionAmt:i,size:Number(m).toFixed(2),entryPrice:Number(t).toFixed(d),markPrice:Number(l).toFixed(d),lastPrice:Number(c).toFixed(d),liquidationPrice:Number(a).toFixed(d),marginSize:Number(o).toFixed(2),pnl:Number(s).toFixed(2),roe:Number(p).toFixed(2),leverage:u}})),S=["Symbol","Size","Entry Price","Mark Price","Liq. Price","Last Price","Margin","PNL (ROE%)"];return r&&S.push("Close All Positions"),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.rb,{children:(0,d.jsx)(u.b7,{xl:12,children:(0,d.jsxs)(u.xH,{className:"mb-4",children:[(0,d.jsxs)(u.bn,{children:["Positions (",N.length,")"]}),(0,d.jsx)(u.sl,{children:(0,d.jsxs)("table",{className:"table",children:[(0,d.jsx)("thead",{className:"",children:(0,d.jsx)("tr",{children:S.map((function(e,n){return"Close All Positions"===e?(0,d.jsx)("th",{children:(0,d.jsx)("div",{children:(0,d.jsx)(u.If,{content:"close all positions as market price",placement:"top",children:(0,d.jsx)(u.u5,{variant:"ghost",color:"warning",onClick:y,children:e})})})},n):(0,d.jsx)("th",{children:e},n)}))})}),(0,d.jsx)(u.NR,{children:N.map((function(e,n){return(0,d.jsx)(m,{position:e,isClose:r,closeHandler:v,closeLimitHandler:g},n)}))})]})})]})})}),(0,d.jsx)(u.KF,{ref:f,push:h,placement:"top-end"})]})}}}]);
//# sourceMappingURL=198.33cc88ab.chunk.js.map
"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[422],{94743:function(e,n,r){var t=r(78983),s=r(80184);n.Z=function(e){var n="https://www.binance.com/en/futures/".concat(e.symbol);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t.C_,{style:{display:"flex",alignItems:"center"},className:"custom-link",color:"warning",onClick:function(){return function(e){var n=window.open(e,"_blank","noopener,noreferrer");n&&(n.opener=null)}(n)},children:e.symbol})})}},23131:function(e,n,r){r(72791);var t=r(78983),s=r(80184);n.Z=function(e,n){return(0,s.jsx)(t.oo,{color:"secondary",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(t.xZ,{closeButton:!0,children:(0,s.jsx)("div",{className:"fw-bold me-auto",children:e})}),(0,s.jsx)(t.S3,{children:n})]})})}},15422:function(e,n,r){r.r(n),r.d(n,{default:function(){return X}});var t=r(74165),s=r(1413),i=r(15861),l=r(29439),a=r(72791),c=r(55230),o=r(78983),u=r(40337),d=r(94743),m=r(97892),x=r.n(m),h=r(80184);var p=function(e){var n=e.orderHeader,r=e.orderValue,t=r[1],s=r[0];return(0,h.jsx)(o.b7,{xs:12,md:6,xl:4,children:(0,h.jsxs)(o.xH,{className:"mx-1 mb-2",color:"secondary",textColor:"white",children:[(0,h.jsx)(o.bn,{children:(0,h.jsxs)("div",{className:"d-flex d-flex-row justify-content-between align-items-center",children:[(0,h.jsx)(d.Z,{symbol:t}),(0,h.jsx)("div",{className:"mx-2",style:{fontSize:"smaller"},children:s})]})}),(0,h.jsx)(o.sl,{children:(0,h.jsx)(o.Sx,{striped:!0,hover:!0,responsive:!0,color:"light",className:"smaller-text mt-2",style:{width:"100%"},children:(0,h.jsx)(o.NR,{style:{overflowY:"auto"},children:n.slice(2,8).map((function(e,n){return(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{children:e}),(0,h.jsx)(o.NN,{children:r[n+2]})]})}))})})})]})})},f=function(e){var n=e.openOrders,r=(e.isClose,e.exchange),t=["Time","Symbol","Type","Side","Price","Amount","Reduce Only"],s=[];return n.forEach((function(e){var n=[],r=x()(e.time).format("DD/MM HH:mm:ss");n.push(r),n.push(e.symbol),n.push(e.type),n.push(e.side),n.push(e.price),n.push("".concat((e.price*e.origQty).toFixed(2))),n.push(e.reduceOnly?"Yes":"No"),s.push(n)})),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.rb,{children:(0,h.jsx)(o.b7,{xl:12,children:(0,h.jsxs)(o.xH,{className:"mb-4",children:[(0,h.jsxs)(o.bn,{children:[r===c.Tc?"Limit/Market Orders":"Open Orders"," ","(",n.length,")"]}),(0,h.jsx)(o.sl,{children:n.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:"orders-card",className:"d-flex flex-wrap",children:s.map((function(e,n){return(0,h.jsx)(p,{orderHeader:t,orderValue:e})}))}),(0,h.jsxs)(o.Sx,{id:"orders-table",children:[(0,h.jsx)(o.V,{children:(0,h.jsx)("tr",{children:t.map((function(e,n){return(0,h.jsx)("th",{children:e},n)}))})}),(0,h.jsx)(o.NR,{children:s.map((function(e,n){return(0,h.jsx)("tr",{index:n,children:e.map((function(e,n){return(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"h6",children:e})})}))})}))})]})]})})]})})})})},j=r(23131),b=r(70152),v=r(78392),g="Isolated",y="Both",N="Market",S="Limit",Z=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,e.exchange),s=(0,b.UY)(),u=s.loading,d=s.symbolList,m=s.symbolListGateIO,x=s.symbolListByBit,p=s.curSymbol,f=s.userOrderParam,Z=s.setOrderInfo,P=f[p],w=P.modeRef,C=P.directionRef,k=P.leverageRef,L=P.type,T=P.price,F=P.amount,R=P.takeProfitRef,O=P.stoplossRef,V=(0,a.useState)(0),z=(0,l.Z)(V,2),M=z[0],I=z[1],Y=(0,a.useRef)(),A=(0,a.useRef)(null),H=(0,a.useState)(),E=(0,l.Z)(H,2),D=E[0],B=E[1],_=(0,a.useState)("---"),K=(0,l.Z)(_,2),U=K[0],q=K[1],X=(0,a.useState)("---"),$=(0,l.Z)(X,2),Q=$[0],G=$[1],W=(0,a.useState)(0),J=(0,l.Z)(W,2),ee=J[0],ne=J[1],re=(0,a.useState)(),te=(0,l.Z)(re,2),se=(te[0],te[1]),ie=r===c.Tc?m:r===c.B$?x:d;return(0,a.useEffect)((function(){(function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.fetchAccountInfo(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}})()(r).then((function(e){if(r===c.KM){var n=e.accounts[0];B(Number(n.availableBalance).toFixed(2))}else r===c.Tc&&B(Number(e.accounts.available).toFixed(2))}))}),[r]),(0,a.useEffect)((function(){function e(e){(function(){var e=(0,i.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolMarketInfo(p,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}})()(e).then((function(e){var n=e.symbolMarketInfo;q(n.markPrice),G(n.lastPrice),ne(n.pricePrecision<100?n.pricePrecision:0),se(n)}))}if(e(r),p){var n=setInterval((function(){return e(r)}),v.W);return function(){return clearInterval(n)}}}),[p,r]),u||null===f[p]?(0,h.jsx)(o.LQ,{color:"info"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.KF,{ref:Y,push:M,placement:"top-end"}),(0,h.jsxs)(o.lx,{ref:A,onSubmit:function(e){e.preventDefault(),L!==S||T?function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,s,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={symbol:p,mode:w,side:C,leverage:k,type:L,amount:F,price:T,tp:R,sl:O,tpslPercentType:0},L!==S||!n.tp&&!n.sl){e.next=11;break}return(s=[]).push([T,F]),i={symbol:p,mode:w,direction:C,leverage:k,repeatTime:1,sizeUnit:"USD",levels:[].concat(s),takeProfit:{trigger:"mark",type:"market",tpType:"%",value:R,percentType:0},stopLoss:{trigger:"last",type:"limit",slType:"%",value:O,percentType:0}},console.log("gridOrder",i),e.next=8,c.ZP.placeGridOrder(i,r);case 8:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,c.ZP.placeNewOrder(n,r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){n(e)})):I((0,j.Z)("Type: Limit","Price should be set (larger than zero)"))},children:[(0,h.jsx)(o.p0,{children:(0,h.jsxs)(o.fl,{children:[(0,h.jsx)("h2",{children:r})," Order w. Param"]})}),(0,h.jsx)(o.sD,{children:(0,h.jsxs)(o.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,h.jsxs)(o.b7,{xs:10,lg:4,children:[(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,h.jsx)(o.LX,{id:"inputSymbol",onChange:function(e){Z(b.oU,e.target.value)},value:p,children:ie.map((function(e,n){return(0,h.jsx)("option",{children:e},n)}))})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,h.jsxs)(o.LX,{id:"inputMode",value:w,onChange:function(e){console.log(e.target.value),Z(b.IK,e.target.value)},children:[(0,h.jsx)("option",{children:g}),(0,h.jsx)("option",{children:"Crossed"})]})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,h.jsx)(o.jO,{type:"number","aria-label":"leverage",className:"col-4",id:"inputLeverage",min:1,max:50,value:k,onChange:function(e){return Z(b.h$,e.target.value)}}),(0,h.jsx)(o.wV,{component:"label",children:"x"})]}),(0,h.jsxs)(o.e_,{color:"primary",children:[(0,h.jsx)("div",{children:"Available Balance"}),(0,h.jsx)("div",{className:"text-primary",children:"".concat(D," USDT")})]})]}),(0,h.jsxs)(o.b7,{xs:10,lg:7,children:[(0,h.jsxs)(o.rb,{children:[(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.C_,{color:"info",children:["Mark Price:"," ",Number(U).toFixed(ee)]})}),(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.C_,{color:"warning",children:["Last Price:"," ",Number(Q).toFixed(ee)]})})]}),(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,h.jsxs)(o.LX,{id:"inputSide",value:C,onChange:function(e){Z(b.JR,e.target.value)},children:[r===c.Tc&&(0,h.jsx)("option",{children:y}),(0,h.jsx)("option",{children:"Long"}),(0,h.jsx)("option",{children:"Short"})]})]})}),(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Type"}),(0,h.jsxs)(o.LX,{id:"inputType",value:L,onChange:function(e){Z(b.wD,e.target.value)},children:[r===c.KM&&(0,h.jsx)("option",{children:S}),(0,h.jsx)("option",{children:N})]})]})})]}),(0,h.jsx)(o.YR,{className:"mt-1 mb-2 md-col-4",children:(0,h.jsxs)(o.YR,{className:"mb-0",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"price",children:"Price"}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",value:T,id:"price",onChange:function(e){Z(b.Id,e.target.value)},disabled:L===N}),(0,h.jsx)(o.wV,{component:"label",htmlFor:"amout",children:"Amount"}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",value:F,id:"amount",onChange:function(e){Z(b.wL,e.target.value)}})]})}),(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,h.jsx)(o.jO,{type:"number",placeholder:"","aria-label":"Take Profit",value:R,onChange:function(e){return Z(b.V_,e.target.value)},id:"inputTP"}),(0,h.jsx)(o.wV,{component:"label",children:"% price"})]})}),(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,h.jsx)(o.jO,{type:"number",placeholder:"","aria-label":"stoploss percent",value:O,onChange:function(e){return Z(b.Hg,e.target.value)},id:"inputSL"}),(0,h.jsx)(o.wV,{component:"label",children:"% price"})]})})]})]})]})}),(0,h.jsxs)(o.Ym,{children:[(0,h.jsx)(o.u5,{color:"secondary",onClick:function(){return n()},children:"Close"}),(0,h.jsx)(o.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},P="Isolated",w="Crossed",C=P,k="Short",L=k,T="Market",F="Limit",R=T,O=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,e.exchange),s=(0,a.useState)(!0),u=(0,l.Z)(s,2),d=u[0],m=u[1],x=(0,a.useState)(0),p=(0,l.Z)(x,2),f=p[0],b=p[1],g=(0,a.useRef)(),y=(0,a.useRef)(null),N=(0,a.useState)([]),S=(0,l.Z)(N,2),Z=S[0],O=S[1],V=(0,a.useRef)(L),z=((0,a.useRef)("30"),(0,a.useState)()),M=(0,l.Z)(z,2),I=M[0],Y=M[1],A=(0,a.useRef)("5"),H=(0,a.useRef)(C),E=(0,a.useState)("BTCUSDT"),D=(0,l.Z)(E,2),B=D[0],_=D[1],K=(0,a.useState)(R),U=(0,l.Z)(K,2),q=U[0],X=U[1],$=(0,a.useState)(),Q=(0,l.Z)($,2),G=Q[0],W=Q[1],J=(0,a.useState)(),ee=(0,l.Z)(J,2),ne=ee[0],re=ee[1],te=(0,a.useState)("---"),se=(0,l.Z)(te,2),ie=se[0],le=se[1],ae=(0,a.useState)("---"),ce=(0,l.Z)(ae,2),oe=ce[0],ue=ce[1],de=(0,a.useState)(0),me=(0,l.Z)(de,2),xe=me[0],he=me[1],pe=(0,a.useRef)(null),fe=(0,a.useRef)(null);return(0,a.useEffect)((function(){(function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbols.sort();O(n)})),function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.fetchAccountInfo();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){var n=e.accounts[0];Y(Number(n.availableBalance).toFixed(2))}))}),[]),(0,a.useEffect)((function(){function e(){(function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolMarketInfo(B);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbolMarketInfo;le(n.markPrice),ue(n.lastPrice),he(n.pricePrecision<100?n.pricePrecision:0)}))}var n;if(e(),n=B,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolInfo(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){var n=e.symbolInfo;H.current.value=!0===n.isolated?P:w,A.current.value=n.leverage})),m(!1),B){var r=setInterval(e,v.W);return function(){return clearInterval(r)}}}),[B]),d?(0,h.jsx)(o.LQ,{color:"info"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.KF,{ref:g,push:f,placement:"top-end"}),(0,h.jsxs)(o.lx,{ref:y,onSubmit:function(e){e.preventDefault(),q!==F||G?function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,s,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={symbol:B,mode:H.current.value,side:V.current.value,leverage:A.current.value,type:q,amount:ne,price:G,tp:pe.current.value,sl:fe.current.value,tpslPercentType:1},q!==F||!n.tp&&!n.sl){e.next=11;break}return(s=[]).push([G,ne]),i={symbol:B,mode:H.current.value,direction:V.current.value,leverage:A.current.value,repeatTime:1,sizeUnit:"USD",levels:[].concat(s),takeProfit:{trigger:"mark",type:"market",tpType:"%",value:pe.current.value,percentType:1},stopLoss:{trigger:"last",type:"limit",slType:"%",value:fe.current.value,percentType:1}},console.log("gridOrder",i),e.next=8,c.ZP.placeGridOrder(i,r);case 8:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,c.ZP.placeNewOrder(n,r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){b((0,j.Z)("PLACE ORDER",JSON.stringify(e))),n()})):b((0,j.Z)("Type: Limit","Price should be set (larger than zero)"))},children:[(0,h.jsx)(o.p0,{children:(0,h.jsx)(o.fl,{children:"New Order"})}),(0,h.jsx)(o.sD,{children:(0,h.jsxs)(o.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,h.jsxs)(o.b7,{xs:10,lg:4,children:[(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,h.jsx)(o.LX,{id:"inputSymbol",onChange:function(e){_(e.target.value),W(""),re("")},value:B,children:Z.map((function(e,n){return(0,h.jsx)("option",{children:e},n)}))})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,h.jsxs)(o.LX,{ref:H,id:"inputMode",defaultValue:C,children:[(0,h.jsx)("option",{children:P}),(0,h.jsx)("option",{children:w})]})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,h.jsx)(o.jO,{ref:A,type:"number","aria-label":"profit target",className:"col-4",defaultValue:"5",id:"inputLeverage"}),(0,h.jsx)(o.wV,{component:"label",children:"x"})]}),(0,h.jsxs)(o.e_,{color:"primary",children:[(0,h.jsx)("div",{children:"Available Balance"}),(0,h.jsx)("div",{className:"text-primary",children:"".concat(I," USDT")})]})]}),(0,h.jsxs)(o.b7,{xs:10,lg:7,children:[(0,h.jsxs)(o.rb,{children:[(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.C_,{color:"info",children:["Mark Price:"," ",Number(ie).toFixed(xe)]})}),(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.C_,{color:"warning",children:["Last Price:"," ",Number(oe).toFixed(xe)]})})]}),(0,h.jsxs)(o.YR,{className:"mt-1 mb-2 md-col-4",children:[(0,h.jsx)(o.b7,{xs:12,lg:6,className:"mr-2",children:(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,h.jsxs)(o.LX,{id:"inputSide",ref:V,defaultValue:L,children:[(0,h.jsx)("option",{children:"Long"}),(0,h.jsx)("option",{children:k})]})]})}),(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Type"}),(0,h.jsxs)(o.LX,{id:"inputType",value:q,onChange:function(e){X(e.target.value)},children:[(0,h.jsx)("option",{children:F}),(0,h.jsx)("option",{children:T})]})]})}),(0,h.jsxs)(o.YR,{className:"mb-0",size:"md",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"price",children:"Price"}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",defaultValue:"",id:"price",onChange:function(e){W(Number(e.target.value))},disabled:q===T}),(0,h.jsx)(o.wV,{component:"label",htmlFor:"amout",children:"Amount"}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",defaultValue:"",id:"amount",onChange:function(e){re(Number(e.target.value))}})]})]}),(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,h.jsx)(o.jO,{ref:pe,type:"number",placeholder:"","aria-label":"Take Profit",defaultValue:"",id:"inputTP"}),(0,h.jsx)(o.wV,{component:"label",children:"% marg."})]})}),(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,h.jsx)(o.jO,{ref:fe,type:"number",placeholder:"","aria-label":"stoploss percent",defaultValue:"",id:"inputSL"}),(0,h.jsx)(o.wV,{component:"label",children:"% marg."})]})})]})]})]})}),(0,h.jsxs)(o.Ym,{children:[(0,h.jsx)(o.u5,{color:"secondary",onClick:function(){return n()},children:"Close"}),(0,h.jsx)(o.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},V=r(93433),z="USD",M="%",I=z,Y="Isolated",A="Crossed",H=Y,E="Short",D=E,B=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,e.exchange),s=(0,a.useState)(!0),u=(0,l.Z)(s,2),d=u[0],m=u[1],x=(0,a.useState)(0),p=(0,l.Z)(x,2),f=p[0],b=p[1],g=(0,a.useRef)(),y=(0,a.useRef)(null),N=(0,a.useState)([]),S=(0,l.Z)(N,2),Z=S[0],P=S[1],w=(0,a.useRef)(D),C=((0,a.useRef)("30"),(0,a.useRef)("5")),k=(0,a.useRef)(H),L=(0,a.useState)(),T=(0,l.Z)(L,2),F=T[0],R=T[1],O=(0,a.useState)("BTCUSDT"),B=(0,l.Z)(O,2),_=B[0],K=B[1],U=(0,a.useState)(),q=(0,l.Z)(U,2),X=q[0],$=q[1],Q=(0,a.useState)(1),G=(0,l.Z)(Q,2),W=G[0],J=G[1],ee=(0,a.useState)(5),ne=(0,l.Z)(ee,2),re=ne[0],te=ne[1],se=(0,a.useState)(I),ie=(0,l.Z)(se,2),le=ie[0],ae=ie[1],ce=(0,a.useState)(Array(5)),oe=(0,l.Z)(ce,2),ue=oe[0],de=oe[1],me=(0,a.useState)(Array(5)),xe=(0,l.Z)(me,2),he=xe[0],pe=xe[1],fe=(0,a.useState)(Array(5)),je=(0,l.Z)(fe,2),be=je[0],ve=je[1],ge=(0,a.useState)(null),ye=(0,l.Z)(ge,2),Ne=ye[0],Se=ye[1],Ze=(0,a.useState)(null),Pe=(0,l.Z)(Ze,2),we=Pe[0],Ce=Pe[1],ke=(0,a.useState)("---"),Le=(0,l.Z)(ke,2),Te=Le[0],Fe=Le[1],Re=(0,a.useState)("---"),Oe=(0,l.Z)(Re,2),Ve=Oe[0],ze=Oe[1],Me=(0,a.useState)(0),Ie=(0,l.Z)(Me,2),Ye=Ie[0],Ae=Ie[1],He=(0,a.useState)("--"),Ee=(0,l.Z)(He,2),De=Ee[0],Be=Ee[1],_e=(0,a.useState)("--"),Ke=(0,l.Z)(_e,2),Ue=Ke[0],qe=Ke[1],Xe=(0,a.useState)(M),$e=(0,l.Z)(Xe,2),Qe=$e[0],Ge=$e[1],We=(0,a.useRef)(null),Je=(0,a.useState)(M),en=(0,l.Z)(Je,2),nn=en[0],rn=en[1],tn=(0,a.useRef)(null),sn=(0,a.useState)(),ln=(0,l.Z)(sn,2),an=ln[0],cn=ln[1];function on(e,n){if(Number.isInteger(e))return e;var r=parseFloat(e).toFixed(16),t=Math.max(n.indexOf("1")-1,0),s=r.indexOf(".");return parseFloat(r.slice(0,s+t+1))}function un(e,n){if(e>0&&n>0&&X.stepSize){var r=on(n,X.stepSize),t=(r*e).toFixed(Ye);return"~".concat(r,"/").concat(t,"$")}}function dn(e){var n=Number(e.target.id.replace("price",""));de((function(r){var t=(0,V.Z)(r);return t[n]=Number(e.target.value),t}))}function mn(e){var n=Number(e.target.id.replace("amount",""));pe((function(r){var t=(0,V.Z)(r);return t[n]=Number(e.target.value),t}))}return(0,a.useEffect)((function(){!function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolList();case 2:n=e.sent,r=n.symbols.sort(),P(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.fetchAccountInfo();case 2:n=e.sent,r=n.accounts[0],R(Number(r.availableBalance).toFixed(2));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),(0,a.useEffect)((function(){function e(){(0,i.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolMarketInfo(_);case 2:n=e.sent,r=n.symbolMarketInfo,Fe(r.markPrice),ze(r.lastPrice),Ae(r.pricePrecision<100?r.pricePrecision:0);case 7:case"end":return e.stop()}}),e)})))()}var n;if(e(),n=_,function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var r,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getSymbolInfo(n);case 2:r=e.sent,s=r.symbolInfo,k.current.value=!0===s.isolated?Y:A,C.current.value=s.leverage,$(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),m(!1),_){var r=setInterval(e,v.W);return cn(r),function(){return clearInterval(r)}}}),[_]),(0,a.useEffect)((function(){if(X){var e=X.minQty;Ve*e<X.minNotional&&(e=X.minNotional/Ve),(e=on(e,X.stepSize))*Ve<X.minNotional&&(e+=parseFloat(X.stepSize)),Be(e*Ve),qe(e)}}),[Ve,X]),(0,a.useEffect)((function(){var e,n=0,r=0,t=0,s=ue.slice(0,re),i=[];s.forEach((function(e,s){var l=he[s];if(e>0&&l>0){var a=l;if(le===z)a=on(l/e,X.stepSize);i[s]=a,r+=a*e,n+=a,t+=a*e}})),r=r.toFixed(Ye),e=(t/n).toFixed(Ye),ve((function(e){return[].concat(i)})),Ce(e),Se(r)}),[ue,he,re]),d?(0,h.jsx)(o.LQ,{color:"info"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.KF,{ref:g,push:f,placement:"top-end"}),(0,h.jsxs)(o.lx,{ref:y,onSubmit:function(e){e.preventDefault(),clearInterval(an),function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],ue.slice(0,re).forEach((function(e,r){var t=he[r],s=be[r];e>0&&t>0&&n.push([e,t,s])})),s={symbol:_,mode:k.current.value,direction:w.current.value,leverage:C.current.value,repeatTime:W,sizeUnit:le,levels:[].concat(n),takeProfit:{trigger:"mark",type:"market",tpType:Qe,value:We.current.value,percentType:1},stopLoss:{trigger:"last",type:"limit",slType:nn,value:tn.current.value,percentType:1}},e.next=6,c.ZP.placeGridOrder(s,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){b((0,j.Z)("PLACE ORDER",JSON.stringify(e))),n()}))},children:[(0,h.jsx)(o.p0,{children:(0,h.jsx)(o.fl,{children:"New Multi-Level Order"})}),(0,h.jsx)(o.sD,{children:(0,h.jsxs)(o.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,h.jsxs)(o.b7,{xs:12,lg:4,children:[(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,h.jsx)(o.LX,{id:"inputSymbol",onChange:function(e){K(e.target.value),te(5),de(new Array(5)),pe(new Array(5))},value:_,children:Z.map((function(e,n){return(0,h.jsx)("option",{children:e},n)}))})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,h.jsxs)(o.LX,{ref:k,id:"inputMode",defaultValue:H,children:[(0,h.jsx)("option",{children:Y}),(0,h.jsx)("option",{children:A})]})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,h.jsx)(o.jO,{ref:C,type:"number","aria-label":"profit target",className:"col-4",defaultValue:"5",id:"inputLeverage"}),(0,h.jsx)(o.wV,{component:"label",children:"x"})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,h.jsxs)(o.LX,{id:"inputSide",ref:w,defaultValue:D,children:[(0,h.jsx)("option",{children:"Long"}),(0,h.jsx)("option",{children:E})]})]}),(0,h.jsxs)(o.e_,{color:"primary",children:[(0,h.jsx)("div",{children:"Available Balance"}),(0,h.jsx)("div",{className:"text-primary",children:"".concat(F," USDT")})]})]}),(0,h.jsxs)(o.b7,{xs:12,lg:8,children:[(0,h.jsxs)("div",{className:"d-flex flex-wrap justify-content-between",children:[(0,h.jsx)("div",{xs:4,children:(0,h.jsxs)(o.C_,{color:"info",children:["Mark Price:"," ",Number(Te).toFixed(Ye)]})}),(0,h.jsx)("div",{xs:4,children:(0,h.jsxs)(o.C_,{color:"warning",children:["Last Price:"," ",Number(Ve).toFixed(Ye)]})}),(0,h.jsxs)("div",{xs:4,children:[(0,h.jsx)(o.kV,{label:le,id:"sizeUnit",defaultChecked:!0,onClick:function(e){var n=le;"on"===e.target.value?e.target.value="off":e.target.value="on",ae("on"===e.target.value?z:"COIN");var r=(0,V.Z)(he);he.forEach((function(e,t){ue[t]>0&&e>0&&(r[t]=n===z?e/ue[t]:e*ue[t])})),pe((function(){return r}))}}),(0,h.jsx)(o.L8,{children:"Min. ".concat(Ue,"/").concat(Number(De).toFixed(Ye),"$")})]})]}),(0,h.jsxs)(o.YR,{className:"mt-1 mb-2 md-col-4",children:[(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.YR,{className:"mb-0",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputLevels",children:"Repeat"}),(0,h.jsx)(o.jO,{type:"number",placeholder:W,"aria-label":"",value:W,id:"reapeatTime",onChange:function(e){J(e.target.value)}})]})}),(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.YR,{className:"mb-0",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputLevels",children:"Levels"}),(0,h.jsx)(o.jO,{type:"number",placeholder:re,"aria-label":"",value:re,id:"inputLevels",onChange:function(e){te(e.target.value)}})]})})]}),!!re&&he&&Array.from({length:re}).map((function(e,n){return(0,h.jsxs)(o.YR,{className:"mb-0",size:"sm",children:[(0,h.jsxs)(o.wV,{component:"label",htmlFor:"price"+n,children:["Price ",n+1]}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",defaultValue:"",id:"price"+n,onChange:dn}),(0,h.jsxs)(o.wV,{component:"label",htmlFor:"amout"+n,children:["Size ",n+1]}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",id:"amount"+n,onChange:mn,value:he[n]}),(0,h.jsx)(o.wV,{className:"text-info",component:"label",htmlFor:"price"+n,children:un(ue[n],be[n])})]},n)}))]}),(0,h.jsxs)(o.rb,{children:[(0,h.jsx)(o.b7,{xs:6,md:4,children:(0,h.jsxs)(o.C_,{color:"danger",children:["Avg Price: ",we,"$"]})}),(0,h.jsx)(o.b7,{xs:6,md:4,children:(0,h.jsxs)(o.C_,{color:"warning",children:["Total Size: ",Ne,"$"]})}),(0,h.jsx)(o.b7,{xs:6,md:4,children:(0,h.jsxs)(o.C_,{color:"warning",children:["Balance:"," ",(Ne/C.current.value).toFixed(2),"$"]})})]}),(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{xs:12,md:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,h.jsx)(o.jO,{ref:We,type:"number",placeholder:"","aria-label":"Take Profit",defaultValue:"",id:"inputTP"}),(0,h.jsx)(o.u5,{onClick:function(){return Ge(Qe===M?"$":M)},children:Qe})]})}),(0,h.jsx)(o.b7,{xs:12,md:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,h.jsx)(o.jO,{ref:tn,type:"number",placeholder:"","aria-label":"stoploss percent",defaultValue:"",id:"inputSL"}),(0,h.jsx)(o.u5,{onClick:function(){return rn(nn===M?"$":M)},children:nn})]})})]})]})]})}),(0,h.jsxs)(o.Ym,{children:[(0,h.jsx)(o.u5,{color:"secondary",onClick:function(){return n()},children:"Close"}),(0,h.jsx)(o.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},_=r(763),K=r.n(_),U=function(e){var n=e.orderHeader,r=e.orderValue,t=K().size(n),s=r[0],i=r[1];return(0,h.jsx)(o.b7,{xs:12,md:6,xl:4,children:(0,h.jsxs)(o.xH,{className:"mx-1 mb-2",color:"secondary",textColor:"white",children:[(0,h.jsx)(o.bn,{children:(0,h.jsxs)("div",{className:"d-flex d-flex-row justify-content-between align-items-center",children:[(0,h.jsx)(d.Z,{symbol:s}),(0,h.jsx)("div",{className:"mx-2",style:{fontSize:"smaller"},children:i})]})}),(0,h.jsx)(o.sl,{children:(0,h.jsx)(o.Sx,{striped:!0,hover:!0,responsive:!0,color:"light",className:"smaller-text mt-2",style:{width:"100%"},children:(0,h.jsx)(o.NR,{style:{overflowY:"auto"},children:n.slice(2,t).map((function(e,n){return(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{children:e}),(0,h.jsx)(o.NN,{children:r[n+2]})]},n)}))})})})]})})},q=function(e){var n=e.openOrders,r=["Contract","Created At","Side","Trigger Price","Order Price","Qty (USDT)","Remarks"],t=[];return n.forEach((function(e){var n=e.initial,r=e.trigger,s=e.orderType,i=e.createTime,l=[],a=x()(1e3*i).format("DD/MM HH:mm:ss"),c="".concat(s," / ").concat(1===r.rule&&("close-short-order"===s||"close-short-position"===s)||2===r.rule&&("close-long-order"===s||"close-long-position"===s)?"Stop Loss":"Take Profit"),o=0===r.priceType?1===r.rule?"Last Price >= ".concat(r.price):"Last Price <= ".concat(r.price):"???",u=0===Number(n.price)?"Market":"???",d=0===n.size?"Cross":"".concat(Math.abs(n.size*Number(e.quantoMultiplier)*r.price).toFixed(4)),m=!0===n.isReduceOnly?"Reduce-Only":"???";l.push(n.contract),l.push(a),l.push(c),l.push(o),l.push(u),l.push(d),l.push(m),t.push(l)})),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.rb,{children:(0,h.jsx)(o.b7,{xl:12,children:(0,h.jsxs)(o.xH,{className:"mb-4",children:[(0,h.jsxs)(o.bn,{children:["Trigger Orders (",n.length,")"]}),(0,h.jsx)(o.sl,{children:n.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:"orders-card",className:"d-flex flex-wrap",children:t.map((function(e,n){return(0,h.jsx)(U,{orderHeader:r,orderValue:e})}))}),(0,h.jsxs)(o.Sx,{id:"orders-table",children:[(0,h.jsx)(o.V,{children:(0,h.jsx)("tr",{children:r.map((function(e,n){return(0,h.jsx)("th",{children:e},n)}))})}),(0,h.jsx)(o.NR,{children:t.map((function(e,n){return(0,h.jsx)("tr",{index:n,children:e.map((function(e,n){return(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"h6",children:e})})}))})}))})]})]})})]})})})})},X=function(){var e=(0,a.useState)(0),n=(0,l.Z)(e,2),r=n[0],d=n[1],m=(0,a.useRef)(),x=(0,b.UY)(),p=(x.loading,x.symbolList,x.symbolListGateIO,x.symbolListByBit,x.curExchange),g=(x.curSymbol,x.userOrderParam,x.setOrderInfo),y=(0,a.useState)(null),N=(0,l.Z)(y,2),S=N[0],P=N[1],w=(0,a.useState)(null),C=(0,l.Z)(w,2),k=C[0],L=C[1],T=(0,a.useState)(null),F=(0,l.Z)(T,2),R=F[0],V=F[1],z=(0,a.useState)(null),M=(0,l.Z)(z,2),I=M[0],Y=M[1],A=(0,a.useState)(!1),H=(0,l.Z)(A,2),E=H[0],D=H[1],_=(0,a.useState)(!1),U=(0,l.Z)(_,2),X=U[0],$=U[1],Q=(0,a.useState)(!1),G=(0,l.Z)(Q,2),W=G[0],J=G[1];function ee(e){e!==p&&(d(null),V(null),L(null),Y(null),g(b.oK,e))}function ne(e){return re.apply(this,arguments)}function re(){return re=(0,i.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.getPositions(n);case 2:return r=e.sent,L(se(n,r.positions)),V(ie(n,r.openOrders)),Y(r.priceTriggerOrders),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function te(e,n){return e.symbol<n.symbol?-1:e.symbol>n.symbol?1:0}function se(e,n){var r=n;return e===c.KM&&r.forEach((function(e){e.size=e.positionAmt*e.entryPrice,e.marginSize=Number(e.isolatedWallet).toFixed(2),e.entryPrice=Number(e.entryPrice).toFixed(e.pricePrecision),e.markPrice=Number(e.markPrice).toFixed(e.pricePrecision),e.lastPrice=Number(e.lastPrice).toFixed(e.pricePrecision),e.liquidationPrice=Number(e.liquidationPrice).toFixed(e.pricePrecision)})),e===c.Tc&&(r=K().map(r,(function(e){var n=(0,s.Z)({},e);return n.symbol=e.contract,n.positionAmt=e.size,n.size=e.size>0?e.value:-e.value,n.liquidationPrice=e.liqPrice,n.lastPrice=e.lastPrice,n.marginSize=e.margin,n}))),r.sort(te)}function ie(e,n){var r=n;return e===c.KM&&r.forEach((function(e){e.price="0"===e.price?e.stopPrice:e.price,e.price=Number(e.price).toFixed(e.pricePrecision),e.time=e.updateTime})),e===c.Tc&&r.forEach((function(e){e.time=1e3*e.createTime,e.symbol=e.contract,e.type=0!==Number(e.price)?"LIMIT":"MARKET",e.side=e.size<0?"SHORT":"LONG",e.origQty=e.size*e.quantoMultiplier,e.reduceOnly=e.isReduceOnly})),r}return(0,a.useEffect)((function(){P(null),ne(p).then((function(e){return P(e)}));var e=setInterval((function(){ne(p).then((function(e){return P(e)}))}),v.W);return function(){return clearInterval(e)}}),[p]),S?!1===S.success?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h1",{children:"Manual Trade"}),(0,h.jsx)("p",{children:S.message})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.KF,{ref:m,push:r,placement:"top-end"}),(0,h.jsx)(o.rb,{children:(0,h.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-4",children:[(0,h.jsxs)(o.Z0,{role:"group",className:"mt-2 mb-4",children:[(0,h.jsx)(o.EC,{type:"radio",button:{color:"primary",variant:"outline"},name:"vbtnradio",id:"vbtnradio0",autoComplete:"off",label:"Binance",defaultChecked:p===c.KM,onClick:function(){return ee(c.KM)}}),(0,h.jsx)(o.EC,{type:"radio",button:{color:"primary",variant:"outline"},name:"vbtnradio",id:"vbtnradio1",autoComplete:"off",label:"GateIO",defaultChecked:p===c.Tc,onClick:function(){return ee(c.Tc)}}),(0,h.jsx)(o.EC,{type:"radio",button:{color:"primary",variant:"outline"},name:"vbtnradio",id:"vbtnradio2",autoComplete:"off",label:"ByBit",defaultChecked:p===c.B$,onClick:function(){return ee(c.B$)}})]}),(0,h.jsxs)("div",{className:"d-inline-flex justify-content-between align-items-center",children:[(0,h.jsx)("button",{onClick:function(){D(!0)},className:"btn btn-warning mx-2",children:"Order w. Param"}),(0,h.jsx)(o.Tk,{size:"lg",alignment:"center",visible:E,onClose:function(){return D(!1)},children:(0,h.jsx)(Z,{exchange:p,onCloseHandler:function(e){console.log("OrderWithParam",e),D(!1),d((0,j.Z)("PLACE ORDER",e.message))}})}),(0,h.jsx)("button",{onClick:function(e){$(!0)},className:"btn btn-warning mx-2",children:"New Order"}),(0,h.jsx)(o.Tk,{size:"lg",alignment:"center",visible:X,onClose:function(){return $(!1)},children:(0,h.jsx)(O,{onCloseHandler:function(){return $(!1)},exchange:p})}),(0,h.jsx)("button",{onClick:function(e){J(!0)},className:"btn btn-warning mx-2",children:"New Multi-Level Order"}),(0,h.jsx)(o.Tk,{size:"lg",alignment:"center",visible:W,onClose:function(){return J(!1)},children:(0,h.jsx)(B,{onCloseHandler:function(){return J(!1)},exchange:p})})]})]})}),Array.isArray(k)&&(0,h.jsx)(u.Z,{exchange:p,positions:k,isClose:!0}),Array.isArray(R)&&(0,h.jsx)(f,{openOrders:R,exchange:p}),p===c.Tc&&!K().isEmpty(I)&&(0,h.jsx)(q,{openOrders:I})]}):(0,h.jsx)(o.LQ,{color:"info"})}},40337:function(e,n,r){r.d(n,{Z:function(){return f}});var t=r(74165),s=r(15861),i=r(29439),l=r(72791),a=(r(71047),r(55230)),c=r(81694),o=r.n(c),u=r(78983),d=r(80184),m=function(e){var n=e.position,r=e.index,t=e.isClose,s=e.closeHandler,a=e.closeLimitHandler,c=e.supCloseLimit,m=(0,l.useState)(""),x=(0,i.Z)(m,2),h=x[0],p=x[1];var f=n.positionAmt>0?"info":"danger",j=n.pnl>0?"success":"danger";return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(u.T6,{className:"",children:[(0,d.jsxs)(u.NN,{className:"align-middle",children:[(0,d.jsx)(u.C_,{color:f,children:n.symbol}),(0,d.jsx)("span",{children:(0,d.jsxs)(u.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})})]}),(0,d.jsx)(u.NN,{className:o()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.entryPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.markPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-warning",children:n.liquidationPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-info",children:n.lastPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.marginSize}),(0,d.jsxs)(u.NN,{className:o()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]}),t&&(0,d.jsx)(u.NN,{className:"align-middle",children:(0,d.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,d.jsx)(u.u5,{color:j,variant:"ghost",value:n,onClick:function(e){s(n)},size:"sm",children:"Market"}),c&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"vr align-middle"}),(0,d.jsx)(u.u5,{color:j,variant:"ghost",value:n,onClick:function(e){a(n,h),p("")},size:"sm",children:"Limit"}),(0,d.jsx)("div",{className:"col-4",children:(0,d.jsx)(u.jO,{type:"number",size:"sm",placeholder:"price",value:h,id:"limit-price",onChange:function(e){return p(e.target.value)}})})]})]})})]},r)})},x=r(94743),h=function(e){var n=e.position,r=(e.index,e.isClose),t=e.closeHandler,s=e.closeLimitHandler,a=e.supCloseLimit,c=(0,l.useState)(""),m=(0,i.Z)(c,2),h=m[0],p=m[1];n.positionAmt;var f=n.pnl>0?"success":"danger";return(0,d.jsx)(u.b7,{xs:12,md:6,xl:4,children:(0,d.jsxs)(u.xH,{className:"mx-1 mb-2",children:[(0,d.jsx)(u.bn,{children:(0,d.jsxs)("div",{className:"d-flex d-flex-row justify-content-between align-items-center",children:[(0,d.jsx)(x.Z,{symbol:n.symbol}),(0,d.jsxs)(u.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})]})}),(0,d.jsxs)(u.sl,{children:[(0,d.jsx)(u.Sx,{striped:!0,hover:!0,responsive:!0,color:"light",className:"smaller-text mt-2",style:{width:"100%"},children:(0,d.jsxs)(u.NR,{style:{overflowY:"auto"},children:[(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"Size"}),(0,d.jsx)(u.NN,{className:o()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size})]}),(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"Entry Price"}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.entryPrice})]}),(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"Mark Price"}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.markPrice})]}),(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"Liquid Price"}),(0,d.jsx)(u.NN,{className:"align-middle text-warning",children:n.liquidationPrice})]}),(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"Last Price"}),(0,d.jsx)(u.NN,{className:"align-middle text-info",children:n.lastPrice})]}),(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"Margin Size"}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.marginSize})]}),(0,d.jsxs)(u.T6,{children:[(0,d.jsx)(u.is,{children:"PNL (%)"}),(0,d.jsxs)(u.NN,{className:o()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]})]})]})}),r&&(0,d.jsxs)("div",{className:"d-flex align-items-center",children:[(0,d.jsx)("div",{children:"Close"}),(0,d.jsx)("div",{className:"align-middle",children:(0,d.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){t(n)},size:"sm",children:"Market"}),a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"vr align-middle"}),(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){s(n,h),p("")},size:"sm",children:"Limit"}),(0,d.jsx)("div",{className:"col-4",children:(0,d.jsx)(u.jO,{type:"number",size:"sm",placeholder:"price",value:h,id:"limit-price",onChange:function(e){return p(e.target.value)}})})]})]})})]})]})]})})},p=r(23131),f=function(e){var n=e.positions,r=e.isClose,c=e.exchange,o=(0,l.useState)(0),x=(0,i.Z)(o,2),f=x[0],j=x[1],b=(0,l.useRef)();function v(e,n,r){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)((0,t.Z)().mark((function e(n,r,s){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.closePosition(n,r,s,c);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){v(e,"market",0).then((function(e){j((0,p.Z)("Close Position",e.message))}))}function N(e,n){var r=e.markPrice-50*e.markPrice/100,t=1.5*e.markPrice;n>=r&&n<=t?v(e,"limit",n).then((function(e){j((0,p.Z)("Close Position",e.message))})):j((0,p.Z)("Close Position","price should be larger or smaller than mark price maximum of 50%"))}function S(){!function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.clearPositions();case 2:return n=e.sent,j((0,p.Z)("Close All Positions","".concat(n.msg))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}var Z=n.map((function(e,n){var r=e.symbol,t=e.entryPrice,s=e.unRealizedProfit,i=e.positionAmt,l=e.markPrice,a=e.liquidationPrice,c=e.lastPrice,o=e.leverage,u=(e.pricePrecision,e.size),d=e.marginSize,m=100*s/(Math.abs(u)/o);return{symbol:r,positionAmt:i,size:Number(u).toFixed(2),entryPrice:t,markPrice:l,lastPrice:c,liquidationPrice:a,marginSize:Number(d).toFixed(2),pnl:Number(s).toFixed(2),roe:Number(m).toFixed(2),leverage:o}})),P=["Symbol","Size","Entry Price","Mark Price","Liq. Price","Last Price","Margin","PNL (ROI%)"];return r&&(c===a.KM?P.push("Close All Positions"):P.push("Close Position")),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.rb,{children:(0,d.jsx)(u.b7,{children:(0,d.jsxs)(u.xH,{className:"mb-4",children:[(0,d.jsxs)(u.bn,{children:["Positions (",Z.length,")"]}),(0,d.jsx)(u.sl,{children:Z.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{id:"positions-card",className:"d-flex flex-wrap",children:Z.map((function(e,n){return(0,d.jsx)(h,{position:e,isClose:r,closeHandler:y,closeLimitHandler:N},n)}))}),(0,d.jsxs)(u.Sx,{id:"positions-table",children:[(0,d.jsx)(u.V,{className:"",children:(0,d.jsx)(u.T6,{children:P.map((function(e,n){return"Close All Positions"===e?(0,d.jsx)(u.is,{children:(0,d.jsx)("div",{children:(0,d.jsx)(u.If,{content:"close all positions as market price",placement:"top",children:(0,d.jsx)(u.u5,{variant:"ghost",color:"warning",onClick:S,children:e})})})},n):(0,d.jsx)(u.is,{children:e},n)}))})}),(0,d.jsx)(u.NR,{children:Z.map((function(e,n){return(0,d.jsx)(m,{position:e,isClose:r,closeHandler:y,closeLimitHandler:N,supCloseLimit:c===a.KM},n)}))})]})]})})]})})}),(0,d.jsx)(u.KF,{ref:b,push:f,placement:"top-end"})]})}},78392:function(e,n,r){r.d(n,{W:function(){return t}});var t=2500}}]);
//# sourceMappingURL=422.e88f8421.chunk.js.map
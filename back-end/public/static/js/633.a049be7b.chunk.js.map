{"version":3,"file":"static/js/633.a049be7b.chunk.js","mappings":"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","sources":["components/Data/Symbol.js","components/Toast.js","components/Trade/Position.js","components/Trade/PositionCard.js","pages/Manual/Positions.js","pages/TradeInfo.js"],"sourcesContent":["import { CButton, CBadge } from \"@coreui/react\";\n\nconst Symbol = (props) => {\n  const binanceUrl = `https://www.binance.com/en/futures/${props.symbol}`;\n  //\n  const openInNewTab = (url) => {\n    const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\");\n    if (newWindow) newWindow.opener = null;\n  };\n  //\n  return (\n    <>\n      <CBadge\n        style={{ display: \"flex\", alignItems: \"center\" }}\n        className=\"custom-link\"\n        color=\"warning\"\n        onClick={() => openInNewTab(binanceUrl)}\n      >\n        {props.symbol}\n      </CBadge>\n    </>\n  );\n};\n\nexport default Symbol;\n","import React from \"react\";\nimport { CToast, CToastHeader, CToastBody } from \"@coreui/react\";\n\nconst Toast = (header, body) => {\n  return (\n    <CToast color=\"secondary\">\n      <div>\n        <CToastHeader closeButton>\n          {/* <svg\n            className=\"rounded me-2\"\n            width=\"20\"\n            height=\"20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            preserveAspectRatio=\"xMidYMid slice\"\n            focusable=\"false\"\n            role=\"img\"\n          >\n            <rect width=\"100%\" height=\"100%\" fill=\"#007aff\"></rect>\n          </svg> */}\n          <div className=\"fw-bold me-auto\">{header}</div>\n        </CToastHeader>\n        <CToastBody>{body}</CToastBody>\n      </div>\n    </CToast>\n  );\n};\n\nexport default Toast;\n","import React, { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport classNames from \"classnames\";\nimport {\n  CBadge,\n  CButton,\n  CTableRow,\n  CTableDataCell,\n  CInputGroup,\n  CFormInput,\n  CCol,\n} from \"@coreui/react\";\n\nconst Position = ({\n  position,\n  index,\n  isClose,\n  closeHandler,\n  closeLimitHandler,\n  supCloseLimit,\n}) => {\n  const [limitPrice, $limitPrice] = useState(\"\");\n  // useEffect(() => {\n  //   console.log(position.markPrice);\n  // }, [position.markPrice]);\n  function closePositionHandler(e) {\n    closeHandler(position);\n  }\n  function closePositionAsLimitHandler(e) {\n    closeLimitHandler(position, limitPrice);\n    $limitPrice(\"\");\n  }\n  // console.log(\"position\", position);\n  let color = position.positionAmt > 0 ? \"info\" : \"danger\";\n  let closeColor = position.pnl > 0 ? \"success\" : \"danger\";\n  return (\n    <>\n      <CTableRow key={index} className=\"\">\n        <CTableDataCell className=\"align-middle\">\n          <CBadge color={color}>{position.symbol}</CBadge>\n          <span>\n            <CButton variant=\"ghost\" color=\"warning\" size=\"sm\">\n              {position.leverage}x\n            </CButton>\n          </span>\n        </CTableDataCell>\n        <CTableDataCell\n          // color={color}\n          className={classNames({\n            \"text-info\": position.size > 0,\n            \"text-danger\": position.size < 0,\n            \"align-middle\": true,\n          })}\n        >\n          {position.size}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle\">\n          {position.entryPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle\">\n          {position.markPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle text-warning\">\n          {position.liquidationPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle text-info\">\n          {position.lastPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle\">\n          {position.marginSize}\n        </CTableDataCell>\n        <CTableDataCell\n          className={classNames({\n            \"text-success\": position.pnl > 0,\n            \"text-danger\": position.pnl < 0,\n            \"align-middle\": true,\n          })}\n        >\n          {position.pnl} ({position.roe}%)\n        </CTableDataCell>\n        {isClose && (\n          <CTableDataCell className=\"align-middle\">\n            <div className=\"d-inline-flex justify-content-start align-items-center align-self-center flex-fill\">\n              <CButton\n                color={closeColor}\n                variant=\"ghost\"\n                value={position}\n                onClick={closePositionHandler}\n                size=\"sm\"\n              >\n                Market\n              </CButton>\n              {supCloseLimit && (\n                <>\n                  <div className=\"vr align-middle\" />\n                  <CButton\n                    color={closeColor}\n                    variant=\"ghost\"\n                    value={position}\n                    onClick={closePositionAsLimitHandler}\n                    size=\"sm\"\n                  >\n                    Limit\n                  </CButton>\n                  <div className=\"col-4\">\n                    <CFormInput\n                      type=\"number\"\n                      size=\"sm\"\n                      placeholder=\"price\"\n                      value={limitPrice}\n                      id=\"limit-price\"\n                      onChange={(e) => $limitPrice(e.target.value)}\n                      // className=\"col-5\"\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </CTableDataCell>\n        )}\n      </CTableRow>\n    </>\n  );\n};\n\nexport default Position;\n","import React from \"react\";\nimport { useState } from \"react\";\nimport classNames from \"classnames\";\nimport {\n  CBadge,\n  CButton,\n  CTableRow,\n  CTableDataCell,\n  CFormInput,\n  CRow,\n  CCol,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CTable,\n  CTableBody,\n  CTableHeaderCell,\n} from \"@coreui/react\";\nimport Symbol from \"../Data/Symbol\";\n\nconst PositionCard = ({\n  position,\n  index,\n  isClose,\n  closeHandler,\n  closeLimitHandler,\n  supCloseLimit,\n}) => {\n  const [limitPrice, $limitPrice] = useState(\"\");\n  function closePositionHandler(e) {\n    closeHandler(position);\n  }\n  function closePositionAsLimitHandler(e) {\n    closeLimitHandler(position, limitPrice);\n    $limitPrice(\"\");\n  }\n  let color = position.positionAmt > 0 ? \"info\" : \"danger\";\n  let closeColor = position.pnl > 0 ? \"success\" : \"danger\";\n  return (\n    <CCol xs={12} md={6} xl={4}>\n      <CCard className=\"mx-1 mb-2\">\n        <CCardHeader>\n          <div className=\"d-flex d-flex-row justify-content-between align-items-center\">\n            <Symbol symbol={position.symbol} />\n\n            <CButton variant=\"ghost\" color=\"warning\" size=\"sm\">\n              {position.leverage}x\n            </CButton>\n          </div>\n        </CCardHeader>\n        <CCardBody>\n          <CTable\n            striped\n            hover\n            responsive\n            color=\"light\"\n            className=\"smaller-text mt-2\"\n            style={{ width: \"100%\" }}\n          >\n            <CTableBody style={{ overflowY: \"auto\" }}>\n              <CTableRow>\n                <CTableHeaderCell>Size</CTableHeaderCell>\n                <CTableDataCell\n                  // color={color}\n                  className={classNames({\n                    \"text-info\": position.size > 0,\n                    \"text-danger\": position.size < 0,\n                    \"align-middle\": true,\n                  })}\n                >\n                  {position.size}\n                </CTableDataCell>\n              </CTableRow>\n              <CTableRow>\n                <CTableHeaderCell>Entry Price</CTableHeaderCell>\n                <CTableDataCell className=\"align-middle\">\n                  {position.entryPrice}\n                </CTableDataCell>\n              </CTableRow>\n              <CTableRow>\n                <CTableHeaderCell>Mark Price</CTableHeaderCell>\n                <CTableDataCell className=\"align-middle\">\n                  {position.markPrice}\n                </CTableDataCell>\n              </CTableRow>\n              <CTableRow>\n                <CTableHeaderCell>Liquid Price</CTableHeaderCell>\n                <CTableDataCell className=\"align-middle text-warning\">\n                  {position.liquidationPrice}\n                </CTableDataCell>\n              </CTableRow>\n              <CTableRow>\n                <CTableHeaderCell>Last Price</CTableHeaderCell>\n                <CTableDataCell className=\"align-middle text-info\">\n                  {position.lastPrice}\n                </CTableDataCell>\n              </CTableRow>\n              <CTableRow>\n                <CTableHeaderCell>Margin Size</CTableHeaderCell>\n                <CTableDataCell className=\"align-middle\">\n                  {position.marginSize}\n                </CTableDataCell>\n              </CTableRow>\n              <CTableRow>\n                <CTableHeaderCell>PNL (%)</CTableHeaderCell>\n                <CTableDataCell\n                  className={classNames({\n                    \"text-success\": position.pnl > 0,\n                    \"text-danger\": position.pnl < 0,\n                    \"align-middle\": true,\n                  })}\n                >\n                  {position.pnl} ({position.roe}%)\n                </CTableDataCell>\n              </CTableRow>\n            </CTableBody>\n          </CTable>\n          {isClose && (\n            <div className=\"d-flex align-items-center\">\n              <div>Close</div>\n              <div className=\"align-middle\">\n                <div className=\"d-inline-flex justify-content-start align-items-center align-self-center flex-fill\">\n                  <CButton\n                    color={closeColor}\n                    variant=\"ghost\"\n                    value={position}\n                    onClick={closePositionHandler}\n                    size=\"sm\"\n                  >\n                    Market\n                  </CButton>\n                  {supCloseLimit && (\n                    <>\n                      <div className=\"vr align-middle\" />\n                      <CButton\n                        color={closeColor}\n                        variant=\"ghost\"\n                        value={position}\n                        onClick={closePositionAsLimitHandler}\n                        size=\"sm\"\n                      >\n                        Limit\n                      </CButton>\n                      <div className=\"col-4\">\n                        <CFormInput\n                          type=\"number\"\n                          size=\"sm\"\n                          placeholder=\"price\"\n                          value={limitPrice}\n                          id=\"limit-price\"\n                          onChange={(e) => $limitPrice(e.target.value)}\n                          // className=\"col-5\"\n                        />\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </CCardBody>\n      </CCard>\n    </CCol>\n  );\n};\n\nexport default PositionCard;\n","import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../Provider/Auth\";\nimport tr7TradingBot, {\n  EXCHANGE_BINANCE,\n} from \"../../Model/tr7-trading-bot.js\";\nimport classNames from \"classnames\";\nimport {\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CRow,\n  CCol,\n  CButton,\n  CTableBody,\n  CToaster,\n  CTooltip,\n  CTable,\n  CTableHead,\n  CTableHeaderCell,\n  CTableRow,\n} from \"@coreui/react\";\nimport Position from \"../../components/Trade/Position\";\nimport PositionCard from \"../../components/Trade/PositionCard.js\";\nimport Toast from \"../../components/Toast\";\n\nconst Positions = ({ positions, isClose, exchange }) => {\n  const [toast, addToast] = useState(0);\n  const toasterRef = useRef();\n\n  async function submitClosePosition(position, type, price) {\n    const resp = await tr7TradingBot.closePosition(\n      position,\n      type,\n      price,\n      exchange\n    );\n    return resp;\n  }\n  function closePositionHandler(position) {\n    // addToast(Toast(\"Close Position\", \"submitting order...\"));\n    submitClosePosition(position, \"market\", 0).then((resp) => {\n      addToast(Toast(\"Close Position\", resp.message));\n    });\n  }\n  function closePositionLimitHandler(position, limitPrice) {\n    const minPrice = position.markPrice - (position.markPrice * 50) / 100;\n    const maxPrice = position.markPrice * 1.5;\n    if (limitPrice >= minPrice && limitPrice <= maxPrice) {\n      // addToast(Toast(\"Close Position\", \"submitting order...\"));\n      submitClosePosition(position, \"limit\", limitPrice).then((resp) => {\n        addToast(Toast(\"Close Position\", resp.message));\n      });\n    } else {\n      addToast(\n        Toast(\n          \"Close Position\",\n          \"price should be larger or smaller than mark price maximum of 50%\"\n        )\n      );\n    }\n  }\n  function closeAllPositionsHandler() {\n    // addToast(Toast(\"Close All Positions\", \"submitting order...\"));\n    (async function submitClosePositions() {\n      const resp = await tr7TradingBot.clearPositions();\n      addToast(Toast(\"Close All Positions\", `${resp.msg}`));\n      return resp;\n    })();\n  }\n  /** [\"Symbol\", \"Size\", \"Entry Price\", \"Mark Price\", \"Liq.Price\", \"Margin\", \"PNL\"]\n   *\n   */\n  const curPositions = positions.map((position, index) => {\n    const {\n      symbol,\n      entryPrice,\n      unRealizedProfit,\n      positionAmt,\n      markPrice,\n      liquidationPrice,\n      lastPrice,\n      leverage,\n      pricePrecision,\n      size,\n      marginSize,\n    } = position;\n    // console.log(\"position\", index, position);\n    const roe = (unRealizedProfit * 100) / (Math.abs(size) / leverage);\n    return {\n      symbol,\n      positionAmt,\n      size: Number(size).toFixed(2),\n      entryPrice,\n      markPrice,\n      lastPrice,\n      liquidationPrice,\n      marginSize: Number(marginSize).toFixed(2),\n      pnl: Number(unRealizedProfit).toFixed(2),\n      roe: Number(roe).toFixed(2),\n      leverage,\n    };\n  });\n  let positionsHeader = [\n    \"Symbol\",\n    \"Size\",\n    \"Entry Price\",\n    \"Mark Price\",\n    \"Liq. Price\",\n    \"Last Price\",\n    \"Margin\",\n    \"PNL (ROI%)\",\n  ];\n  if (isClose) {\n    if (exchange === EXCHANGE_BINANCE) {\n      positionsHeader.push(\"Close All Positions\");\n    } else {\n      positionsHeader.push(\"Close Position\");\n    }\n  }\n\n  return (\n    <>\n      <CRow>\n        <CCol>\n          <CCard className=\"mb-4\">\n            <CCardHeader>Positions ({curPositions.length})</CCardHeader>\n            <CCardBody>\n              {curPositions.length > 0 && (\n                <>\n                  <div id=\"positions-card\" className=\"d-flex flex-wrap\">\n                    {curPositions.map((position, index) => {\n                      return (\n                        <PositionCard\n                          position={position}\n                          key={index}\n                          isClose={isClose}\n                          closeHandler={closePositionHandler}\n                          closeLimitHandler={closePositionLimitHandler}\n                        />\n                      );\n                    })}\n                  </div>\n                  <CTable id=\"positions-table\">\n                    <CTableHead className=\"\">\n                      <CTableRow>\n                        {positionsHeader.map((key, index) => {\n                          if (key === \"Close All Positions\") {\n                            return (\n                              <CTableHeaderCell key={index}>\n                                <div>\n                                  <CTooltip\n                                    content=\"close all positions as market price\"\n                                    placement=\"top\"\n                                  >\n                                    <CButton\n                                      variant=\"ghost\"\n                                      color=\"warning\"\n                                      onClick={closeAllPositionsHandler}\n                                    >\n                                      {key}\n                                    </CButton>\n                                  </CTooltip>\n                                </div>\n                              </CTableHeaderCell>\n                            );\n                          }\n                          return (\n                            <CTableHeaderCell key={index}>\n                              {key}\n                            </CTableHeaderCell>\n                          );\n                        })}\n                      </CTableRow>\n                    </CTableHead>\n                    <CTableBody>\n                      {curPositions.map((position, index) => {\n                        return (\n                          <Position\n                            position={position}\n                            key={index}\n                            isClose={isClose}\n                            closeHandler={closePositionHandler}\n                            closeLimitHandler={closePositionLimitHandler}\n                            supCloseLimit={\n                              exchange === EXCHANGE_BINANCE ? true : false\n                            }\n                          />\n                        );\n                      })}\n                    </CTableBody>\n                  </CTable>\n                </>\n              )}\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n      <CToaster ref={toasterRef} push={toast} placement=\"top-end\"></CToaster>\n      {/* <CModal\n        alignment=\"center\"\n        visible={visible}\n        onClose={() => setVisible(false)}\n      >\n        <ClosePositionModal\n          position={position}\n          response={respClose}\n          closeModalHandler={() => setVisible(false)}\n        />\n      </CModal> */}\n    </>\n  );\n};\n\nexport default Positions;\n","import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport tr7TradingBot from \"../Model/tr7-trading-bot.js\";\nimport {\n  CSpinner,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CRow,\n  CCol,\n} from \"@coreui/react\";\nimport Positions from \"./Manual/Positions.js\";\n\nconst TR7BotTrade = (props) => {\n  const [message, $message] = useState(null);\n  const exchange = props.exchange;\n\n  async function fetchSomeBotData(exchange) {\n    const response = await tr7TradingBot.fetchTradeInfo(exchange);\n    return response;\n  }\n  useEffect(() => {\n    fetchSomeBotData(exchange).then((response) => $message(response));\n    const id = setInterval(() => {\n      fetchSomeBotData(exchange).then((response) => $message(response));\n    }, 3000);\n\n    return () => clearInterval(id);\n  }, [exchange]);\n\n  if (!message) {\n    return <CSpinner color=\"info\" />;\n  } else {\n    const openOrders = message.openOrders;\n    const positions = message.positions;\n\n    return (\n      <>\n        <h1>Current Orders and Positions</h1>\n        {openOrders.length > 0 && (\n          <CRow>\n            <CCol xl={12}>\n              <CCard className=\"mb-4\">\n                <CCardHeader>Orders</CCardHeader>\n                <CCardBody>\n                  <table className=\"table\">\n                    <thead>\n                      <tr>\n                        {Object.keys(openOrders[0]).map((key, index) => {\n                          return <th key={index}>{key}</th>;\n                        })}\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {openOrders.map((order, index) => {\n                        return (\n                          <tr index={index}>\n                            {Object.values(order).map((value, idx) => {\n                              return (\n                                <td>\n                                  <span className=\"h6\" key={idx}>\n                                    {value}\n                                  </span>\n                                </td>\n                              );\n                            })}\n                          </tr>\n                        );\n                      })}\n                    </tbody>\n                  </table>\n                </CCardBody>\n              </CCard>\n            </CCol>\n          </CRow>\n        )}\n        {positions.length > 0 && (\n          <CRow>\n            <CCol xl={12}>\n              {Array.isArray(message.positions) && (\n                <Positions\n                  positions={message.positions}\n                  isClose={false}\n                  exchange={exchange}\n                />\n              )}\n            </CCol>\n          </CRow>\n        )}\n        {openOrders.length === 0 && positions.length === 0 && (\n          <CRow>There is not any open order or position</CRow>\n        )}\n      </>\n    );\n  }\n};\n\nexport default TR7BotTrade;\n"],"names":["props","binanceUrl","symbol","style","display","alignItems","className","color","onClick","url","newWindow","window","open","opener","openInNewTab","header","body","closeButton","position","index","isClose","closeHandler","closeLimitHandler","supCloseLimit","useState","limitPrice","$limitPrice","positionAmt","closeColor","pnl","variant","size","leverage","classNames","entryPrice","markPrice","liquidationPrice","lastPrice","marginSize","roe","value","e","type","placeholder","id","onChange","target","xs","md","xl","Symbol","striped","hover","responsive","width","overflowY","positions","exchange","toast","addToast","toasterRef","useRef","submitClosePosition","price","tr7TradingBot","resp","closePositionHandler","then","Toast","message","closePositionLimitHandler","minPrice","maxPrice","closeAllPositionsHandler","msg","curPositions","map","unRealizedProfit","pricePrecision","Math","abs","Number","toFixed","positionsHeader","EXCHANGE_BINANCE","push","length","key","content","placement","ref","$message","fetchSomeBotData","response","useEffect","setInterval","clearInterval","openOrders","Object","keys","order","values","idx","Array","isArray"],"sourceRoot":""}
{"version":3,"file":"static/js/302.30692048.chunk.js","mappings":"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","sources":["Utils/index.js","components/ColorRange.js","components/Change24H.js","components/TradingVol24H.js","pages/Analysis/Binance/BinanceHeatmap.js"],"sourcesContent":["import dayjs from \"dayjs\";\nimport { sum } from \"lodash\";\n\nexport const CurrencyFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n\n  // These options are needed to round to whole numbers if that's what you want.\n  //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n  //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});\nexport const NumberFormatter = (number) => {\n  const retNumber = number.toLocaleString(\"en-US\", {\n    minimumFractionDigits: 2,\n  });\n  console.log(\"retNumber\", retNumber);\n  return retNumber;\n};\n\nexport const PercentFormatter = (number) => `${number.toFixed(2)}%`;\nexport const PercentChangeFormatter = (number) =>\n  `${Number(\n    new Intl.NumberFormat(\"en-US\", {\n      signDisplay: \"exceptZero\",\n    }).format(number)\n  ).toFixed(2)}%`;\n\nexport const DateNow = () => `${dayjs().format(\"DD/MM HH:mm:ss\")}`;\nexport const DateFormatter = (timestamp) =>\n  `${dayjs(timestamp).format(\"DD/MM HH:mm:ss\")}`;\nexport const TimeFormatter = (timestamp) =>\n  `${dayjs(timestamp).format(\"HH:mm:ss\")}`;\nexport const FundingRateFormat = (fundingRate) =>\n  `${Number(fundingRate).toFixed(4)}%`;\n\nexport const NumberShortFmt = (number) => {\n  if (number < 1000000) {\n    return `${Number(number).toFixed(3)}`;\n  } else if (number < 1000000000) {\n    return `${Number(number / 1000000).toFixed(2)}M`;\n  } else {\n    return `${Number(number / 1000000000).toFixed(2)}B`;\n  }\n};\n\nconst Utils = {\n  CurrencyFormatter,\n  PercentFormatter,\n};\n\nexport default Utils;\n","export const percentRangeColors = [\n  {\n    min: Number.NEGATIVE_INFINITY,\n    max: -20,\n    color: \"#D73B51\",\n  },\n  { min: -20, max: -10, color: \"#F1475C\" },\n  { min: -10, max: -0, color: \"#F96E80\" },\n  { min: -0, max: +0, color: \"#77808F\" },\n  { min: +0, max: +10, color: \"#48D69D\" },\n  { min: +10, max: +20, color: \"#0FCB80\" },\n  {\n    min: +20,\n    max: Number.POSITIVE_INFINITY,\n    color: \"#0EAF6F\",\n  },\n];\nexport const fundingRateColors = [\n  {\n    min: -Infinity,\n    max: -0.01,\n    color: \"#D73B51\",\n  },\n  { min: -0.01, max: -0.005, color: \"#F1475C\" },\n  { min: -0.005, max: -0.0, color: \"#F96E80\" },\n  { min: -0.0, max: +0.0, color: \"#77808F\" },\n  { min: +0.0, max: +0.005, color: \"#48D69D\" },\n  { min: +0.005, max: +0.01, color: \"#0FCB80\" },\n  {\n    min: +0.01,\n    max: +Infinity,\n    color: \"#0EAF6F\",\n  },\n];\nexport const getColor = (dataCoverage, indicator) => {\n  let retcolor = \"#77808F\";\n  let listCheck = percentRangeColors;\n  if (indicator === \"Funding Rates\") {\n    listCheck = fundingRateColors;\n  }\n  // console.log(\"dataCoverage\", dataCoverage);\n  const rangeMatch = listCheck.find((range) => {\n    const val = Number(dataCoverage);\n    return val >= range.min && val < range.max;\n  });\n  if (rangeMatch) {\n    retcolor = rangeMatch.color;\n  }\n  return retcolor;\n};\n\nexport const getColorList = (indicator) => {\n  if (indicator === \"Funding Rates\") {\n    return fundingRateColors;\n  } else {\n    return percentRangeColors;\n  }\n};\n","// ref https://stackblitz.com/edit/vitejs-vite-ptbfk9?file=src%2FTreemapChart.tsx\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\nimport { TreemapController, TreemapElement } from \"chartjs-chart-treemap\";\nimport { useEffect, useState } from \"react\";\nimport { Chart } from \"react-chartjs-2\";\nimport { getColor } from \"./ColorRange\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  TreemapController,\n  TreemapElement\n);\n\nlet options = {\n  animation: false,\n  plugins: {\n    title: {\n      display: true,\n      text: \"Price Change 24H\",\n    },\n    legend: {\n      display: false,\n    },\n    tooltip: {\n      displayColors: true,\n      callbacks: {\n        title(items) {\n          return items[0].raw._data.name;\n        },\n        label(item) {\n          const {\n            _data: { percentChange, dataCoverage, price, lastFundingRate },\n          } = item.raw;\n\n          return [\n            `Price : ${price}`,\n            `24h change: ${Number(percentChange).toFixed(2)}%`,\n            `Funding Rate: ${Number(lastFundingRate).toFixed(4)}%`,\n          ];\n        },\n      },\n    },\n  },\n  aspectRatio: 1,\n};\n\nexport default function TreemapChart(props) {\n  const [data24h, $data24h] = useState();\n\n  useEffect(() => {\n    const indicator = props.indicator;\n    const fundingRates = props.fundingRates;\n    const topRangeValue = props.topRangeValue;\n    // const prices = props.prices;\n    const pricePrecisions = props.pricePrecisions;\n\n    let data = {\n      datasets: [\n        {\n          tree: [],\n          key: \"absPricePercent\",\n          labels: {\n            display: true,\n            align: \"left\",\n            formatter: (context) => [\n              context.raw._data.name,\n              context.raw._data.price,\n              `${Number(\n                new Intl.NumberFormat(\"en-US\", {\n                  signDisplay: \"exceptZero\",\n                }).format(context.raw._data.percentChange)\n              ).toFixed(2)}%`,\n            ],\n            color: \"white\",\n            overflow: \"fit\",\n            font: [\n              {\n                size: 20,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n              {\n                size: 14,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n            ],\n          },\n          backgroundColor(context) {\n            if (context.type !== \"data\") return \"transparent\";\n            const { dataCoverage } = context.raw._data;\n            return getColor(dataCoverage, indicator);\n          },\n          spacing: -0.5,\n          borderWidth: 0.75,\n          borderColor: \"#000000\",\n          onclick: (element) => {\n            console.log(\"element\", element);\n          },\n        },\n      ],\n    };\n    let data24hTemp = { ...data };\n    let tree = [];\n    const topChange24h = props.change24Hs.slice(0, topRangeValue);\n    // console.log(\"topChange24h\", topChange24h);\n    // console.log(\n    //   \"topChange24h\",\n    //   topChange24h.forEach(\n    //     (elem) => `${elem.symbol}: ${elem.percentChange * 100}%`\n    //   )\n    // );\n\n    topChange24h.forEach((contract, idx) => {\n      const fdObj = fundingRates?.find(\n        (element) => element.symbol === contract.symbol\n      );\n      const lastFundingRate = Number(fdObj?.fundingRate * 100 || 0);\n      let pricePrecision = pricePrecisions[contract.symbol];\n      if (pricePrecision < 0) pricePrecision = 0;\n      tree.push({\n        name: contract.symbol,\n        // price: `$${Number(prices[contract.symbol]).toFixed(\n        //   pricePrecisions[contract.symbol]\n        // )}`,\n        price: `$${Number(contract.close).toFixed(pricePrecision)}`,\n        lastFundingRate: lastFundingRate,\n        percentChange: contract.percentChange,\n        absPricePercent: Math.abs(contract.percentChange),\n        dataCoverage:\n          indicator === \"Funding Rates\"\n            ? lastFundingRate\n            : contract.percentChange,\n      });\n      // if (idx === 0) {\n      //   console.log(\"props.change24Hs:contract\", contract);\n      //   console.log(\"tree[idx]\", idx, tree[idx]);\n      // }\n    });\n    data24hTemp.datasets[0].tree = tree;\n    $data24h(data24hTemp);\n  }, [props]);\n\n  return (\n    <>{data24h && <Chart type=\"treemap\" data={data24h} options={options} />}</>\n  );\n}\n","// ref https://stackblitz.com/edit/vitejs-vite-ptbfk9?file=src%2FTreemapChart.tsx\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\nimport { TreemapController, TreemapElement } from \"chartjs-chart-treemap\";\nimport { useEffect, useState } from \"react\";\nimport { Chart } from \"react-chartjs-2\";\nimport { CurrencyFormatter } from \"../Utils/index\";\nimport { getColor } from \"./ColorRange\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n  TreemapController,\n  TreemapElement\n);\n\nlet options = {\n  animation: false,\n  plugins: {\n    title: {\n      display: true,\n      text: \"Trading Volume 24H\",\n    },\n    legend: {\n      display: false,\n    },\n    tooltip: {\n      displayColors: true,\n      callbacks: {\n        title(items) {\n          return items[0].raw._data.name;\n        },\n        label(item) {\n          const {\n            _data: { percentChange, quoteVolume, price, lastFundingRate },\n          } = item.raw;\n\n          return [\n            `Price : ${price}`,\n            `Volume 24H: ${CurrencyFormatter.format(quoteVolume)}`,\n            `24h change: ${Number(\n              new Intl.NumberFormat(\"en-US\", {\n                signDisplay: \"exceptZero\",\n              }).format(percentChange)\n            ).toFixed(2)}%`,\n            `Funding Rate: ${Number(lastFundingRate).toFixed(4)}%`,\n          ];\n        },\n      },\n    },\n  },\n  aspectRatio: 1,\n};\n\nexport default function TreemapChart(props) {\n  const [data24h, $data24h] = useState();\n\n  useEffect(() => {\n    const indicator = props.indicator;\n    const fundingRates = props.fundingRates;\n    const topRangeValue = props.topRangeValue;\n    // const prices = props.prices;\n    const pricePrecisions = props.pricePrecisions;\n\n    let data = {\n      datasets: [\n        {\n          tree: [],\n          key: \"quoteVolume\",\n          labels: {\n            display: true,\n            align: \"left\",\n            formatter: (context) => [\n              context.raw._data.name,\n              context.raw._data.price,\n              `Vol: ${CurrencyFormatter.format(context.raw._data.quoteVolume)}`,\n              `${Number(\n                new Intl.NumberFormat(\"en-US\", {\n                  signDisplay: \"exceptZero\",\n                }).format(context.raw._data.percentChange)\n              ).toFixed(2)}%`,\n            ],\n            color: \"white\",\n            overflow: \"fit\",\n            font: [\n              {\n                size: 20,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n              {\n                size: 14,\n                style: \"normal\",\n                weight: \"bold\",\n              },\n            ],\n          },\n          backgroundColor(context) {\n            if (context.type !== \"data\") return \"transparent\";\n            const { dataCoverage } = context.raw._data;\n            return getColor(dataCoverage, indicator);\n          },\n          spacing: -0.5,\n          borderWidth: 0.75,\n          borderColor: \"#000000\",\n          onclick: (element) => {\n            console.log(\"element\", element);\n          },\n        },\n      ],\n    };\n    let data24hTemp = { ...data };\n    let tree = [];\n    props.tradingVol24H.slice(0, topRangeValue).forEach((contract, idx) => {\n      const fdObj = fundingRates?.find(\n        (element) => element.symbol === contract.symbol\n      );\n      const lastFundingRate = Number(fdObj?.fundingRate * 100 || 0);\n\n      tree.push({\n        name: contract.symbol,\n        // price: `$${Number(prices[contract.symbol]).toFixed(\n        //   pricePrecisions[contract.symbol]\n        // )}`,\n        price: `$${Number(contract.close).toFixed(\n          pricePrecisions[contract.symbol]\n        )}`,\n        lastFundingRate: lastFundingRate,\n        volume: contract.volume,\n        quoteVolume: contract.quoteVolume,\n        percentChange: contract.percentChange,\n        dataCoverage:\n          indicator === \"Funding Rates\"\n            ? lastFundingRate\n            : contract.percentChange,\n      });\n    });\n    data24hTemp.datasets[0].tree = tree;\n    $data24h(data24hTemp);\n  }, [props]);\n\n  return (\n    <>{data24h && <Chart type=\"treemap\" data={data24h} options={options} />}</>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport useWebSocket from \"react-use-websocket\";\nimport Change24H from \"../../../components/Change24H\";\nimport TradingVol24H from \"../../../components/TradingVol24H\";\nimport { Dropdown, DropdownButton } from \"react-bootstrap\";\nimport {\n  fundingRateColors,\n  percentRangeColors,\n} from \"../../../components/ColorRange\";\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\n\nconst productionUrl = window.location.origin.replace(\"https\", \"wss\");\nconst socketUrl =\n  (process.env.NODE_ENV === \"production\"\n    ? productionUrl\n    : \"ws://127.0.0.1:3000\") + \"/heatmap\";\nconsole.log(\"socketUrl\", socketUrl);\n\nconst IndicatorSelect = (props) => {\n  function handleTypeSelect(selection) {\n    props.typeListSelectHandler(selection);\n  }\n  return (\n    <>\n      <DropdownButton\n        id=\"dropdown-exchange\"\n        title={props.curType}\n        size=\"sm\"\n        variant=\"secondary\"\n        menuVariant=\"dark\"\n        onSelect={handleTypeSelect}\n      >\n        {props.typeList &&\n          props.typeList.map((item, index) => {\n            return (\n              <Dropdown.Item eventKey={item} key={index}>\n                {item}\n              </Dropdown.Item>\n            );\n          })}\n      </DropdownButton>\n    </>\n  );\n};\nconst TopRangeSelect = (props) => {\n  function handleTypeSelect(selection) {\n    props.typeListSelectHandler(selection);\n  }\n  return (\n    <>\n      <DropdownButton\n        id=\"dropdown-exchange\"\n        title={props.curType}\n        size=\"sm\"\n        variant=\"secondary\"\n        menuVariant=\"dark\"\n        onSelect={handleTypeSelect}\n      >\n        {props.typeList &&\n          props.typeList.map((item, index) => {\n            return (\n              <Dropdown.Item eventKey={item} key={index}>\n                {item}\n              </Dropdown.Item>\n            );\n          })}\n      </DropdownButton>\n    </>\n  );\n};\n\nconst indicatorList = [\"Performance 24h, %\", \"Funding Rates\"];\nconst topRangeList = {\n  \"Top 10 coins\": 10,\n  \"Top 20 coins\": 20,\n  \"Top 30 coins\": 30,\n  \"Top 50 coins\": 50,\n};\n\nconst ColorLegend = (props) => {\n  const colors =\n    props.indicator === \"Funding Rates\"\n      ? fundingRateColors\n      : percentRangeColors;\n\n  return (\n    <div className=\"mx-2 d-flex flex-row align-items-center\">\n      {colors.map((rangeColor, idx) => {\n        let minstr = rangeColor.min.toString();\n        let maxstr = rangeColor.max.toString();\n        if (props.indicator !== \"Funding Rates\") {\n          if (rangeColor.min !== -Infinity) minstr += \"%\";\n          if (rangeColor.max !== Infinity) maxstr += \"%\";\n        }\n\n        return (\n          <OverlayTrigger\n            placement=\"top\"\n            delay={{ show: 250, hide: 400 }}\n            overlay={\n              <Tooltip id={idx}>\n                {rangeColor.min < 0\n                  ? `${minstr} > ${maxstr}`\n                  : rangeColor.min === 0 && rangeColor.max === 0\n                  ? `${minstr}`\n                  : `${minstr} < ${maxstr}`}\n              </Tooltip>\n            }\n          >\n            <div\n              className=\"color-pattern mx-1\"\n              style={{ backgroundColor: rangeColor.color }}\n            ></div>\n          </OverlayTrigger>\n        );\n      })}\n    </div>\n  );\n};\n\nconst BinanceHeatmap = () => {\n  const [indicator, $indicator] = useState(indicatorList[0]);\n  const [topRange, $topRange] = useState(Object.keys(topRangeList)[1]);\n  function indicatorListSelectHandler(indicator) {\n    $indicator(indicator);\n  }\n  function topRangeListSelectHandler(topRange) {\n    $topRange(topRange);\n  }\n  const { sendMessage, lastMessage, readyState } = useWebSocket(socketUrl, {\n    share: true,\n    retryOnError: true,\n    reconnectAttempts: 1000,\n    reconnectInterval: 3000,\n    //Will attempt to reconnect on all close events, such as server shutting down\n    shouldReconnect: () => true,\n    onOpen: (event) => console.log(\"opened ws\", event),\n    onClose: (closeEvent) => console.log(\"ws closed\", closeEvent),\n    onError: (errEvent) => console.log(\"error\", errEvent),\n    onReconnectStop: (numAttemp) => console.log(\"reconnect stopped\", numAttemp),\n  });\n  const [binanceHeatmap, $binanceHeatmap] = useState({});\n  useEffect(() => {\n    if (lastMessage !== null) {\n      const json = JSON.parse(lastMessage.data);\n      $binanceHeatmap(json);\n    }\n  }, [lastMessage]);\n\n  return (\n    <div>\n      <div className=\"d-flex flex-row justify-content-between\">\n        <div className=\"d-flex flex-row justify-content-start mb-1\">\n          <div className=\"mx-2\">\n            <TopRangeSelect\n              curType={topRange}\n              typeList={Object.keys(topRangeList)}\n              typeListSelectHandler={topRangeListSelectHandler}\n            />\n          </div>\n          <div className=\"mx-2 d-flex flex-row justify-content-start\">\n            <IndicatorSelect\n              curType={indicator}\n              typeList={indicatorList}\n              typeListSelectHandler={indicatorListSelectHandler}\n            />\n            <ColorLegend indicator={indicator} />\n          </div>\n        </div>\n        <div className=\"d-flex flex-row w-50 justify-content-end mb-1\"></div>\n      </div>\n      <div className=\"d-flex flex-row flex-wrap justify-content-around align-content-around\">\n        <div className=\"heatmap-chart\">\n          {readyState && binanceHeatmap.change24Hs && (\n            <Change24H\n              change24Hs={binanceHeatmap.change24Hs}\n              // prices={binanceHeatmap.prices}\n              pricePrecisions={binanceHeatmap.pricePrecisions}\n              indicator={indicator}\n              topRangeValue={topRangeList[topRange]}\n              fundingRates={binanceHeatmap.fundingRates}\n            />\n          )}\n        </div>\n        <div className=\"heatmap-chart\">\n          {readyState && binanceHeatmap.change24Hs && (\n            <TradingVol24H\n              tradingVol24H={binanceHeatmap.tradingVol24H}\n              // change24Hs={binanceHeatmap.change24Hs}\n              // prices={binanceHeatmap.prices}\n              pricePrecisions={binanceHeatmap.pricePrecisions}\n              indicator={indicator}\n              topRangeValue={topRangeList[topRange]}\n              fundingRates={binanceHeatmap.fundingRates}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BinanceHeatmap;\n"],"names":["CurrencyFormatter","Intl","NumberFormat","style","currency","PercentChangeFormatter","number","Number","signDisplay","format","toFixed","DateFormatter","timestamp","dayjs","FundingRateFormat","fundingRate","percentRangeColors","min","NEGATIVE_INFINITY","max","color","POSITIVE_INFINITY","fundingRateColors","Infinity","getColor","dataCoverage","indicator","retcolor","listCheck","rangeMatch","find","range","val","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","TreemapController","TreemapElement","options","animation","plugins","title","display","text","legend","tooltip","displayColors","callbacks","items","raw","_data","name","label","item","percentChange","price","lastFundingRate","aspectRatio","TreemapChart","props","useState","data24h","$data24h","useEffect","fundingRates","topRangeValue","pricePrecisions","data","datasets","tree","key","labels","align","formatter","context","overflow","font","size","weight","backgroundColor","type","spacing","borderWidth","borderColor","onclick","element","console","log","data24hTemp","change24Hs","slice","forEach","contract","idx","fdObj","symbol","pricePrecision","push","close","absPricePercent","Math","abs","quoteVolume","tradingVol24H","volume","socketUrl","window","location","origin","replace","IndicatorSelect","DropdownButton","id","curType","variant","menuVariant","onSelect","selection","typeListSelectHandler","typeList","map","index","Dropdown","eventKey","TopRangeSelect","indicatorList","topRangeList","ColorLegend","colors","className","rangeColor","minstr","toString","maxstr","OverlayTrigger","placement","delay","show","hide","overlay","$indicator","Object","keys","topRange","$topRange","useWebSocket","share","retryOnError","reconnectAttempts","reconnectInterval","shouldReconnect","onOpen","event","onClose","closeEvent","onError","errEvent","onReconnectStop","numAttemp","lastMessage","sendMessage","readyState","binanceHeatmap","$binanceHeatmap","json","JSON","parse"],"sourceRoot":""}
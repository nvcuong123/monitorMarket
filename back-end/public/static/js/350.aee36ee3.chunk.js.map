{"version":3,"file":"static/js/350.aee36ee3.chunk.js","mappings":"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","sources":["pages/Auto/AutoGrid.js"],"sourcesContent":["import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport {\n  CRow,\n  CCol,\n  CButton,\n  CSpinner,\n  CModal,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CForm,\n  CFormSelect,\n  CInputGroup,\n  CInputGroupText,\n  CFormInput,\n  CBadge,\n} from \"@coreui/react\";\n\nconst DEFAULT_SYMBOL = \"BTCUSDT\";\nconst DEFAULT_DIRECTION = \"Short\";\nconst DEFAULT_PROFIT_TARGET = \"30\";\nconst DEFAULT_LEVERAGE = \"5\";\nconst DEFAULT_MODE = \"Isolated\";\nconst DEFAULT_MAX_BALANCE = \"1000\";\nconst DEFAULT_NO_LEVEL = 5;\nconst NewTradeModal = ({ onCloseHandler, onSubmitHandler }) => {\n  const refForm = useRef(null);\n  const [symbolList, $symbolList] = useState([]);\n  const directionRef = useRef(DEFAULT_DIRECTION);\n  const profitTargetRef = useRef(DEFAULT_PROFIT_TARGET);\n  const leverageRef = useRef(DEFAULT_LEVERAGE);\n  const modeRef = useRef(DEFAULT_MODE);\n  const maxBalanceRef = useRef(DEFAULT_MAX_BALANCE);\n  const [curSymbol, $curSymbol] = useState(DEFAULT_SYMBOL);\n  const [numberLevels, $numberLevels] = useState(DEFAULT_NO_LEVEL);\n  const [prices, $prices] = useState(Array(DEFAULT_NO_LEVEL));\n  const [amounts, $amounts] = useState(Array(DEFAULT_NO_LEVEL));\n  const [totalAmount, $totalAmount] = useState(null);\n  const [averagePrice, $averagePrice] = useState(null);\n  const [curSymbolMarkPrice, $curSymbolMarkPrice] = useState(\"---\");\n  const [curSymbolLastPrice, $curSymbolLastPrice] = useState(\"---\");\n  const takeProfitRef = useRef(null);\n  const stoplossRef = useRef(null);\n\n  function resetDefaultFormData() {\n    $numberLevels(DEFAULT_NO_LEVEL);\n    $prices(new Array(DEFAULT_NO_LEVEL));\n    $amounts(new Array(DEFAULT_NO_LEVEL));\n  }\n  // get futures symbol list\n  useEffect(() => {\n    (async function fetchSymbolList() {\n      return await tr7TradingBot.getSymbolList();\n    })().then((res) => {\n      const sortSymbols = res.symbols.sort();\n      $symbolList(sortSymbols);\n    });\n  }, []);\n\n  useEffect(() => {\n    function fetchSymbolInfoInvoke() {\n      (async function fetchSymbolInfo() {\n        return await tr7TradingBot.getSymbolMarketInfo(curSymbol);\n      })().then((res) => {\n        const symbolInfo = res.symbolMarketInfo;\n        $curSymbolMarkPrice(symbolInfo.markPrice);\n        $curSymbolLastPrice(symbolInfo.lastPrice);\n      });\n    }\n    fetchSymbolInfoInvoke();\n    if (!!curSymbol) {\n      const id = setInterval(fetchSymbolInfoInvoke, 2000);\n      return () => clearInterval(id);\n    }\n  }, [curSymbol]);\n\n  // calculate again average price, if both level price and amount are present\n  useEffect(() => {\n    let avgPrice = 0;\n    let totalAmount = 0;\n    let totalBalanceSize = 0;\n    const list = prices.slice(0, numberLevels);\n    list.forEach((price, index) => {\n      const amount = amounts[index];\n      if (price !== undefined && amount !== undefined) {\n        totalAmount += amount;\n        totalBalanceSize += price * amount;\n      }\n    });\n    avgPrice = (totalBalanceSize / totalAmount).toFixed(2);\n    $averagePrice(avgPrice);\n    $totalAmount(totalAmount);\n  }, [prices, amounts, numberLevels]);\n\n  function submitNewTradeHandler(event) {\n    event.preventDefault();\n    // validate form data\n    // console.log(curSymbol);\n    // console.log(directionRef.current.value, profitTargetRef.current.value);\n    // console.log(modeRef.current.value, leverageRef.current.value);\n    // console.log(maxBalanceRef.current.value, numberLevels);\n    // console.log(prices, amounts);\n    // console.log(takeProfitRef.current.value, stoplossRef.current.value);\n    // submit form data to server to place orders\n    (async function submitGridOrder() {\n      const levels = prices.map((price, index) => {\n        const amount = amounts[index];\n        return [price, amount];\n      });\n      const gridOrder = {\n        symbol: curSymbol,\n        mode: modeRef.current.value.toLowerCase(),\n        direction: directionRef.current.value.toLowerCase(),\n        leverage: Number(leverageRef.current.value),\n        maxBalance: Number(maxBalanceRef.current.value),\n        levels: [...levels],\n        takeProfit: {\n          trigger: \"mark\",\n          type: \"market\",\n          percent: Number(takeProfitRef.current.value),\n        },\n        stopLoss: {\n          trigger: \"last\",\n          type: \"limit\",\n          percent: Number(stoplossRef.current.value),\n        },\n      };\n\n      return await tr7TradingBot.placeGridOrder(gridOrder);\n    })().then((res) => {\n      console.log(res);\n    });\n  }\n\n  function symbolChangeHandler(e) {\n    $curSymbol(e.target.value);\n    resetDefaultFormData();\n  }\n  function inputLevelsChangeHandler(e) {\n    $numberLevels(e.target.value);\n  }\n\n  function levelPriceChangeHandler(e) {\n    const index = Number(e.target.id.replace(\"price\", \"\"));\n    $prices((curPrices) => {\n      const tempPrices = [...curPrices];\n      tempPrices[index] = Number(e.target.value);\n      return tempPrices;\n    });\n  }\n  function levelAmountChangeHandler(e) {\n    const index = Number(e.target.id.replace(\"amount\", \"\"));\n    $amounts((curAmounts) => {\n      const tempAmounts = [...curAmounts];\n      tempAmounts[index] = Number(e.target.value);\n      return tempAmounts;\n    });\n  }\n\n  return (\n    <CForm ref={refForm} onSubmit={submitNewTradeHandler}>\n      <CModalHeader>\n        <CModalTitle>New Trade</CModalTitle>\n      </CModalHeader>\n      <CModalBody>\n        <CRow className=\"d-flex d-flex-row justify-content-around\">\n          <CCol xs={10} lg={5}>\n            <CInputGroup className=\"mb-2\">\n              <CInputGroupText\n                component=\"label\"\n                htmlFor=\"inputSymbol\"\n                className=\"\"\n              >\n                Symbol\n              </CInputGroupText>\n              <CFormSelect\n                id=\"inputSymbol\"\n                onChange={symbolChangeHandler}\n                value={curSymbol}\n              >\n                {symbolList.map((symbol, index) => {\n                  return (\n                    <option\n                      key={index}\n                      // selected={symbol === DEFAULT_SYMBOL ? true : false}\n                    >\n                      {symbol}\n                    </option>\n                  );\n                })}\n              </CFormSelect>\n            </CInputGroup>\n            <CInputGroup className=\"mb-2\">\n              <CInputGroupText component=\"label\" htmlFor=\"inputMode\">\n                Mode\n              </CInputGroupText>\n              <CFormSelect\n                ref={modeRef}\n                id=\"inputMode\"\n                defaultValue={DEFAULT_MODE}\n              >\n                <option>Isolated</option>\n                <option>Cross</option>\n              </CFormSelect>\n            </CInputGroup>\n            <CInputGroup className=\"mb-2\">\n              <CInputGroupText component=\"label\" htmlFor=\"inputSide\">\n                Direction\n              </CInputGroupText>\n              <CFormSelect\n                id=\"inputSide\"\n                ref={directionRef}\n                defaultValue={DEFAULT_DIRECTION}\n              >\n                <option>Long</option>\n                <option>Short</option>\n              </CFormSelect>\n            </CInputGroup>\n            {/* <CInputGroup className=\"mb-2\">\n              <CInputGroupText component=\"label\" htmlFor=\"inputTargetProfit\">\n                Profit Target\n              </CInputGroupText>\n              <CFormInput\n                ref={profitTargetRef}\n                type=\"number\"\n                // placeholder=\"10\"\n                aria-label=\"profit target\"\n                className=\"col-4\"\n                defaultValue={DEFAULT_PROFIT_TARGET}\n                id=\"inputTargetProfit\"\n              />\n              <CInputGroupText component=\"label\">%</CInputGroupText>\n            </CInputGroup> */}\n\n            <CInputGroup className=\"mb-2\">\n              <CInputGroupText component=\"label\" htmlFor=\"inputLeverage\">\n                Leverage\n              </CInputGroupText>\n              <CFormInput\n                ref={leverageRef}\n                type=\"number\"\n                // placeholder=\"5\"\n                aria-label=\"profit target\"\n                className=\"col-4\"\n                defaultValue={DEFAULT_LEVERAGE}\n                id=\"inputLeverage\"\n              />\n              <CInputGroupText component=\"label\">x</CInputGroupText>\n            </CInputGroup>\n            <CInputGroup className=\"mb-2\">\n              <CInputGroupText component=\"label\" htmlFor=\"inputInitialMargin\">\n                Max Balance\n              </CInputGroupText>\n              <CFormInput\n                ref={maxBalanceRef}\n                type=\"number\"\n                placeholder=\"100\"\n                aria-label=\"profit target\"\n                className=\"col-4\"\n                defaultValue={1000}\n                id=\"inputInitialMargin\"\n              />\n              <CInputGroupText component=\"label\">USDT</CInputGroupText>\n            </CInputGroup>\n          </CCol>\n          <CCol xs={10} lg={6}>\n            <CRow>\n              <CCol>\n                <CBadge color=\"info\">\n                  Mark Price: {Number(curSymbolMarkPrice).toFixed(2)}\n                </CBadge>\n              </CCol>\n              <CCol>\n                <CBadge color=\"warning\">\n                  Last Price: {Number(curSymbolLastPrice).toFixed(2)}\n                </CBadge>\n              </CCol>\n            </CRow>\n            <CInputGroup className=\"mt-1 mb-2 md-col-4\">\n              <CInputGroup className=\"mb-0\">\n                <CInputGroupText component=\"label\" htmlFor=\"inputLevels\">\n                  Number Levels\n                </CInputGroupText>\n                <CFormInput\n                  type=\"number\"\n                  placeholder={numberLevels}\n                  aria-label=\"\"\n                  // defaultValue={numberLevels}\n                  value={numberLevels}\n                  id=\"inputLevels\"\n                  onChange={inputLevelsChangeHandler}\n                />\n              </CInputGroup>\n              {!!numberLevels &&\n                Array.from({ length: numberLevels }).map((level, index) => {\n                  return (\n                    <CInputGroup className=\"mb-0\" key={index} size=\"sm\">\n                      <CInputGroupText\n                        component=\"label\"\n                        htmlFor={\"price\" + index}\n                      >\n                        Price {index + 1}\n                      </CInputGroupText>\n                      <CFormInput\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"price\"\n                        // defaultValue=\"\"\n                        value={prices[index]}\n                        id={\"price\" + index}\n                        onChange={levelPriceChangeHandler}\n                      />\n\n                      <CInputGroupText\n                        component=\"label\"\n                        htmlFor={\"amout\" + index}\n                      >\n                        Amt {index + 1}\n                      </CInputGroupText>\n                      <CFormInput\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"amount\"\n                        defaultValue=\"\"\n                        id={\"amount\" + index}\n                        onChange={levelAmountChangeHandler}\n                      />\n                    </CInputGroup>\n                  );\n                })}\n              <CRow>\n                <CCol>\n                  <CBadge color=\"danger\">Average Price: {averagePrice}</CBadge>\n                </CCol>\n                <CCol>\n                  <CBadge color=\"warning\">Total Amount: {totalAmount}</CBadge>\n                </CCol>\n              </CRow>\n            </CInputGroup>\n            <CInputGroup className=\"my-2\">\n              <CInputGroup className=\"mb-1\">\n                <CInputGroupText component=\"label\" htmlFor=\"inputTP\">\n                  Take Profit (option)\n                </CInputGroupText>\n                <CFormInput\n                  ref={takeProfitRef}\n                  type=\"number\"\n                  placeholder=\"\"\n                  aria-label=\"Take Profit\"\n                  // className=\"col-4\"\n                  defaultValue=\"\"\n                  id=\"inputTP\"\n                />\n                <CInputGroupText component=\"label\">%</CInputGroupText>\n              </CInputGroup>\n              <CInputGroup className=\"mb-1\">\n                <CInputGroupText\n                  className=\"\"\n                  component=\"label\"\n                  htmlFor=\"inputSL\"\n                >\n                  Stop Loss (option)\n                </CInputGroupText>\n                <CFormInput\n                  ref={stoplossRef}\n                  type=\"number\"\n                  placeholder=\"\"\n                  aria-label=\"stoploss percent\"\n                  // className=\"col-4\"\n                  defaultValue=\"\"\n                  id=\"inputSL\"\n                />\n                <CInputGroupText component=\"label\">%</CInputGroupText>\n              </CInputGroup>\n            </CInputGroup>\n          </CCol>\n        </CRow>\n      </CModalBody>\n      <CModalFooter>\n        <CButton color=\"secondary\" onClick={() => onCloseHandler}>\n          Close\n        </CButton>\n        <CButton color=\"primary\" type=\"submit\">\n          Submit\n        </CButton>\n      </CModalFooter>\n    </CForm>\n  );\n};\n\nconst GridTradeList = () => {\n  return <>List of current running grid tradings</>;\n};\n\nconst AutoGrid = () => {\n  const [response, $response] = useState(null);\n  const [newTradeVisible, $newTradeVisible] = useState(false);\n  // pull all current trades, then laying out as separated as symbol with the button to close position\n  async function fetchSomeBotData() {\n    // TODO: load current grid trades running\n    // const response = await tr7TradingBot.getTrade();\n    return { success: true };\n  }\n  useEffect(() => {\n    fetchSomeBotData().then((resp) => $response(resp));\n    // const id = setInterval(() => {\n    //   fetchSomeBotData().then((resp) => $response(resp));\n    // }, 1700);\n\n    // return () => clearInterval(id);\n  }, []);\n\n  function newTradeHandler(e) {\n    $newTradeVisible(true);\n  }\n\n  if (!response) {\n    return <CSpinner color=\"info\" />;\n  } else if (response.success === false) {\n    return (\n      <>\n        <h1>Auto Grid Trade</h1>\n        <p>{response.message}</p>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <div className=\"d-flex flex-row justify-content-between align-items-center\">\n          <h1>Auto Grid Trade</h1>\n          <div>\n            <button onClick={newTradeHandler} className=\"btn btn-warning\">\n              New Trade\n            </button>\n            <CModal\n              size=\"lg\"\n              alignment=\"center\"\n              visible={newTradeVisible}\n              onClose={() => $newTradeVisible(false)}\n            >\n              <NewTradeModal onCloseHandler={() => $newTradeVisible(false)} />\n            </CModal>\n          </div>\n        </div>\n        <GridTradeList />\n      </>\n    );\n  }\n};\n\nexport default AutoGrid;\n"],"names":["DEFAULT_DIRECTION","DEFAULT_MODE","NewTradeModal","onCloseHandler","refForm","onSubmitHandler","useRef","useState","symbolList","$symbolList","directionRef","leverageRef","modeRef","maxBalanceRef","curSymbol","$curSymbol","numberLevels","$numberLevels","Array","prices","$prices","amounts","$amounts","totalAmount","$totalAmount","averagePrice","$averagePrice","curSymbolMarkPrice","$curSymbolMarkPrice","curSymbolLastPrice","$curSymbolLastPrice","takeProfitRef","stoplossRef","levelPriceChangeHandler","e","index","Number","target","id","replace","curPrices","tempPrices","value","levelAmountChangeHandler","curAmounts","tempAmounts","useEffect","tr7TradingBot","then","res","sortSymbols","symbols","sort","fetchSymbolInfoInvoke","symbolInfo","symbolMarketInfo","markPrice","lastPrice","setInterval","clearInterval","avgPrice","totalBalanceSize","slice","forEach","price","amount","undefined","toFixed","ref","onSubmit","event","preventDefault","levels","map","gridOrder","symbol","mode","current","toLowerCase","direction","leverage","maxBalance","takeProfit","trigger","type","percent","stopLoss","console","log","className","xs","lg","component","htmlFor","onChange","defaultValue","placeholder","color","from","length","level","size","onClick","GridTradeList","response","$response","newTradeVisible","$newTradeVisible","success","fetchSomeBotData","resp","message","alignment","visible","onClose"],"sourceRoot":""}
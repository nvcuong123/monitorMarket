{"version":3,"file":"static/js/198.9457b09c.chunk.js","mappings":"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","sources":["components/Toast.js","pages/Manual/Orders.js","components/Trade/OrderWithSaveParam.js","components/Trade/NewOrder.js","components/Trade/NewMultiLevelOrder.js","pages/Manual/ManualPositions.js","components/Trade/Position.js","pages/Manual/Positions.js","../node_modules/classnames/index.js"],"sourcesContent":["import React from \"react\";\nimport { CToast, CToastHeader, CToastBody } from \"@coreui/react\";\n\nconst Toast = (header, body) => {\n  return (\n    <CToast color=\"secondary\">\n      <div>\n        <CToastHeader closeButton>\n          {/* <svg\n            className=\"rounded me-2\"\n            width=\"20\"\n            height=\"20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            preserveAspectRatio=\"xMidYMid slice\"\n            focusable=\"false\"\n            role=\"img\"\n          >\n            <rect width=\"100%\" height=\"100%\" fill=\"#007aff\"></rect>\n          </svg> */}\n          <div className=\"fw-bold me-auto\">{header}</div>\n        </CToastHeader>\n        <CToastBody>{body}</CToastBody>\n      </div>\n    </CToast>\n  );\n};\n\nexport default Toast;\n","import {\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CRow,\n  CCol,\n  CTable,\n  CTableHead,\n  CTableBody,\n} from \"@coreui/react\";\n\n// const months = [\n//   \"Jan\",\n//   \"Feb\",\n//   \"Mar\",\n//   \"Apr\",\n//   \"May\",\n//   \"Jun\",\n//   \"Jul\",\n//   \"Aug\",\n//   \"Sep\",\n//   \"Oct\",\n//   \"Nov\",\n//   \"Dec\",\n// ];\nfunction padTo2Digits(num) {\n  return num.toString().padStart(2, \"0\");\n}\n\nfunction formatDate(date) {\n  return [\n    date.getFullYear(),\n    padTo2Digits(date.getMonth() + 1),\n    padTo2Digits(date.getDate()),\n  ].join(\"-\");\n}\n\nconst Orders = ({ openOrders, isClose }) => {\n  const ordersHeader = [\n    \"Time\",\n    \"Symbol\",\n    \"Type\",\n    \"Side\",\n    \"Price\",\n    \"Amount\",\n    // \"Filled\",\n    \"Reduce Only\",\n    // \"Post Only\",\n    // \"Trigger Conditions\",\n    \"TP/SL\",\n    \"Cancel All\",\n  ];\n  const curOrders = [];\n  // console.log(\"openOrders[0]\", openOrders[0]);\n  // console.log(\"openOrders[1]\", openOrders[1]);\n  openOrders.forEach((order) => {\n    // console.log(\"openOrders.forEach\", order);\n    const tempOrder = [];\n    const date = new Date(order.time);\n    const time = `${formatDate(date)}, ${String(date.getHours()).padStart(\n      2,\n      \"0\"\n    )}:${String(date.getMinutes()).padStart(2, \"0\")}::${String(\n      date.getSeconds()\n    ).padStart(2, \"0\")}`;\n    tempOrder.push(time);\n    tempOrder.push(order.symbol);\n    tempOrder.push(order.type);\n    tempOrder.push(order.side);\n    const price = order.price === \"0\" ? order.stopPrice : order.price;\n    tempOrder.push(Number(price).toFixed(order.pricePrecision));\n    tempOrder.push((price * order.origQty).toFixed(2));\n    // tempOrder.push(order.status === \"FILLED\" ? \"filled\" : \"0\");\n    tempOrder.push(order.reduceOnly ? \"Yes\" : \"No\");\n    // tempOrder.push(\"--\");\n    // tempOrder.push(\"--\");\n    tempOrder.push(\"--\");\n    tempOrder.push(\"--\");\n\n    curOrders.push(tempOrder);\n  });\n  return (\n    <>\n      <CRow>\n        <CCol xl={12}>\n          <CCard className=\"mb-4\">\n            <CCardHeader>Open Orders ({openOrders.length})</CCardHeader>\n            <CCardBody>\n              <CTable className=\"table\">\n                <CTableHead>\n                  <tr>\n                    {ordersHeader.map((header, index) => {\n                      return <th key={index}>{header}</th>;\n                    })}\n                  </tr>\n                </CTableHead>\n                <CTableBody>\n                  {curOrders.map((order, index) => {\n                    return (\n                      <tr index={index}>\n                        {order.map((value, idx) => {\n                          return (\n                            <td>\n                              <span className=\"h6\">{value}</span>\n                            </td>\n                          );\n                        })}\n                      </tr>\n                    );\n                  })}\n                </CTableBody>\n              </CTable>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default Orders;\n","import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport {\n  CRow,\n  CCol,\n  CButton,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CForm,\n  CFormSelect,\n  CInputGroup,\n  CInputGroupText,\n  CFormInput,\n  CBadge,\n  CSpinner,\n  CToaster,\n  CCallout,\n} from \"@coreui/react\";\nimport Toast from \"../Toast.js\";\nimport {\n  useFuturesOrderInfo,\n  CUR_SYMBOL,\n  MODE,\n  LEVERAGE,\n  DIRECTION,\n  TYPE,\n  PRICE,\n  AMOUNT,\n  TAKE_PROFIT,\n  STOP_LOSS,\n} from \"../../Provider/FuturesOrderInfo.js\";\n\nconst MODE_ISOLATED = \"Isolated\";\nconst MODE_CROSSED = \"Crossed\";\nconst DEFAULT_MODE = MODE_ISOLATED;\nconst DIRECTION_LONG = \"Long\";\nconst DIRECTION_SHORT = \"Short\";\nconst DEFAULT_DIRECTION = DIRECTION_SHORT;\nconst TYPE_MARKET = \"Market\";\nconst TYPE_LIMIT = \"Limit\";\nconst DEFAULT_TYPE = TYPE_MARKET;\nconst TP_THRESHOLD = 1;\nconst SL_THRESHOLD = 1;\nconst TYPE_PRICE = \"$\";\nconst TYPE_PERCENT = \"%\";\nconst TYPE_PERCENT_PRICE = 0;\nconst TYPE_PERCENT_BALANCE = 1;\n\nconst OrderWithParam = ({ onCloseHandler, onSubmitHandler }) => {\n  const { loading, symbolList, curSymbol, userOrderParam, setOrderInfo } =\n    useFuturesOrderInfo();\n  // console.log(curSymbol, userOrderParam, setOrderInfo);\n  const {\n    modeRef,\n    directionRef,\n    leverageRef,\n    type,\n    price,\n    amount,\n    takeProfitRef,\n    stoplossRef,\n  } = userOrderParam[curSymbol];\n  // console.log(loading);\n  const [toast, addToast] = useState(0);\n  const toasterRef = useRef();\n  const refForm = useRef(null);\n  const [availBalance, $availBalance] = useState();\n  const [curSymbolMarkPrice, $curSymbolMarkPrice] = useState(\"---\");\n  const [curSymbolLastPrice, $curSymbolLastPrice] = useState(\"---\");\n  const [curSymbolPricePrecision, $curSymbolPricePrecision] = useState(0);\n  const [symbolInfo, $symbolInfo] = useState();\n\n  useEffect(() => {\n    // account info\n    (async function fetchAccountInfo() {\n      return await tr7TradingBot.fetchAccountInfo();\n    })().then((res) => {\n      const account = res.accounts[0];\n      $availBalance(Number(account.availableBalance).toFixed(2));\n    });\n  }, []);\n\n  useEffect(() => {\n    function fetchSymbolInfoInvoke() {\n      (async function fetchSymbolMarketInfo() {\n        return await tr7TradingBot.getSymbolMarketInfo(curSymbol);\n      })().then((res) => {\n        const symbolInfo = res.symbolMarketInfo;\n        $curSymbolMarkPrice(symbolInfo.markPrice);\n        $curSymbolLastPrice(symbolInfo.lastPrice);\n        $curSymbolPricePrecision(\n          symbolInfo.pricePrecision < 100 ? symbolInfo.pricePrecision : 0\n        );\n        $symbolInfo(symbolInfo);\n        console.log(symbolInfo);\n      });\n    }\n\n    fetchSymbolInfoInvoke();\n    if (!!curSymbol) {\n      const id = setInterval(fetchSymbolInfoInvoke, 2000);\n      return () => clearInterval(id);\n    }\n  }, [curSymbol]);\n\n  function newOrderSubmitHandler(event) {\n    event.preventDefault();\n    // validate form data\n    if (type === TYPE_LIMIT && !price) {\n      addToast(Toast(\"Type: Limit\", \"Price should be set (larger than zero)\"));\n      return;\n    }\n    // submit form data to server to place orders\n    // addToast(Toast(\"PLACE ORDER\", `submitting order...`));\n    (async function submitOrder() {\n      let order = {\n        symbol: curSymbol,\n        mode: modeRef,\n        side: directionRef,\n        leverage: leverageRef,\n        type: type,\n        amount: amount,\n        price: price,\n        tp: takeProfitRef,\n        sl: stoplossRef,\n        tpslPercentType: TYPE_PERCENT_PRICE,\n      };\n      if (type === TYPE_LIMIT && (order.tp || order.sl)) {\n        const levels = [];\n        levels.push([price, amount]);\n        const gridOrder = {\n          symbol: curSymbol,\n          mode: modeRef,\n          direction: directionRef,\n          leverage: leverageRef,\n          repeatTime: 1,\n          sizeUnit: \"USD\",\n          levels: [...levels],\n          takeProfit: {\n            trigger: \"mark\",\n            type: \"market\",\n            tpType: TYPE_PERCENT,\n            value: takeProfitRef,\n            percentType: TYPE_PERCENT_PRICE,\n          },\n          stopLoss: {\n            trigger: \"last\",\n            type: \"limit\",\n            slType: TYPE_PERCENT,\n            value: stoplossRef,\n            percentType: TYPE_PERCENT_PRICE,\n          },\n        };\n        console.log(\"gridOrder\", gridOrder);\n        return await tr7TradingBot.placeGridOrder(gridOrder);\n      } else {\n        return await tr7TradingBot.placeNewOrder(order);\n      }\n    })().then((res) => {\n      addToast(Toast(\"PLACE ORDER\", JSON.stringify(res)));\n      onCloseHandler();\n    });\n  }\n\n  function symbolChangeHandler(e) {\n    // console.log(symbolChangeHandler);\n    setOrderInfo(CUR_SYMBOL, e.target.value);\n  }\n\n  function levelPriceChangeHandler(e) {\n    setOrderInfo(PRICE, e.target.value);\n  }\n  function levelAmountChangeHandler(e) {\n    setOrderInfo(AMOUNT, e.target.value);\n  }\n  function typeChangeHandler(e) {\n    setOrderInfo(TYPE, e.target.value);\n  }\n  console.log(userOrderParam[curSymbol]);\n  if (loading || userOrderParam[curSymbol] === null) {\n    return <CSpinner color=\"info\" />;\n  } else {\n    return (\n      <>\n        <CToaster ref={toasterRef} push={toast} placement=\"top-end\"></CToaster>\n        <CForm ref={refForm} onSubmit={newOrderSubmitHandler}>\n          <CModalHeader>\n            <CModalTitle>Order w. Param</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            <CRow className=\"d-flex d-flex-row justify-content-around\">\n              <CCol xs={10} lg={4}>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText\n                    component=\"label\"\n                    htmlFor=\"inputSymbol\"\n                    className=\"\"\n                  >\n                    Symbol\n                  </CInputGroupText>\n                  <CFormSelect\n                    id=\"inputSymbol\"\n                    onChange={symbolChangeHandler}\n                    value={curSymbol}\n                  >\n                    {symbolList.map((symbol, index) => {\n                      return <option key={index}>{symbol}</option>;\n                    })}\n                  </CFormSelect>\n                </CInputGroup>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputMode\">\n                    Mode\n                  </CInputGroupText>\n                  <CFormSelect\n                    id=\"inputMode\"\n                    value={modeRef}\n                    onChange={(e) => {\n                      console.log(e.target.value);\n                      setOrderInfo(MODE, e.target.value);\n                    }}\n                  >\n                    <option>{MODE_ISOLATED}</option>\n                    <option>{MODE_CROSSED}</option>\n                  </CFormSelect>\n                </CInputGroup>\n\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputLeverage\">\n                    Leverage\n                  </CInputGroupText>\n                  <CFormInput\n                    type=\"number\"\n                    aria-label=\"leverage\"\n                    className=\"col-4\"\n                    id=\"inputLeverage\"\n                    min={1}\n                    max={50}\n                    value={leverageRef}\n                    onChange={(e) => setOrderInfo(LEVERAGE, e.target.value)}\n                  />\n                  <CInputGroupText component=\"label\">x</CInputGroupText>\n                </CInputGroup>\n                <CCallout color=\"primary\">\n                  <div>{`Available Balance`}</div>\n                  <div className=\"text-primary\">{`${availBalance} USDT`}</div>\n                </CCallout>\n              </CCol>\n              <CCol xs={10} lg={7}>\n                <CRow>\n                  <CCol>\n                    <CBadge color=\"info\">\n                      Mark Price:{\" \"}\n                      {Number(curSymbolMarkPrice).toFixed(\n                        curSymbolPricePrecision\n                      )}\n                    </CBadge>\n                  </CCol>\n                  <CCol>\n                    <CBadge color=\"warning\">\n                      Last Price:{\" \"}\n                      {Number(curSymbolLastPrice).toFixed(\n                        curSymbolPricePrecision\n                      )}\n                    </CBadge>\n                  </CCol>\n                </CRow>\n                <CRow className=\"my-2\">\n                  <CCol>\n                    <CInputGroup className=\"mb-2\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputSide\">\n                        Direction\n                      </CInputGroupText>\n                      <CFormSelect\n                        id=\"inputSide\"\n                        value={directionRef}\n                        onChange={(e) => {\n                          setOrderInfo(DIRECTION, e.target.value);\n                        }}\n                      >\n                        <option>{DIRECTION_LONG}</option>\n                        <option>{DIRECTION_SHORT}</option>\n                      </CFormSelect>\n                    </CInputGroup>\n                  </CCol>\n                  <CCol>\n                    <CInputGroup className=\"mb-2\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputSide\">\n                        Type\n                      </CInputGroupText>\n                      <CFormSelect\n                        id=\"inputType\"\n                        value={type}\n                        onChange={typeChangeHandler}\n                      >\n                        <option>{TYPE_LIMIT}</option>\n                        <option>{TYPE_MARKET}</option>\n                      </CFormSelect>\n                    </CInputGroup>\n                  </CCol>\n                </CRow>\n                <CInputGroup className=\"mt-1 mb-2 md-col-4\">\n                  <CInputGroup className=\"mb-0\">\n                    <CInputGroupText component=\"label\" htmlFor={\"price\"}>\n                      Price\n                    </CInputGroupText>\n                    <CFormInput\n                      type=\"number\"\n                      step=\"any\"\n                      placeholder=\"\"\n                      aria-label=\"price\"\n                      value={price}\n                      id={\"price\"}\n                      onChange={levelPriceChangeHandler}\n                      disabled={type === TYPE_MARKET}\n                    />\n\n                    <CInputGroupText component=\"label\" htmlFor={\"amout\"}>\n                      Amount\n                    </CInputGroupText>\n                    <CFormInput\n                      type=\"number\"\n                      step=\"any\"\n                      placeholder=\"\"\n                      aria-label=\"amount\"\n                      value={amount}\n                      id={\"amount\"}\n                      onChange={levelAmountChangeHandler}\n                    />\n                  </CInputGroup>\n                </CInputGroup>\n                <CRow className=\"my-2\">\n                  <CCol>\n                    <CInputGroup className=\"mb-1\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputTP\">\n                        TP\n                      </CInputGroupText>\n                      <CFormInput\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"Take Profit\"\n                        value={takeProfitRef}\n                        onChange={(e) =>\n                          setOrderInfo(TAKE_PROFIT, e.target.value)\n                        }\n                        id=\"inputTP\"\n                        // disabled={type === TYPE_LIMIT}\n                      />\n                      <CInputGroupText component=\"label\">\n                        % price\n                      </CInputGroupText>\n                    </CInputGroup>\n                  </CCol>\n                  <CCol>\n                    <CInputGroup className=\"mb-1\">\n                      <CInputGroupText\n                        className=\"\"\n                        component=\"label\"\n                        htmlFor=\"inputSL\"\n                      >\n                        SL\n                      </CInputGroupText>\n                      <CFormInput\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"stoploss percent\"\n                        value={stoplossRef}\n                        onChange={(e) =>\n                          setOrderInfo(STOP_LOSS, e.target.value)\n                        }\n                        id=\"inputSL\"\n                        // disabled={type === TYPE_LIMIT}\n                      />\n                      <CInputGroupText component=\"label\">\n                        % price\n                      </CInputGroupText>\n                    </CInputGroup>\n                  </CCol>\n                </CRow>\n              </CCol>\n            </CRow>\n          </CModalBody>\n          <CModalFooter>\n            <CButton color=\"secondary\" onClick={() => onCloseHandler()}>\n              Close\n            </CButton>\n            <CButton color=\"primary\" type=\"submit\">\n              Submit\n            </CButton>\n          </CModalFooter>\n        </CForm>\n      </>\n    );\n  }\n};\n\nexport default OrderWithParam;\n","import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport {\n  CRow,\n  CCol,\n  CButton,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CForm,\n  CFormSelect,\n  CInputGroup,\n  CInputGroupText,\n  CFormInput,\n  CBadge,\n  CSpinner,\n  CToaster,\n  CCallout,\n} from \"@coreui/react\";\nimport Toast from \"../Toast.js\";\n\nconst DEFAULT_SYMBOL = \"BTCUSDT\";\nconst DEFAULT_PROFIT_TARGET = \"30\";\nconst DEFAULT_LEVERAGE = \"5\";\nconst MODE_ISOLATED = \"Isolated\";\nconst MODE_CROSSED = \"Crossed\";\nconst DEFAULT_MODE = MODE_ISOLATED;\nconst DIRECTION_LONG = \"Long\";\nconst DIRECTION_SHORT = \"Short\";\nconst DEFAULT_DIRECTION = DIRECTION_SHORT;\nconst TYPE_MARKET = \"Market\";\nconst TYPE_LIMIT = \"Limit\";\nconst DEFAULT_TYPE = TYPE_MARKET;\nconst TP_THRESHOLD = 1;\nconst SL_THRESHOLD = 1;\nconst TYPE_PRICE = \"$\";\nconst TYPE_PERCENT = \"%\";\nconst TYPE_PERCENT_PRICE = 0;\nconst TYPE_PERCENT_BALANCE = 1;\n\nconst NewOrder = ({ onCloseHandler, onSubmitHandler }) => {\n  const [loading, $loading] = useState(true);\n  const [toast, addToast] = useState(0);\n  const toasterRef = useRef();\n  const refForm = useRef(null);\n  const [symbolList, $symbolList] = useState([]);\n  const directionRef = useRef(DEFAULT_DIRECTION);\n  const profitTargetRef = useRef(DEFAULT_PROFIT_TARGET);\n  const [availBalance, $availBalance] = useState();\n  const leverageRef = useRef(DEFAULT_LEVERAGE);\n  const modeRef = useRef(DEFAULT_MODE);\n  const [curSymbol, $curSymbol] = useState(DEFAULT_SYMBOL);\n  const [type, $type] = useState(DEFAULT_TYPE);\n  const [price, $price] = useState();\n  const [amount, $amount] = useState();\n  const [curSymbolMarkPrice, $curSymbolMarkPrice] = useState(\"---\");\n  const [curSymbolLastPrice, $curSymbolLastPrice] = useState(\"---\");\n  const [curSymbolPricePrecision, $curSymbolPricePrecision] = useState(0);\n  const takeProfitRef = useRef(null);\n  const stoplossRef = useRef(null);\n\n  function resetDefaultFormData() {\n    $price(\"\");\n    $amount(\"\");\n  }\n  function fetchSymbolInfo(symbol) {\n    (async function getSymbolInfo() {\n      return await tr7TradingBot.getSymbolInfo(symbol);\n    })().then((res) => {\n      const accSymInfo = res.symbolInfo;\n      modeRef.current.value =\n        accSymInfo.isolated === true ? MODE_ISOLATED : MODE_CROSSED;\n      leverageRef.current.value = accSymInfo.leverage;\n    });\n  }\n  // get futures symbol list\n  useEffect(() => {\n    (async function fetchSymbolList() {\n      return await tr7TradingBot.getSymbolList();\n    })().then((res) => {\n      const sortSymbols = res.symbols.sort();\n      $symbolList(sortSymbols);\n    });\n    // account info\n    (async function fetchAccountInfo() {\n      return await tr7TradingBot.fetchAccountInfo();\n    })().then((res) => {\n      const account = res.accounts[0];\n      $availBalance(Number(account.availableBalance).toFixed(2));\n    });\n  }, []);\n\n  useEffect(() => {\n    function fetchSymbolInfoInvoke() {\n      (async function fetchSymbolMarketInfo() {\n        return await tr7TradingBot.getSymbolMarketInfo(curSymbol);\n      })().then((res) => {\n        const symbolInfo = res.symbolMarketInfo;\n        $curSymbolMarkPrice(symbolInfo.markPrice);\n        $curSymbolLastPrice(symbolInfo.lastPrice);\n        $curSymbolPricePrecision(\n          symbolInfo.pricePrecision < 100 ? symbolInfo.pricePrecision : 0\n        );\n      });\n    }\n    fetchSymbolInfoInvoke();\n    fetchSymbolInfo(curSymbol);\n    $loading(false);\n\n    if (!!curSymbol) {\n      const id = setInterval(fetchSymbolInfoInvoke, 2000);\n      return () => clearInterval(id);\n    }\n  }, [curSymbol]);\n\n  function newOrderSubmitHandler(event) {\n    event.preventDefault();\n\n    // validate form data\n    if (type === TYPE_LIMIT && !price) {\n      addToast(Toast(\"Type: Limit\", \"Price should be set (larger than zero)\"));\n      return;\n    }\n    // if (takeProfitRef.current.value < TP_THRESHOLD) {\n    //   addToast(\n    //     Toast(\n    //       \"TAKE PROFIT\",\n    //       `Profit percent should be at least ${TP_THRESHOLD}%`\n    //     )\n    //   );\n    // }\n    // if (takeProfitRef.current.value < SL_THRESHOLD) {\n    //   addToast(\n    //     Toast(\"STOP LOSS\", `Profit percent should be at least ${SL_THRESHOLD}%`)\n    //   );\n    // }\n\n    // submit form data to server to place orders\n\n    // addToast(Toast(\"PLACE ORDER\", `submitting order...`));\n    (async function submitOrder() {\n      let order = {\n        symbol: curSymbol,\n        mode: modeRef.current.value,\n        side: directionRef.current.value,\n        leverage: leverageRef.current.value,\n        type: type,\n        amount: amount,\n        price: price,\n        tp: takeProfitRef.current.value,\n        sl: stoplossRef.current.value,\n        tpslPercentType: TYPE_PERCENT_BALANCE,\n      };\n      if (type === TYPE_LIMIT && (order.tp || order.sl)) {\n        const levels = [];\n        levels.push([price, amount]);\n        const gridOrder = {\n          symbol: curSymbol,\n          mode: modeRef.current.value,\n          direction: directionRef.current.value,\n          leverage: leverageRef.current.value,\n          repeatTime: 1,\n          sizeUnit: \"USD\",\n          levels: [...levels],\n          takeProfit: {\n            trigger: \"mark\",\n            type: \"market\",\n            tpType: TYPE_PERCENT,\n            value: takeProfitRef.current.value,\n            percentType: TYPE_PERCENT_BALANCE,\n          },\n          stopLoss: {\n            trigger: \"last\",\n            type: \"limit\",\n            slType: TYPE_PERCENT,\n            value: stoplossRef.current.value,\n            percentType: TYPE_PERCENT_BALANCE,\n          },\n        };\n        console.log(\"gridOrder\", gridOrder);\n        return await tr7TradingBot.placeGridOrder(gridOrder);\n      } else {\n        return await tr7TradingBot.placeNewOrder(order);\n      }\n    })().then((res) => {\n      addToast(Toast(\"PLACE ORDER\", JSON.stringify(res)));\n      onCloseHandler();\n    });\n  }\n\n  function symbolChangeHandler(e) {\n    $curSymbol(e.target.value);\n    resetDefaultFormData();\n  }\n\n  function levelPriceChangeHandler(e) {\n    $price(Number(e.target.value));\n  }\n  function levelAmountChangeHandler(e) {\n    $amount(Number(e.target.value));\n  }\n  function typeChangeHandler(e) {\n    $type(e.target.value);\n  }\n\n  if (loading) {\n    return <CSpinner color=\"info\" />;\n  } else {\n    return (\n      <>\n        <CToaster ref={toasterRef} push={toast} placement=\"top-end\"></CToaster>\n        <CForm ref={refForm} onSubmit={newOrderSubmitHandler}>\n          <CModalHeader>\n            <CModalTitle>New Order</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            <CRow className=\"d-flex d-flex-row justify-content-around\">\n              <CCol xs={10} lg={4}>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText\n                    component=\"label\"\n                    htmlFor=\"inputSymbol\"\n                    className=\"\"\n                  >\n                    Symbol\n                  </CInputGroupText>\n                  <CFormSelect\n                    id=\"inputSymbol\"\n                    onChange={symbolChangeHandler}\n                    value={curSymbol}\n                  >\n                    {symbolList.map((symbol, index) => {\n                      return <option key={index}>{symbol}</option>;\n                    })}\n                  </CFormSelect>\n                </CInputGroup>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputMode\">\n                    Mode\n                  </CInputGroupText>\n                  <CFormSelect\n                    ref={modeRef}\n                    id=\"inputMode\"\n                    defaultValue={DEFAULT_MODE}\n                  >\n                    <option>{MODE_ISOLATED}</option>\n                    <option>{MODE_CROSSED}</option>\n                  </CFormSelect>\n                </CInputGroup>\n\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputLeverage\">\n                    Leverage\n                  </CInputGroupText>\n                  <CFormInput\n                    ref={leverageRef}\n                    type=\"number\"\n                    aria-label=\"profit target\"\n                    className=\"col-4\"\n                    defaultValue={DEFAULT_LEVERAGE}\n                    id=\"inputLeverage\"\n                  />\n                  <CInputGroupText component=\"label\">x</CInputGroupText>\n                </CInputGroup>\n                <CCallout color=\"primary\">\n                  <div>{`Available Balance`}</div>\n                  <div className=\"text-primary\">{`${availBalance} USDT`}</div>\n                </CCallout>\n              </CCol>\n              <CCol xs={10} lg={7}>\n                <CRow>\n                  <CCol>\n                    <CBadge color=\"info\">\n                      Mark Price:{\" \"}\n                      {Number(curSymbolMarkPrice).toFixed(\n                        curSymbolPricePrecision\n                      )}\n                    </CBadge>\n                  </CCol>\n                  <CCol>\n                    <CBadge color=\"warning\">\n                      Last Price:{\" \"}\n                      {Number(curSymbolLastPrice).toFixed(\n                        curSymbolPricePrecision\n                      )}\n                    </CBadge>\n                  </CCol>\n                </CRow>\n                <CInputGroup className=\"mt-1 mb-2 md-col-4\">\n                  {/* <CRow> */}\n                  <CCol xs={7} lg={6} className=\"mr-2\">\n                    <CInputGroup className=\"mb-2\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputSide\">\n                        Direction\n                      </CInputGroupText>\n                      <CFormSelect\n                        id=\"inputSide\"\n                        ref={directionRef}\n                        defaultValue={DEFAULT_DIRECTION}\n                      >\n                        <option>{DIRECTION_LONG}</option>\n                        <option>{DIRECTION_SHORT}</option>\n                      </CFormSelect>\n                    </CInputGroup>\n                  </CCol>\n                  <CCol xs={7} lg={5}>\n                    <CInputGroup className=\"mb-2\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputSide\">\n                        Type\n                      </CInputGroupText>\n                      <CFormSelect\n                        id=\"inputType\"\n                        value={type}\n                        onChange={typeChangeHandler}\n                      >\n                        <option>{TYPE_LIMIT}</option>\n                        <option>{TYPE_MARKET}</option>\n                      </CFormSelect>\n                    </CInputGroup>\n                  </CCol>\n                  {/* </CRow> */}\n\n                  <CInputGroup className=\"mb-0\" size=\"md\">\n                    <CInputGroupText component=\"label\" htmlFor={\"price\"}>\n                      Price\n                    </CInputGroupText>\n                    <CFormInput\n                      type=\"number\"\n                      step=\"any\"\n                      placeholder=\"\"\n                      aria-label=\"price\"\n                      defaultValue=\"\"\n                      // value={price}\n                      id={\"price\"}\n                      onChange={levelPriceChangeHandler}\n                      disabled={type === TYPE_MARKET}\n                    />\n\n                    <CInputGroupText component=\"label\" htmlFor={\"amout\"}>\n                      Amount\n                    </CInputGroupText>\n                    <CFormInput\n                      type=\"number\"\n                      step=\"any\"\n                      placeholder=\"\"\n                      aria-label=\"amount\"\n                      defaultValue=\"\"\n                      id={\"amount\"}\n                      onChange={levelAmountChangeHandler}\n                    />\n                  </CInputGroup>\n                </CInputGroup>\n                <CRow className=\"my-2\">\n                  <CCol>\n                    <CInputGroup className=\"mb-1\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputTP\">\n                        TP\n                      </CInputGroupText>\n                      <CFormInput\n                        ref={takeProfitRef}\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"Take Profit\"\n                        // className=\"col-4\"\n                        defaultValue=\"\"\n                        id=\"inputTP\"\n                        // disabled={type === TYPE_LIMIT}\n                      />\n                      <CInputGroupText component=\"label\">\n                        % marg.\n                      </CInputGroupText>\n                    </CInputGroup>\n                  </CCol>\n                  <CCol>\n                    <CInputGroup className=\"mb-1\">\n                      <CInputGroupText\n                        className=\"\"\n                        component=\"label\"\n                        htmlFor=\"inputSL\"\n                      >\n                        SL\n                      </CInputGroupText>\n                      <CFormInput\n                        ref={stoplossRef}\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"stoploss percent\"\n                        // className=\"col-4\"\n                        defaultValue=\"\"\n                        id=\"inputSL\"\n                        // disabled={type === TYPE_LIMIT}\n                      />\n                      <CInputGroupText component=\"label\">\n                        % marg.\n                      </CInputGroupText>\n                    </CInputGroup>\n                  </CCol>\n                </CRow>\n              </CCol>\n            </CRow>\n          </CModalBody>\n          <CModalFooter>\n            <CButton color=\"secondary\" onClick={() => onCloseHandler()}>\n              Close\n            </CButton>\n            <CButton color=\"primary\" type=\"submit\">\n              Submit\n            </CButton>\n          </CModalFooter>\n        </CForm>\n      </>\n    );\n  }\n};\n\nexport default NewOrder;\n","import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport Toast from \"../Toast.js\";\nimport {\n  CRow,\n  CCol,\n  CButton,\n  CModalHeader,\n  CModalTitle,\n  CModalBody,\n  CModalFooter,\n  CForm,\n  CFormSelect,\n  CInputGroup,\n  CInputGroupText,\n  CFormInput,\n  CBadge,\n  CSpinner,\n  CToaster,\n  CCallout,\n  CFormSwitch,\n  CFormLabel,\n} from \"@coreui/react\";\n\nconst SIZE_UNIT_USD = \"USD\";\nconst SIZE_UNIT_COIN = \"COIN\";\nconst TYPE_PRICE = \"$\";\nconst TYPE_PERCENT = \"%\";\nconst TYPE_PERCENT_PRICE = 0;\nconst TYPE_PERCENT_BALANCE = 1;\n\nconst DEFAULT_MAX_BALANCE = \"1000\";\nconst DEFAULT_REPEAT_TIME = 1;\nconst DEFAULT_NO_LEVEL = 5;\nconst DEFAULT_SYMBOL = \"BTCUSDT\";\nconst DEFAULT_PROFIT_TARGET = \"30\";\nconst DEFAULT_LEVERAGE = \"5\";\nconst DEFAULT_SIZE_UNIT = SIZE_UNIT_USD;\nconst MODE_ISOLATED = \"Isolated\";\nconst MODE_CROSSED = \"Crossed\";\nconst DEFAULT_MODE = MODE_ISOLATED;\nconst DIRECTION_LONG = \"Long\";\nconst DIRECTION_SHORT = \"Short\";\nconst DEFAULT_DIRECTION = DIRECTION_SHORT;\nconst TYPE_MARKET = \"Market\";\nconst TYPE_LIMIT = \"Limit\";\nconst DEFAULT_TYPE = TYPE_MARKET;\nconst TP_THRESHOLD = 1;\nconst SL_THRESHOLD = 1;\n\nconst NewMultiOrder = ({ onCloseHandler, onSubmitHandler }) => {\n  const [loading, $loading] = useState(true);\n  const [toast, addToast] = useState(0);\n  const toasterRef = useRef();\n  const refForm = useRef(null);\n  const [symbolList, $symbolList] = useState([]);\n  const directionRef = useRef(DEFAULT_DIRECTION);\n  const profitTargetRef = useRef(DEFAULT_PROFIT_TARGET);\n  const leverageRef = useRef(DEFAULT_LEVERAGE);\n  const modeRef = useRef(DEFAULT_MODE);\n  const [availBalance, $availBalance] = useState();\n  const [curSymbol, $curSymbol] = useState(DEFAULT_SYMBOL);\n  const [curSymbolInfo, $curSymbolInfo] = useState();\n  const [repeatTime, $repeatTime] = useState(DEFAULT_REPEAT_TIME);\n  const [numberLevels, $numberLevels] = useState(DEFAULT_NO_LEVEL);\n  const [sizeUnit, $sizeUnit] = useState(DEFAULT_SIZE_UNIT);\n  const [prices, $prices] = useState(Array(DEFAULT_NO_LEVEL));\n  const [sizes, $sizes] = useState(Array(DEFAULT_NO_LEVEL));\n  const [amounts, $amounts] = useState(Array(DEFAULT_NO_LEVEL));\n  const [totalSize, $totalSize] = useState(null);\n  const [averagePrice, $averagePrice] = useState(null);\n  const [curSymbolMarkPrice, $curSymbolMarkPrice] = useState(\"---\");\n  const [curSymbolLastPrice, $curSymbolLastPrice] = useState(\"---\");\n  const [curSymbolPricePrecision, $curSymbolPricePrecision] = useState(0);\n  const [curSymbolMinUSDSize, $curSymbolMinUSDSize] = useState(\"--\");\n  const [curSymbolMinCoinSize, $curSymbolMinCoinSize] = useState(\"--\");\n  const [takeprofitType, $takeprofitType] = useState(TYPE_PERCENT);\n  const takeProfitRef = useRef(null);\n  const [stoplossType, $stoplossType] = useState(TYPE_PERCENT);\n  const stoplossRef = useRef(null);\n  const [timerId, $timerId] = useState();\n\n  function resetDefaultFormData() {\n    $numberLevels(DEFAULT_NO_LEVEL);\n    $prices(new Array(DEFAULT_NO_LEVEL));\n    $sizes(new Array(DEFAULT_NO_LEVEL));\n  }\n\n  // get futures symbol list\n  useEffect(() => {\n    (async function fetchSymbolList() {\n      const res = await tr7TradingBot.getSymbolList();\n      const sortSymbols = res.symbols.sort();\n      $symbolList(sortSymbols);\n    })();\n    // account info\n    (async function fetchAccountInfo() {\n      const res = await tr7TradingBot.fetchAccountInfo();\n      const account = res.accounts[0];\n      $availBalance(Number(account.availableBalance).toFixed(2));\n    })();\n  }, []);\n\n  useEffect(() => {\n    function fetchSymbolInfo(symbol) {\n      (async function getSymbolInfo() {\n        const res = await tr7TradingBot.getSymbolInfo(symbol);\n        const accSymInfo = res.symbolInfo;\n        // console.log(\"res\", res);\n        modeRef.current.value =\n          accSymInfo.isolated === true ? MODE_ISOLATED : MODE_CROSSED;\n        leverageRef.current.value = accSymInfo.leverage;\n        $curSymbolInfo(accSymInfo);\n      })();\n    }\n    function fetchSymbolInfoInvoke() {\n      (async function () {\n        const res = await tr7TradingBot.getSymbolMarketInfo(curSymbol);\n        // console.log(\"getSymbolMarketInfo\", res);\n        const symbolInfo = res.symbolMarketInfo;\n        $curSymbolMarkPrice(symbolInfo.markPrice);\n        $curSymbolLastPrice(symbolInfo.lastPrice);\n        // console.log(symbolInfo.pricePrecision);\n        $curSymbolPricePrecision(\n          symbolInfo.pricePrecision < 100 ? symbolInfo.pricePrecision : 0\n        );\n      })();\n    }\n    // invoke\n    fetchSymbolInfoInvoke();\n    fetchSymbolInfo(curSymbol);\n\n    $loading(false);\n\n    if (!!curSymbol) {\n      const id = setInterval(fetchSymbolInfoInvoke, 2000);\n      $timerId(id);\n      return () => clearInterval(id);\n    }\n  }, [curSymbol]);\n  //\n  function roundAmount(qty, stepSize) {\n    // Integers do not require rounding\n    if (Number.isInteger(qty)) return qty;\n\n    const qtyString = parseFloat(qty).toFixed(16);\n    const desiredDecimals = Math.max(stepSize.indexOf(\"1\") - 1, 0);\n    const decimalIndex = qtyString.indexOf(\".\");\n    const floatAmount = parseFloat(\n      qtyString.slice(0, decimalIndex + desiredDecimals + 1)\n    );\n    // console.log(\"floatAmount\", floatAmount);\n    return floatAmount;\n  }\n  useEffect(() => {\n    if (!curSymbolInfo) return;\n\n    // Set minimum order amount with minQty\n    let amount = curSymbolInfo.minQty;\n    // Set minimum order amount with minNotional\n    if (curSymbolLastPrice * amount < curSymbolInfo.minNotional) {\n      amount = curSymbolInfo.minNotional / curSymbolLastPrice;\n    }\n    // console.log(\"amount\", amount, \"curSymbolInfo\", curSymbolInfo);\n    amount = roundAmount(amount, curSymbolInfo.stepSize);\n    if (amount * curSymbolLastPrice < curSymbolInfo.minNotional) {\n      amount += parseFloat(curSymbolInfo.stepSize);\n    }\n    //\n    let minUsdSize = amount * curSymbolLastPrice;\n    $curSymbolMinUSDSize(minUsdSize);\n    $curSymbolMinCoinSize(amount);\n  }, [curSymbolLastPrice, curSymbolInfo]);\n\n  function printoutAmounts(price, amount) {\n    if (price > 0 && amount > 0 && curSymbolInfo.stepSize) {\n      let amt = roundAmount(amount, curSymbolInfo.stepSize);\n      const usdSize = (amt * price).toFixed(curSymbolPricePrecision);\n      return `~${amt}/${usdSize}$`;\n    }\n  }\n\n  // calculate again average price, if both level price and amount are present\n  useEffect(() => {\n    let avgPrice = 0;\n    let totalAmount = 0;\n    let totalSize = 0;\n    let totalBalanceSize = 0;\n    const list = prices.slice(0, numberLevels);\n    let amounts = [];\n    list.forEach((price, index) => {\n      const size = sizes[index];\n      if (price > 0 && size > 0) {\n        //\n        let tempAmount = size;\n        if (sizeUnit === SIZE_UNIT_USD) {\n          let amount = size / price;\n          tempAmount = roundAmount(amount, curSymbolInfo.stepSize);\n        }\n        amounts[index] = tempAmount;\n        //\n        totalSize += tempAmount * price;\n        totalAmount += tempAmount;\n        totalBalanceSize += tempAmount * price;\n      }\n    });\n    // const rawAvgPrice = totalBalanceSize / totalAmount;\n    totalSize = totalSize.toFixed(curSymbolPricePrecision);\n    avgPrice = (totalBalanceSize / totalAmount).toFixed(\n      curSymbolPricePrecision\n    );\n    $amounts((curAmounts) => {\n      const tempAmounts = [...amounts];\n      return tempAmounts;\n    });\n    $averagePrice(avgPrice);\n    $totalSize(totalSize);\n  }, [prices, sizes, numberLevels]);\n\n  function submitNewTradeHandler(event) {\n    event.preventDefault();\n    //\n    clearInterval(timerId);\n    // validate form data\n    // console.log(curSymbol);\n    // console.log(directionRef.current.value, profitTargetRef.current.value);\n    // console.log(modeRef.current.value, leverageRef.current.value);\n    // console.log(prices, sizes);\n    // console.log(takeProfitRef.current.value, stoplossRef.current.value);\n    // submit form data to server to place orders\n    // addToast(Toast(\"PLACE ORDER\", `submitting order...`));\n    (async function submitGridOrder() {\n      const levels = [];\n      const listPrices = prices.slice(0, numberLevels);\n      listPrices.forEach((price, index) => {\n        const size = sizes[index];\n        const amount = amounts[index];\n        if (price > 0 && size > 0) {\n          levels.push([price, size, amount]);\n        }\n      });\n      const gridOrder = {\n        symbol: curSymbol,\n        mode: modeRef.current.value,\n        direction: directionRef.current.value,\n        leverage: leverageRef.current.value,\n        repeatTime: repeatTime,\n        sizeUnit: sizeUnit,\n        levels: [...levels],\n        takeProfit: {\n          trigger: \"mark\",\n          type: \"market\",\n          tpType: takeprofitType,\n          value: takeProfitRef.current.value,\n          percentType: TYPE_PERCENT_BALANCE,\n        },\n        stopLoss: {\n          trigger: \"last\",\n          type: \"limit\",\n          slType: stoplossType,\n          value: stoplossRef.current.value,\n          percentType: TYPE_PERCENT_BALANCE,\n        },\n      };\n      // console.log(gridOrder);\n      return await tr7TradingBot.placeGridOrder(gridOrder);\n    })().then((res) => {\n      // console.log(res);\n      addToast(Toast(\"PLACE ORDER\", JSON.stringify(res)));\n      onCloseHandler();\n    });\n  }\n\n  function symbolChangeHandler(e) {\n    // $loading(true);\n    $curSymbol(e.target.value);\n    resetDefaultFormData();\n  }\n  function inputRepeatTimeChangeHandler(e) {\n    $repeatTime(e.target.value);\n  }\n  function inputLevelsChangeHandler(e) {\n    $numberLevels(e.target.value);\n  }\n  function sizeUnitClickHandler(e) {\n    // console.log(e.target.value);\n    const curUnit = sizeUnit;\n    if (e.target.value === \"on\") {\n      e.target.value = \"off\";\n    } else {\n      e.target.value = \"on\";\n    }\n    $sizeUnit(e.target.value === \"on\" ? SIZE_UNIT_USD : SIZE_UNIT_COIN);\n    let tempSizes = [...sizes];\n    sizes.forEach((size, index) => {\n      if (prices[index] > 0 && size > 0) {\n        // convert to coin\n        if (curUnit === SIZE_UNIT_USD) {\n          tempSizes[index] = size / prices[index];\n        } else {\n          tempSizes[index] = size * prices[index];\n        }\n      }\n    });\n    $sizes(() => tempSizes);\n  }\n\n  function levelPriceChangeHandler(e) {\n    const index = Number(e.target.id.replace(\"price\", \"\"));\n    $prices((curPrices) => {\n      const tempPrices = [...curPrices];\n      tempPrices[index] = Number(e.target.value);\n      return tempPrices;\n    });\n  }\n  function levelAmountChangeHandler(e) {\n    const index = Number(e.target.id.replace(\"amount\", \"\"));\n    $sizes((curSizes) => {\n      const tempSizes = [...curSizes];\n      tempSizes[index] = Number(e.target.value);\n      return tempSizes;\n    });\n  }\n\n  if (loading) {\n    return <CSpinner color=\"info\" />;\n  } else {\n    return (\n      <>\n        <CToaster ref={toasterRef} push={toast} placement=\"top-end\"></CToaster>\n        <CForm ref={refForm} onSubmit={submitNewTradeHandler}>\n          <CModalHeader>\n            <CModalTitle>New Multi-Level Order</CModalTitle>\n          </CModalHeader>\n          <CModalBody>\n            <CRow className=\"d-flex d-flex-row justify-content-around\">\n              <CCol xs={10} lg={4}>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText\n                    component=\"label\"\n                    htmlFor=\"inputSymbol\"\n                    className=\"\"\n                  >\n                    Symbol\n                  </CInputGroupText>\n                  <CFormSelect\n                    id=\"inputSymbol\"\n                    onChange={symbolChangeHandler}\n                    value={curSymbol}\n                  >\n                    {symbolList.map((symbol, index) => {\n                      return (\n                        <option\n                          key={index}\n                          // selected={symbol === DEFAULT_SYMBOL ? true : false}\n                        >\n                          {symbol}\n                        </option>\n                      );\n                    })}\n                  </CFormSelect>\n                </CInputGroup>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputMode\">\n                    Mode\n                  </CInputGroupText>\n                  <CFormSelect\n                    ref={modeRef}\n                    id=\"inputMode\"\n                    defaultValue={DEFAULT_MODE}\n                  >\n                    <option>{MODE_ISOLATED}</option>\n                    <option>{MODE_CROSSED}</option>\n                  </CFormSelect>\n                </CInputGroup>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputLeverage\">\n                    Leverage\n                  </CInputGroupText>\n                  <CFormInput\n                    ref={leverageRef}\n                    type=\"number\"\n                    // placeholder=\"5\"\n                    aria-label=\"profit target\"\n                    className=\"col-4\"\n                    defaultValue={DEFAULT_LEVERAGE}\n                    id=\"inputLeverage\"\n                  />\n                  <CInputGroupText component=\"label\">x</CInputGroupText>\n                </CInputGroup>\n                <CInputGroup className=\"mb-2\">\n                  <CInputGroupText component=\"label\" htmlFor=\"inputSide\">\n                    Direction\n                  </CInputGroupText>\n                  <CFormSelect\n                    id=\"inputSide\"\n                    ref={directionRef}\n                    defaultValue={DEFAULT_DIRECTION}\n                  >\n                    <option>{DIRECTION_LONG}</option>\n                    <option>{DIRECTION_SHORT}</option>\n                  </CFormSelect>\n                </CInputGroup>\n                {/* <CInputGroup className=\"mb-2\">\n              <CInputGroupText component=\"label\" htmlFor=\"inputTargetProfit\">\n                Profit Target\n              </CInputGroupText>\n              <CFormInput\n                ref={profitTargetRef}\n                type=\"number\"\n                // placeholder=\"10\"\n                aria-label=\"profit target\"\n                className=\"col-4\"\n                defaultValue={DEFAULT_PROFIT_TARGET}\n                id=\"inputTargetProfit\"\n              />\n              <CInputGroupText component=\"label\">%</CInputGroupText>\n            </CInputGroup> */}\n                <CCallout color=\"primary\">\n                  <div>{`Available Balance`}</div>\n                  <div className=\"text-primary\">{`${availBalance} USDT`}</div>\n                </CCallout>\n              </CCol>\n              <CCol xs={10} lg={7}>\n                <CRow>\n                  <CCol xs={4}>\n                    <CBadge color=\"info\">\n                      Mark Price:{\" \"}\n                      {Number(curSymbolMarkPrice).toFixed(\n                        curSymbolPricePrecision\n                      )}\n                    </CBadge>\n                  </CCol>\n                  <CCol xs={4}>\n                    <CBadge color=\"warning\">\n                      Last Price:{\" \"}\n                      {Number(curSymbolLastPrice).toFixed(\n                        curSymbolPricePrecision\n                      )}\n                    </CBadge>\n                  </CCol>\n                  <CCol xs={4}>\n                    <CFormSwitch\n                      label={sizeUnit}\n                      id=\"sizeUnit\"\n                      defaultChecked\n                      onClick={sizeUnitClickHandler}\n                    />\n                    <CFormLabel>{`Min. ${curSymbolMinCoinSize}/${Number(\n                      curSymbolMinUSDSize\n                    ).toFixed(curSymbolPricePrecision)}$`}</CFormLabel>\n                  </CCol>\n                </CRow>\n                <CInputGroup className=\"mt-1 mb-2 md-col-4\">\n                  <CRow className=\"my-2\">\n                    <CCol>\n                      <CInputGroup className=\"mb-0\">\n                        <CInputGroupText\n                          component=\"label\"\n                          htmlFor=\"inputLevels\"\n                        >\n                          Repeat\n                        </CInputGroupText>\n                        <CFormInput\n                          type=\"number\"\n                          placeholder={repeatTime}\n                          aria-label=\"\"\n                          // defaultValue={numberLevels}\n                          value={repeatTime}\n                          id=\"reapeatTime\"\n                          onChange={inputRepeatTimeChangeHandler}\n                        />\n                      </CInputGroup>\n                    </CCol>\n                    <CCol>\n                      <CInputGroup className=\"mb-0\">\n                        <CInputGroupText\n                          component=\"label\"\n                          htmlFor=\"inputLevels\"\n                        >\n                          Levels\n                        </CInputGroupText>\n                        <CFormInput\n                          type=\"number\"\n                          // delay={true}\n                          placeholder={numberLevels}\n                          aria-label=\"\"\n                          // defaultValue={numberLevels}\n                          value={numberLevels}\n                          id=\"inputLevels\"\n                          onChange={inputLevelsChangeHandler}\n                        />\n                      </CInputGroup>\n                    </CCol>\n                  </CRow>\n\n                  {!!numberLevels &&\n                    sizes &&\n                    Array.from({ length: numberLevels }).map((level, index) => {\n                      return (\n                        <CInputGroup className=\"mb-0\" key={index} size=\"sm\">\n                          <CInputGroupText\n                            component=\"label\"\n                            htmlFor={\"price\" + index}\n                          >\n                            Price {index + 1}\n                          </CInputGroupText>\n                          <CFormInput\n                            type=\"number\"\n                            step=\"any\"\n                            placeholder=\"\"\n                            aria-label=\"price\"\n                            defaultValue=\"\"\n                            // value={prices[index]}\n                            id={\"price\" + index}\n                            onChange={levelPriceChangeHandler}\n                          />\n\n                          <CInputGroupText\n                            component=\"label\"\n                            htmlFor={\"amout\" + index}\n                          >\n                            Size {index + 1}\n                          </CInputGroupText>\n                          <CFormInput\n                            type=\"number\"\n                            step=\"any\"\n                            placeholder=\"\"\n                            aria-label=\"amount\"\n                            // defaultValue=\"\"\n                            id={\"amount\" + index}\n                            onChange={levelAmountChangeHandler}\n                            value={sizes[index]}\n                          />\n\n                          <CInputGroupText\n                            className=\"text-info\"\n                            component=\"label\"\n                            htmlFor={\"price\" + index}\n                          >\n                            {printoutAmounts(prices[index], amounts[index])}\n                          </CInputGroupText>\n                        </CInputGroup>\n                      );\n                    })}\n                </CInputGroup>\n                <CRow>\n                  <CCol xs={4}>\n                    <CBadge color=\"danger\">Avg Price: {averagePrice}$</CBadge>\n                  </CCol>\n                  <CCol xs={4}>\n                    <CBadge color=\"warning\">Total Size: {totalSize}$</CBadge>\n                  </CCol>\n                  <CCol xs={4}>\n                    <CBadge color=\"warning\">\n                      Balance:{\" \"}\n                      {(totalSize / leverageRef.current.value).toFixed(2)}$\n                    </CBadge>\n                  </CCol>\n                </CRow>\n                <CRow className=\"my-2\">\n                  <CCol>\n                    <CInputGroup className=\"mb-1\">\n                      <CInputGroupText component=\"label\" htmlFor=\"inputTP\">\n                        TP\n                      </CInputGroupText>\n                      <CFormInput\n                        ref={takeProfitRef}\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"Take Profit\"\n                        // className=\"col-4\"\n                        defaultValue=\"\"\n                        id=\"inputTP\"\n                      />\n                      <CButton\n                        onClick={() =>\n                          $takeprofitType(\n                            takeprofitType === TYPE_PERCENT\n                              ? TYPE_PRICE\n                              : TYPE_PERCENT\n                          )\n                        }\n                      >\n                        {takeprofitType}\n                      </CButton>\n                    </CInputGroup>\n                  </CCol>\n                  <CCol>\n                    <CInputGroup className=\"mb-1\">\n                      <CInputGroupText\n                        className=\"\"\n                        component=\"label\"\n                        htmlFor=\"inputSL\"\n                      >\n                        SL\n                      </CInputGroupText>\n                      <CFormInput\n                        ref={stoplossRef}\n                        type=\"number\"\n                        placeholder=\"\"\n                        aria-label=\"stoploss percent\"\n                        // className=\"col-4\"\n                        defaultValue=\"\"\n                        id=\"inputSL\"\n                      />\n                      <CButton\n                        onClick={() =>\n                          $stoplossType(\n                            stoplossType === TYPE_PERCENT\n                              ? TYPE_PRICE\n                              : TYPE_PERCENT\n                          )\n                        }\n                      >\n                        {stoplossType}\n                      </CButton>\n                    </CInputGroup>\n                  </CCol>\n                </CRow>\n              </CCol>\n            </CRow>\n          </CModalBody>\n          <CModalFooter>\n            <CButton color=\"secondary\" onClick={() => onCloseHandler}>\n              Close\n            </CButton>\n            <CButton color=\"primary\" type=\"submit\">\n              Submit\n            </CButton>\n          </CModalFooter>\n        </CForm>\n      </>\n    );\n  }\n};\n\nexport default NewMultiOrder;\n","import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport {\n  CRow,\n  CCol,\n  CSpinner,\n  CModal,\n  CCard,\n  CCardHeader,\n  CCardBody,\n} from \"@coreui/react\";\nimport Positions from \"./Positions.js\";\nimport Orders from \"./Orders.js\";\nimport OrderWithParam from \"../../components/Trade/OrderWithSaveParam.js\";\nimport NewOrder from \"../../components/Trade/NewOrder.js\";\nimport NewMultiOrder from \"../../components/Trade/NewMultiLevelOrder.js\";\n\nconst ManualGrid = () => {\n  const [response, $response] = useState(null);\n  const [newMarketOrderVisible, $newMarketOrderVisible] = useState(false);\n  const [newTradeVisible, $newTradeVisible] = useState(false);\n  const [newMultiOrderVisible, $newMultiOrderVisible] = useState(false);\n\n  // pull all current trades, then laying out as separated as symbol with the button to close position\n  async function fetchSomeBotData() {\n    const response = await tr7TradingBot.getPositions();\n    // console.log(\"tr7TradingBot.getPositions\", response);\n    return response;\n  }\n  useEffect(() => {\n    fetchSomeBotData().then((resp) => $response(resp));\n    const id = setInterval(() => {\n      fetchSomeBotData().then((resp) => $response(resp));\n    }, 2000);\n\n    return () => clearInterval(id);\n  }, []);\n\n  function newTradeHandler(e) {\n    $newTradeVisible(true);\n  }\n  function newMultiLevelOrderHandler(e) {\n    $newMultiOrderVisible(true);\n  }\n  function compare(a, b) {\n    if (a.symbol < b.symbol) {\n      return -1;\n    }\n    if (a.symbol > b.symbol) {\n      return 1;\n    }\n    return 0;\n  }\n\n  const openOrders = response?.openOrders;\n  if (!response) {\n    return <CSpinner color=\"info\" />;\n  } else if (response.success === false) {\n    return (\n      <>\n        <h1>Manual Trade</h1>\n        <p>{response.message}</p>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <CRow>\n          <div className=\"d-flex flex-row justify-content-between align-items-center mb-4\">\n            {/* <h1>Manual Trade</h1> */}\n            <div className=\"d-inline-flex justify-content-between align-items-center\">\n              <button\n                onClick={() => $newMarketOrderVisible(true)}\n                className=\"btn btn-warning mx-2\"\n              >\n                Order w. Param\n              </button>\n              <CModal\n                size=\"lg\"\n                alignment=\"center\"\n                visible={newMarketOrderVisible}\n                onClose={() => $newMarketOrderVisible(false)}\n              >\n                <OrderWithParam\n                  onCloseHandler={() => $newMarketOrderVisible(false)}\n                />\n              </CModal>\n              <button\n                onClick={newTradeHandler}\n                className=\"btn btn-warning mx-2\"\n              >\n                New Order\n              </button>\n              <CModal\n                size=\"lg\"\n                alignment=\"center\"\n                visible={newTradeVisible}\n                onClose={() => $newTradeVisible(false)}\n              >\n                <NewOrder onCloseHandler={() => $newTradeVisible(false)} />\n              </CModal>\n              <button\n                onClick={newMultiLevelOrderHandler}\n                className=\"btn btn-warning mx-2\"\n              >\n                New Multi-Level Order\n              </button>\n              <CModal\n                size=\"lg\"\n                alignment=\"center\"\n                visible={newMultiOrderVisible}\n                onClose={() => $newMultiOrderVisible(false)}\n              >\n                <NewMultiOrder\n                  onCloseHandler={() => $newMultiOrderVisible(false)}\n                />\n              </CModal>\n            </div>\n          </div>\n        </CRow>\n        {Array.isArray(response.positions) && (\n          <Positions\n            positions={response.positions.sort(compare)}\n            isClose={true}\n          />\n        )}\n        {Array.isArray(openOrders) && <Orders openOrders={openOrders} />}\n      </>\n    );\n  }\n};\n\nexport default ManualGrid;\n","import React, { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport classNames from \"classnames\";\nimport {\n  CBadge,\n  CButton,\n  CTableRow,\n  CTableDataCell,\n  CInputGroup,\n  CFormInput,\n  CCol,\n} from \"@coreui/react\";\n\nconst Position = ({\n  position,\n  index,\n  isClose,\n  closeHandler,\n  closeLimitHandler,\n}) => {\n  const [limitPrice, $limitPrice] = useState(\"\");\n  // useEffect(() => {\n  //   console.log(position.markPrice);\n  // }, [position.markPrice]);\n  function closePositionHandler(e) {\n    closeHandler(position);\n  }\n  function closePositionAsLimitHandler(e) {\n    closeLimitHandler(position, limitPrice);\n    $limitPrice(\"\");\n  }\n  let color = position.positionAmt > 0 ? \"info\" : \"danger\";\n  let closeColor = position.pnl > 0 ? \"success\" : \"danger\";\n  return (\n    <>\n      <CTableRow key={index} className=\"\">\n        <CTableDataCell className=\"align-middle\">\n          <CBadge color={color}>{position.symbol}</CBadge>\n          <span>\n            <CButton variant=\"ghost\" color=\"warning\" size=\"sm\">\n              {position.leverage}x\n            </CButton>\n          </span>\n        </CTableDataCell>\n        <CTableDataCell\n          // color={color}\n          className={classNames({\n            \"text-info\": position.size > 0,\n            \"text-danger\": position.size < 0,\n            \"align-middle\": true,\n          })}\n        >\n          {position.size}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle\">\n          {position.entryPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle\">\n          {position.markPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle text-warning\">\n          {position.liquidationPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle text-info\">\n          {position.lastPrice}\n        </CTableDataCell>\n        <CTableDataCell className=\"align-middle\">\n          {position.marginSize}\n        </CTableDataCell>\n        <CTableDataCell\n          className={classNames({\n            \"text-success\": position.pnl > 0,\n            \"text-danger\": position.pnl < 0,\n            \"align-middle\": true,\n          })}\n        >\n          {position.pnl} ({position.roe}%)\n        </CTableDataCell>\n        {isClose && (\n          <CTableDataCell className=\"align-middle\">\n            <div className=\"d-inline-flex justify-content-start align-items-center align-self-center flex-fill\">\n              <CButton\n                color={closeColor}\n                variant=\"ghost\"\n                value={position}\n                onClick={closePositionHandler}\n                size=\"sm\"\n              >\n                Market\n              </CButton>\n              <div className=\"vr align-middle\" />\n              <CButton\n                color={closeColor}\n                variant=\"ghost\"\n                value={position}\n                onClick={closePositionAsLimitHandler}\n                size=\"sm\"\n              >\n                Limit\n              </CButton>\n              <div className=\"col-4\">\n                <CFormInput\n                  type=\"number\"\n                  size=\"sm\"\n                  placeholder=\"price\"\n                  value={limitPrice}\n                  id=\"limit-price\"\n                  onChange={(e) => $limitPrice(e.target.value)}\n                  // className=\"col-5\"\n                />\n              </div>\n            </div>\n          </CTableDataCell>\n        )}\n      </CTableRow>\n    </>\n  );\n};\n\nexport default Position;\n","import React, { useRef } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../Provider/Auth\";\nimport tr7TradingBot from \"../../Model/tr7-trading-bot.js\";\nimport classNames from \"classnames\";\nimport {\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CRow,\n  CCol,\n  CButton,\n  CTableBody,\n  CToaster,\n  CTooltip,\n} from \"@coreui/react\";\nimport Position from \"../../components/Trade/Position\";\nimport Toast from \"../../components/Toast\";\n\nconst Positions = ({ positions, isClose }) => {\n  const [toast, addToast] = useState(0);\n  const toasterRef = useRef();\n\n  async function submitClosePosition(position, type, price) {\n    const resp = await tr7TradingBot.closePosition(position, type, price);\n    return resp;\n  }\n  function closePositionHandler(position) {\n    // addToast(Toast(\"Close Position\", \"submitting order...\"));\n    submitClosePosition(position, \"market\", 0).then((resp) => {\n      addToast(Toast(\"Close Position\", resp.message));\n    });\n  }\n  function closePositionLimitHandler(position, limitPrice) {\n    const minPrice = position.markPrice - (position.markPrice * 50) / 100;\n    const maxPrice = position.markPrice * 1.5;\n    if (limitPrice >= minPrice && limitPrice <= maxPrice) {\n      // addToast(Toast(\"Close Position\", \"submitting order...\"));\n      submitClosePosition(position, \"limit\", limitPrice).then((resp) => {\n        addToast(Toast(\"Close Position\", resp.message));\n      });\n    } else {\n      addToast(\n        Toast(\n          \"Close Position\",\n          \"price should be larger or smaller than mark price maximum of 50%\"\n        )\n      );\n    }\n  }\n  function closeAllPositionsHandler() {\n    // addToast(Toast(\"Close All Positions\", \"submitting order...\"));\n    (async function submitClosePositions() {\n      const resp = await tr7TradingBot.clearPositions();\n      addToast(Toast(\"Close All Positions\", `${resp.msg}`));\n      return resp;\n    })();\n  }\n  /** [\"Symbol\", \"Size\", \"Entry Price\", \"Mark Price\", \"Liq.Price\", \"Margin\", \"PNL\"]\n   *\n   */\n  const curPositions = positions.map((position, index) => {\n    const {\n      symbol,\n      entryPrice,\n      unRealizedProfit,\n      positionAmt,\n      isolatedMargin,\n      markPrice,\n      liquidationPrice,\n      lastPrice,\n      isolatedWallet,\n      leverage,\n      pricePrecision,\n    } = position;\n    // console.log(\"position\", index, position);\n    // NOTE: on binance site, this size is calculated as positionAmt * last price\n    const size = positionAmt * entryPrice;\n    const roe = (unRealizedProfit * 100) / (Math.abs(size) / leverage);\n    return {\n      symbol,\n      positionAmt,\n      size: Number(size).toFixed(2),\n      entryPrice: Number(entryPrice).toFixed(pricePrecision),\n      markPrice: Number(markPrice).toFixed(pricePrecision),\n      lastPrice: Number(lastPrice).toFixed(pricePrecision),\n      liquidationPrice: Number(liquidationPrice).toFixed(pricePrecision),\n      marginSize: Number(isolatedWallet).toFixed(2),\n      pnl: Number(unRealizedProfit).toFixed(2),\n      roe: Number(roe).toFixed(2),\n      leverage,\n    };\n  });\n  let positionsHeader = [\n    \"Symbol\",\n    \"Size\",\n    \"Entry Price\",\n    \"Mark Price\",\n    \"Liq. Price\",\n    \"Last Price\",\n    \"Margin\",\n    \"PNL (ROE%)\",\n  ];\n  if (isClose) {\n    positionsHeader.push(\"Close All Positions\");\n  }\n\n  return (\n    <>\n      <CRow>\n        <CCol xl={12}>\n          <CCard className=\"mb-4\">\n            <CCardHeader>Positions ({curPositions.length})</CCardHeader>\n            <CCardBody>\n              <table className=\"table\">\n                <thead className=\"\">\n                  <tr>\n                    {positionsHeader.map((key, index) => {\n                      if (key === \"Close All Positions\") {\n                        return (\n                          <th key={index}>\n                            <div>\n                              <CTooltip\n                                content=\"close all positions as market price\"\n                                placement=\"top\"\n                              >\n                                <CButton\n                                  variant=\"ghost\"\n                                  color=\"warning\"\n                                  onClick={closeAllPositionsHandler}\n                                >\n                                  {key}\n                                </CButton>\n                              </CTooltip>\n                            </div>\n                          </th>\n                        );\n                      }\n                      return <th key={index}>{key}</th>;\n                    })}\n                  </tr>\n                </thead>\n                <CTableBody>\n                  {curPositions.map((position, index) => {\n                    return (\n                      <Position\n                        position={position}\n                        key={index}\n                        isClose={isClose}\n                        closeHandler={closePositionHandler}\n                        closeLimitHandler={closePositionLimitHandler}\n                      />\n                    );\n                  })}\n                </CTableBody>\n              </table>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n      <CToaster ref={toasterRef} push={toast} placement=\"top-end\"></CToaster>\n      {/* <CModal\n        alignment=\"center\"\n        visible={visible}\n        onClose={() => setVisible(false)}\n      >\n        <ClosePositionModal\n          position={position}\n          response={respClose}\n          closeModalHandler={() => setVisible(false)}\n        />\n      </CModal> */}\n    </>\n  );\n};\n\nexport default Positions;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["header","body","color","closeButton","className","padTo2Digits","num","toString","padStart","openOrders","curOrders","isClose","forEach","order","tempOrder","date","Date","time","getFullYear","getMonth","getDate","join","formatDate","String","getHours","getMinutes","getSeconds","push","symbol","type","side","price","stopPrice","Number","toFixed","pricePrecision","origQty","reduceOnly","xl","length","map","index","value","idx","MODE_ISOLATED","DIRECTION_SHORT","TYPE_MARKET","TYPE_LIMIT","onCloseHandler","onSubmitHandler","useFuturesOrderInfo","loading","symbolList","curSymbol","userOrderParam","setOrderInfo","modeRef","directionRef","leverageRef","amount","takeProfitRef","stoplossRef","useState","toast","addToast","toasterRef","useRef","refForm","availBalance","$availBalance","curSymbolMarkPrice","$curSymbolMarkPrice","curSymbolLastPrice","$curSymbolLastPrice","curSymbolPricePrecision","$curSymbolPricePrecision","$symbolInfo","useEffect","tr7TradingBot","then","res","account","accounts","availableBalance","fetchSymbolInfoInvoke","symbolInfo","symbolMarketInfo","markPrice","lastPrice","console","log","id","setInterval","clearInterval","ref","placement","onSubmit","event","preventDefault","mode","leverage","tp","sl","tpslPercentType","levels","gridOrder","direction","repeatTime","sizeUnit","takeProfit","trigger","tpType","percentType","stopLoss","slType","Toast","JSON","stringify","xs","lg","component","htmlFor","onChange","e","CUR_SYMBOL","target","MODE","min","max","LEVERAGE","DIRECTION","TYPE","step","placeholder","PRICE","disabled","AMOUNT","TAKE_PROFIT","STOP_LOSS","onClick","MODE_CROSSED","DEFAULT_MODE","DEFAULT_DIRECTION","DEFAULT_TYPE","$loading","$symbolList","$curSymbol","$type","$price","$amount","sortSymbols","symbols","sort","accSymInfo","current","isolated","defaultValue","size","SIZE_UNIT_USD","TYPE_PERCENT","DEFAULT_SIZE_UNIT","curSymbolInfo","$curSymbolInfo","$repeatTime","numberLevels","$numberLevels","$sizeUnit","Array","prices","$prices","sizes","$sizes","amounts","$amounts","totalSize","$totalSize","averagePrice","$averagePrice","curSymbolMinUSDSize","$curSymbolMinUSDSize","curSymbolMinCoinSize","$curSymbolMinCoinSize","takeprofitType","$takeprofitType","stoplossType","$stoplossType","timerId","$timerId","roundAmount","qty","stepSize","isInteger","qtyString","parseFloat","desiredDecimals","Math","indexOf","decimalIndex","slice","printoutAmounts","amt","usdSize","levelPriceChangeHandler","replace","curPrices","tempPrices","levelAmountChangeHandler","curSizes","tempSizes","minQty","minNotional","avgPrice","totalAmount","totalBalanceSize","list","tempAmount","curAmounts","label","defaultChecked","curUnit","from","level","response","$response","newMarketOrderVisible","$newMarketOrderVisible","newTradeVisible","$newTradeVisible","newMultiOrderVisible","$newMultiOrderVisible","fetchSomeBotData","resp","success","message","alignment","visible","onClose","isArray","positions","Positions","a","b","position","closeHandler","closeLimitHandler","limitPrice","$limitPrice","positionAmt","closeColor","pnl","variant","classNames","entryPrice","liquidationPrice","marginSize","roe","submitClosePosition","closePositionHandler","closePositionLimitHandler","minPrice","maxPrice","closeAllPositionsHandler","msg","curPositions","unRealizedProfit","isolatedMargin","isolatedWallet","abs","positionsHeader","key","content","hasOwn","hasOwnProperty","classes","i","arguments","arg","argType","inner","apply","Object","prototype","includes","call","module","exports","default"],"sourceRoot":""}
"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[422],{94743:function(e,n,r){var i=r(78983),s=r(80184);n.Z=function(e){var n="https://www.binance.com/en/futures/".concat(e.symbol);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.C_,{style:{display:"flex",alignItems:"center"},className:"custom-link",color:"warning",onClick:function(){return function(e){var n=window.open(e,"_blank","noopener,noreferrer");n&&(n.opener=null)}(n)},children:e.symbol})})}},23131:function(e,n,r){r(72791);var i=r(78983),s=r(80184);n.Z=function(e,n){return(0,s.jsx)(i.oo,{color:"secondary",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(i.xZ,{closeButton:!0,children:(0,s.jsx)("div",{className:"fw-bold me-auto",children:e})}),(0,s.jsx)(i.S3,{children:n})]})})}},15422:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var i=r(74165),s=r(1413),t=r(15861),l=r(29439),c=r(72791),a=r(55230),o=r(78983),d=r(40337),u=r(94743),m=r(97892),x=r.n(m),h=r(80184);var p=function(e){var n=e.orderHeader,r=e.orderValue,i=r[1],s=r[0];return(0,h.jsx)(o.b7,{xs:12,md:6,xl:4,children:(0,h.jsxs)(o.xH,{className:"mx-1 mb-2",color:"secondary",textColor:"white",children:[(0,h.jsx)(o.bn,{children:(0,h.jsxs)("div",{className:"d-flex d-flex-row justify-content-between align-items-center",children:[(0,h.jsx)(u.Z,{symbol:i}),(0,h.jsx)("div",{className:"mx-2",style:{fontSize:"smaller"},children:s})]})}),(0,h.jsx)(o.sl,{children:(0,h.jsx)(o.Sx,{striped:!0,hover:!0,responsive:!0,color:"light",className:"smaller-text mt-2",style:{width:"100%"},children:(0,h.jsx)(o.NR,{style:{overflowY:"auto"},children:n.slice(2,8).map((function(e,n){return(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{children:e}),(0,h.jsx)(o.NN,{children:r[n+2]})]})}))})})})]})})},j=function(e){var n=e.openOrders,r=(e.isClose,e.exchange),i=["Time","Symbol","Type","Side","Price","Amount","Reduce Only"],s=[];return n.forEach((function(e){var n=[],r=x()(e.time).format("DD/MM HH:mm:ss");n.push(r),n.push(e.symbol),n.push(e.type),n.push(e.side),n.push(e.price),n.push("".concat((e.price*e.origQty).toFixed(2))),n.push(e.reduceOnly?"Yes":"No"),s.push(n)})),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.rb,{children:(0,h.jsx)(o.b7,{xl:12,children:(0,h.jsxs)(o.xH,{className:"mb-4",children:[(0,h.jsxs)(o.bn,{children:[r===a.Tc?"Limit/Market Orders":"Open Orders"," ","(",n.length,")"]}),(0,h.jsx)(o.sl,{children:n.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:"orders-card",className:"d-flex flex-wrap",children:s.map((function(e,n){return(0,h.jsx)(p,{orderHeader:i,orderValue:e})}))}),(0,h.jsxs)(o.Sx,{id:"orders-table",children:[(0,h.jsx)(o.V,{children:(0,h.jsx)("tr",{children:i.map((function(e,n){return(0,h.jsx)("th",{children:e},n)}))})}),(0,h.jsx)(o.NR,{children:s.map((function(e,n){return(0,h.jsx)("tr",{index:n,children:e.map((function(e,n){return(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"h6",children:e})})}))})}))})]})]})})]})})})})},f=r(23131),b=r(70152),g=r(78392),v="Isolated",N="Short",y="Market",P="Limit",w=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,e.exchange),s=(0,b.UY)(),d=s.loading,u=s.symbolList,m=s.symbolListGateIO,x=s.symbolListByBit,p=s.curSymbol,j=s.userOrderParam,w=s.setOrderInfo,C=j[p],S=C.modeRef,k=C.directionRef,Z=C.leverageRef,T=C.type,L=C.price,O=C.amount,z=C.takeProfitRef,F=C.stoplossRef,R=(0,c.useState)(0),M=(0,l.Z)(R,2),H=M[0],A=M[1],I=(0,c.useRef)(),V=(0,c.useRef)(null),E=(0,c.useState)(),Y=(0,l.Z)(E,2),K=Y[0],B=Y[1],q=(0,c.useState)("---"),D=(0,l.Z)(q,2),_=D[0],U=D[1],G=(0,c.useState)("---"),Q=(0,l.Z)(G,2),W=Q[0],X=Q[1],$=(0,c.useState)(0),J=(0,l.Z)($,2),ee=J[0],ne=J[1],re=(0,c.useState)(),ie=(0,l.Z)(re,2),se=(ie[0],ie[1]),te=r===a.Tc?m:r===a.B$?x:u;return(0,c.useEffect)((function(){(function(){var e=(0,t.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.fetchAccountInfo(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}})()(r).then((function(e){if(r===a.KM){var n=e.accounts[0];B(Number(n.availableBalance).toFixed(2))}else r===a.Tc&&B(Number(e.accounts.available).toFixed(2))}))}),[r]),(0,c.useEffect)((function(){function e(e){(function(){var e=(0,t.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.getSymbolMarketInfo(p,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}})()(e).then((function(e){var n=e.symbolMarketInfo;U(n.markPrice),X(n.lastPrice),ne(n.pricePrecision<100?n.pricePrecision:0),se(n)}))}if(e(r),p){var n=setInterval((function(){return e(r)}),g.W);return function(){return clearInterval(n)}}}),[p,r]),d||null===j[p]?(0,h.jsx)(o.LQ,{color:"info"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.KF,{ref:I,push:H,placement:"top-end"}),(0,h.jsxs)(o.lx,{ref:V,onSubmit:function(e){e.preventDefault(),T!==P||L?function(){var e=(0,t.Z)((0,i.Z)().mark((function e(){var n,s,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={symbol:p,mode:S,side:k,leverage:Z,type:T,amount:O,price:L,tp:z,sl:F,tpslPercentType:0},T!==P||!n.tp&&!n.sl){e.next=11;break}return(s=[]).push([L,O]),t={symbol:p,mode:S,direction:k,leverage:Z,repeatTime:1,sizeUnit:"USD",levels:[].concat(s),takeProfit:{trigger:"mark",type:"market",tpType:"%",value:z,percentType:0},stopLoss:{trigger:"last",type:"limit",slType:"%",value:F,percentType:0}},console.log("gridOrder",t),e.next=8,a.ZP.placeGridOrder(t,r);case 8:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,a.ZP.placeNewOrder(n,r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){n(e)})):A((0,f.Z)("Type: Limit","Price should be set (larger than zero)"))},children:[(0,h.jsx)(o.p0,{children:(0,h.jsxs)(o.fl,{children:[(0,h.jsx)("h2",{children:r})," Order w. Param"]})}),(0,h.jsx)(o.sD,{children:(0,h.jsxs)(o.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,h.jsxs)(o.b7,{xs:10,lg:4,children:[(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,h.jsx)(o.LX,{id:"inputSymbol",onChange:function(e){w(b.oU,e.target.value)},value:p,children:te.map((function(e,n){return(0,h.jsx)("option",{children:e},n)}))})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,h.jsxs)(o.LX,{id:"inputMode",value:S,onChange:function(e){console.log(e.target.value),w(b.IK,e.target.value)},children:[(0,h.jsx)("option",{children:v}),(0,h.jsx)("option",{children:"Crossed"})]})]}),(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,h.jsx)(o.jO,{type:"number","aria-label":"leverage",className:"col-4",id:"inputLeverage",min:1,max:50,value:Z,onChange:function(e){return w(b.h$,e.target.value)}}),(0,h.jsx)(o.wV,{component:"label",children:"x"})]}),(0,h.jsxs)(o.e_,{color:"primary",children:[(0,h.jsx)("div",{children:"Available Balance"}),(0,h.jsx)("div",{className:"text-primary",children:"".concat(K," USDT")})]})]}),(0,h.jsxs)(o.b7,{xs:10,lg:7,children:[(0,h.jsxs)(o.rb,{children:[(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.C_,{color:"info",children:["Mark Price:"," ",Number(_).toFixed(ee)]})}),(0,h.jsx)(o.b7,{children:(0,h.jsxs)(o.C_,{color:"warning",children:["Last Price:"," ",Number(W).toFixed(ee)]})})]}),(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,h.jsxs)(o.LX,{id:"inputSide",value:k,onChange:function(e){w(b.JR,e.target.value)},children:[(0,h.jsx)("option",{children:"Long"}),(0,h.jsx)("option",{children:N})]})]})}),(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-2",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputSide",children:"Type"}),(0,h.jsxs)(o.LX,{id:"inputType",value:T,onChange:function(e){w(b.wD,e.target.value)},children:[r===a.KM&&(0,h.jsx)("option",{children:P}),(0,h.jsx)("option",{children:y})]})]})})]}),(0,h.jsx)(o.YR,{className:"mt-1 mb-2 md-col-4",children:(0,h.jsxs)(o.YR,{className:"mb-0",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"price",children:"Price"}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"price",value:L,id:"price",onChange:function(e){w(b.Id,e.target.value)},disabled:T===y}),(0,h.jsx)(o.wV,{component:"label",htmlFor:"amout",children:"Amount"}),(0,h.jsx)(o.jO,{type:"number",step:"any",placeholder:"","aria-label":"amount",value:O,id:"amount",onChange:function(e){w(b.wL,e.target.value)}})]})}),(0,h.jsxs)(o.rb,{className:"my-2",children:[(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputTP",children:"TP"}),(0,h.jsx)(o.jO,{type:"number",placeholder:"","aria-label":"Take Profit",value:z,onChange:function(e){return w(b.V_,e.target.value)},id:"inputTP"}),(0,h.jsx)(o.wV,{component:"label",children:"% price"})]})}),(0,h.jsx)(o.b7,{xs:12,lg:6,children:(0,h.jsxs)(o.YR,{className:"mb-1",children:[(0,h.jsx)(o.wV,{className:"",component:"label",htmlFor:"inputSL",children:"SL"}),(0,h.jsx)(o.jO,{type:"number",placeholder:"","aria-label":"stoploss percent",value:F,onChange:function(e){return w(b.Hg,e.target.value)},id:"inputSL"}),(0,h.jsx)(o.wV,{component:"label",children:"% price"})]})})]})]})]})}),(0,h.jsxs)(o.Ym,{children:[(0,h.jsx)(o.u5,{color:"secondary",onClick:function(){return n()},children:"Close"}),(0,h.jsx)(o.u5,{color:"primary",type:"submit",children:"Submit"})]})]})]})},C=r(763),S=r.n(C),k=function(e){var n=e.orderHeader,r=e.orderValue,i=S().size(n),s=r[0],t=r[1];return(0,h.jsx)(o.b7,{xs:12,md:6,xl:4,children:(0,h.jsxs)(o.xH,{className:"mx-1 mb-2",color:"secondary",textColor:"white",children:[(0,h.jsx)(o.bn,{children:(0,h.jsxs)("div",{className:"d-flex d-flex-row justify-content-between align-items-center",children:[(0,h.jsx)(u.Z,{symbol:s}),(0,h.jsx)("div",{className:"mx-2",style:{fontSize:"smaller"},children:t})]})}),(0,h.jsx)(o.sl,{children:(0,h.jsx)(o.Sx,{striped:!0,hover:!0,responsive:!0,color:"light",className:"smaller-text mt-2",style:{width:"100%"},children:(0,h.jsx)(o.NR,{style:{overflowY:"auto"},children:n.slice(2,i).map((function(e,n){return(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{children:e}),(0,h.jsx)(o.NN,{children:r[n+2]})]},n)}))})})})]})})},Z=function(e){var n=e.openOrders,r=["Contract","Created At","Side","Trigger Price","Order Price","Qty (USDT)","Remarks"],i=[];return n.forEach((function(e){var n=e.initial,r=e.trigger,s=e.orderType,t=e.createTime,l=[],c=x()(1e3*t).format("DD/MM HH:mm:ss"),a="".concat(s," / ").concat(1===r.rule&&"close-short-position"===s||2===r.rule&&"close-long-position"===s?"Stop Loss":"Take Profit"),o=0===r.priceType?1===r.rule?"Last Price >= ".concat(r.price):"Last Price <= ".concat(r.price):"???",d=0===Number(n.price)?"Market":"???",u=0===n.size?"Cross":"".concat(Math.abs(n.size*Number(e.quantoMultiplier)*r.price).toString()),m=!0===n.isReduceOnly?"Reduce-Only":"???";l.push(n.contract),l.push(c),l.push(a),l.push(o),l.push(d),l.push(u),l.push(m),i.push(l)})),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.rb,{children:(0,h.jsx)(o.b7,{xl:12,children:(0,h.jsxs)(o.xH,{className:"mb-4",children:[(0,h.jsxs)(o.bn,{children:["Trigger Orders (",n.length,")"]}),(0,h.jsx)(o.sl,{children:n.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:"orders-card",className:"d-flex flex-wrap",children:i.map((function(e,n){return(0,h.jsx)(k,{orderHeader:r,orderValue:e})}))}),(0,h.jsxs)(o.Sx,{id:"orders-table",children:[(0,h.jsx)(o.V,{children:(0,h.jsx)("tr",{children:r.map((function(e,n){return(0,h.jsx)("th",{children:e},n)}))})}),(0,h.jsx)(o.NR,{children:i.map((function(e,n){return(0,h.jsx)("tr",{index:n,children:e.map((function(e,n){return(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"h6",children:e})})}))})}))})]})]})})]})})})})},T=function(){var e=(0,c.useState)(0),n=(0,l.Z)(e,2),r=n[0],u=n[1],m=(0,c.useRef)(),x=(0,b.UY)(),p=(x.loading,x.symbolList,x.symbolListGateIO,x.symbolListByBit,x.curExchange),v=(x.curSymbol,x.userOrderParam,x.setOrderInfo),N=(0,c.useState)(null),y=(0,l.Z)(N,2),P=y[0],C=y[1],k=(0,c.useState)(null),T=(0,l.Z)(k,2),L=T[0],O=T[1],z=(0,c.useState)(null),F=(0,l.Z)(z,2),R=F[0],M=F[1],H=(0,c.useState)(null),A=(0,l.Z)(H,2),I=A[0],V=A[1],E=(0,c.useState)(!1),Y=(0,l.Z)(E,2),K=Y[0],B=Y[1],q=(0,c.useState)(!1),D=(0,l.Z)(q,2),_=(D[0],D[1],(0,c.useState)(!1)),U=(0,l.Z)(_,2);U[0],U[1];function G(e){e!==p&&(u(null),M(null),O(null),V(null),v(b.oK,e))}function Q(e){return W.apply(this,arguments)}function W(){return W=(0,t.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.getPositions(n);case 2:return r=e.sent,O($(n,r.positions)),M(J(n,r.openOrders)),V(r.priceTriggerOrders),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function X(e,n){return e.symbol<n.symbol?-1:e.symbol>n.symbol?1:0}function $(e,n){var r=n;return e===a.KM&&r.forEach((function(e){e.size=e.positionAmt*e.entryPrice,e.marginSize=Number(e.isolatedWallet).toFixed(2),e.entryPrice=Number(e.entryPrice).toFixed(e.pricePrecision),e.markPrice=Number(e.markPrice).toFixed(e.pricePrecision),e.lastPrice=Number(e.lastPrice).toFixed(e.pricePrecision),e.liquidationPrice=Number(e.liquidationPrice).toFixed(e.pricePrecision)})),e===a.Tc&&(r=S().map(r,(function(e){var n=(0,s.Z)({},e);return n.symbol=e.contract,n.positionAmt=e.size,n.size=e.size>0?e.value:-e.value,n.liquidationPrice=e.liqPrice,n.lastPrice=e.lastPrice,n.marginSize=e.margin,n}))),r.sort(X)}function J(e,n){var r=n;return e===a.KM&&r.forEach((function(e){e.price="0"===e.price?e.stopPrice:e.price,e.price=Number(e.price).toFixed(e.pricePrecision),e.time=e.updateTime})),e===a.Tc&&r.forEach((function(e){e.time=1e3*e.createTime,e.symbol=e.contract,e.type=0!==Number(e.price)?"LIMIT":"MARKET",e.side=e.size<0?"SHORT":"LONG",e.origQty=e.size*e.quantoMultiplier,e.reduceOnly=e.isReduceOnly})),r}return(0,c.useEffect)((function(){C(null),Q(p).then((function(e){return C(e)}));var e=setInterval((function(){Q(p).then((function(e){return C(e)}))}),g.W);return function(){return clearInterval(e)}}),[p]),P?!1===P.success?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h1",{children:"Manual Trade"}),(0,h.jsx)("p",{children:P.message})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.KF,{ref:m,push:r,placement:"top-end"}),(0,h.jsx)(o.rb,{children:(0,h.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-4",children:[(0,h.jsxs)(o.Z0,{role:"group",className:"mt-2 mb-4",children:[(0,h.jsx)(o.EC,{type:"radio",button:{color:"primary",variant:"outline"},name:"vbtnradio",id:"vbtnradio0",autoComplete:"off",label:"Binance",defaultChecked:p===a.KM,onClick:function(){return G(a.KM)}}),(0,h.jsx)(o.EC,{type:"radio",button:{color:"primary",variant:"outline"},name:"vbtnradio",id:"vbtnradio1",autoComplete:"off",label:"GateIO",defaultChecked:p===a.Tc,onClick:function(){return G(a.Tc)}}),(0,h.jsx)(o.EC,{type:"radio",button:{color:"primary",variant:"outline"},name:"vbtnradio",id:"vbtnradio2",autoComplete:"off",label:"ByBit",defaultChecked:p===a.B$,onClick:function(){return G(a.B$)}})]}),(0,h.jsxs)("div",{className:"d-inline-flex justify-content-between align-items-center",children:[(0,h.jsx)("button",{onClick:function(){B(!0)},className:"btn btn-warning mx-2",children:"Order w. Param"}),(0,h.jsx)(o.Tk,{size:"lg",alignment:"center",visible:K,onClose:function(){return B(!1)},children:(0,h.jsx)(w,{exchange:p,onCloseHandler:function(e){console.log("OrderWithParam",e),B(!1),u((0,f.Z)("PLACE ORDER",e.message))}})})]})]})}),Array.isArray(L)&&(0,h.jsx)(d.Z,{exchange:p,positions:L,isClose:!0}),Array.isArray(R)&&(0,h.jsx)(j,{openOrders:R,exchange:p}),p===a.Tc&&!S().isEmpty(I)&&(0,h.jsx)(Z,{openOrders:I})]}):(0,h.jsx)(o.LQ,{color:"info"})}},40337:function(e,n,r){r.d(n,{Z:function(){return j}});var i=r(74165),s=r(15861),t=r(29439),l=r(72791),c=(r(71047),r(55230)),a=r(81694),o=r.n(a),d=r(78983),u=r(80184),m=function(e){var n=e.position,r=e.index,i=e.isClose,s=e.closeHandler,c=e.closeLimitHandler,a=e.supCloseLimit,m=(0,l.useState)(""),x=(0,t.Z)(m,2),h=x[0],p=x[1];var j=n.positionAmt>0?"info":"danger",f=n.pnl>0?"success":"danger";return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(d.T6,{className:"",children:[(0,u.jsxs)(d.NN,{className:"align-middle",children:[(0,u.jsx)(d.C_,{color:j,children:n.symbol}),(0,u.jsx)("span",{children:(0,u.jsxs)(d.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})})]}),(0,u.jsx)(d.NN,{className:o()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size}),(0,u.jsx)(d.NN,{className:"align-middle",children:n.entryPrice}),(0,u.jsx)(d.NN,{className:"align-middle",children:n.markPrice}),(0,u.jsx)(d.NN,{className:"align-middle text-warning",children:n.liquidationPrice}),(0,u.jsx)(d.NN,{className:"align-middle text-info",children:n.lastPrice}),(0,u.jsx)(d.NN,{className:"align-middle",children:n.marginSize}),(0,u.jsxs)(d.NN,{className:o()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]}),i&&(0,u.jsx)(d.NN,{className:"align-middle",children:(0,u.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,u.jsx)(d.u5,{color:f,variant:"ghost",value:n,onClick:function(e){s(n)},size:"sm",children:"Market"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"vr align-middle"}),(0,u.jsx)(d.u5,{color:f,variant:"ghost",value:n,onClick:function(e){c(n,h),p("")},size:"sm",children:"Limit"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)(d.jO,{type:"number",size:"sm",placeholder:"price",value:h,id:"limit-price",onChange:function(e){return p(e.target.value)}})})]})]})})]},r)})},x=r(94743),h=function(e){var n=e.position,r=(e.index,e.isClose),i=e.closeHandler,s=e.closeLimitHandler,c=e.supCloseLimit,a=(0,l.useState)(""),m=(0,t.Z)(a,2),h=m[0],p=m[1];n.positionAmt;var j=n.pnl>0?"success":"danger";return(0,u.jsx)(d.b7,{xs:12,md:6,xl:4,children:(0,u.jsxs)(d.xH,{className:"mx-1 mb-2",children:[(0,u.jsx)(d.bn,{children:(0,u.jsxs)("div",{className:"d-flex d-flex-row justify-content-between align-items-center",children:[(0,u.jsx)(x.Z,{symbol:n.symbol}),(0,u.jsxs)(d.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})]})}),(0,u.jsxs)(d.sl,{children:[(0,u.jsx)(d.Sx,{striped:!0,hover:!0,responsive:!0,color:"light",className:"smaller-text mt-2",style:{width:"100%"},children:(0,u.jsxs)(d.NR,{style:{overflowY:"auto"},children:[(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"Size"}),(0,u.jsx)(d.NN,{className:o()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size})]}),(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"Entry Price"}),(0,u.jsx)(d.NN,{className:"align-middle",children:n.entryPrice})]}),(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"Mark Price"}),(0,u.jsx)(d.NN,{className:"align-middle",children:n.markPrice})]}),(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"Liquid Price"}),(0,u.jsx)(d.NN,{className:"align-middle text-warning",children:n.liquidationPrice})]}),(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"Last Price"}),(0,u.jsx)(d.NN,{className:"align-middle text-info",children:n.lastPrice})]}),(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"Margin Size"}),(0,u.jsx)(d.NN,{className:"align-middle",children:n.marginSize})]}),(0,u.jsxs)(d.T6,{children:[(0,u.jsx)(d.is,{children:"PNL (%)"}),(0,u.jsxs)(d.NN,{className:o()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]})]})]})}),r&&(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)("div",{children:"Close"}),(0,u.jsx)("div",{className:"align-middle",children:(0,u.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,u.jsx)(d.u5,{color:j,variant:"ghost",value:n,onClick:function(e){i(n)},size:"sm",children:"Market"}),c&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"vr align-middle"}),(0,u.jsx)(d.u5,{color:j,variant:"ghost",value:n,onClick:function(e){s(n,h),p("")},size:"sm",children:"Limit"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)(d.jO,{type:"number",size:"sm",placeholder:"price",value:h,id:"limit-price",onChange:function(e){return p(e.target.value)}})})]})]})})]})]})]})})},p=r(23131),j=function(e){var n=e.positions,r=e.isClose,a=e.exchange,o=(0,l.useState)(0),x=(0,t.Z)(o,2),j=x[0],f=x[1],b=(0,l.useRef)();function g(e,n,r){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)((0,i.Z)().mark((function e(n,r,s){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.closePosition(n,r,s,a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){g(e,"market",0).then((function(e){f((0,p.Z)("Close Position",e.message))}))}function y(e,n){var r=e.markPrice-50*e.markPrice/100,i=1.5*e.markPrice;n>=r&&n<=i?g(e,"limit",n).then((function(e){f((0,p.Z)("Close Position",e.message))})):f((0,p.Z)("Close Position","price should be larger or smaller than mark price maximum of 50%"))}function P(){!function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.ZP.clearPositions();case 2:return n=e.sent,f((0,p.Z)("Close All Positions","".concat(n.msg))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}var w=n.map((function(e,n){var r=e.symbol,i=e.entryPrice,s=e.unRealizedProfit,t=e.positionAmt,l=e.markPrice,c=e.liquidationPrice,a=e.lastPrice,o=e.leverage,d=(e.pricePrecision,e.size),u=e.marginSize,m=100*s/(Math.abs(d)/o);return{symbol:r,positionAmt:t,size:Number(d).toFixed(2),entryPrice:i,markPrice:l,lastPrice:a,liquidationPrice:c,marginSize:Number(u).toFixed(2),pnl:Number(s).toFixed(2),roe:Number(m).toFixed(2),leverage:o}})),C=["Symbol","Size","Entry Price","Mark Price","Liq. Price","Last Price","Margin","PNL (ROI%)"];return r&&(a===c.KM?C.push("Close All Positions"):C.push("Close Position")),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.rb,{children:(0,u.jsx)(d.b7,{children:(0,u.jsxs)(d.xH,{className:"mb-4",children:[(0,u.jsxs)(d.bn,{children:["Positions (",w.length,")"]}),(0,u.jsx)(d.sl,{children:w.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{id:"positions-card",className:"d-flex flex-wrap",children:w.map((function(e,n){return(0,u.jsx)(h,{position:e,isClose:r,closeHandler:N,closeLimitHandler:y},n)}))}),(0,u.jsxs)(d.Sx,{id:"positions-table",children:[(0,u.jsx)(d.V,{className:"",children:(0,u.jsx)(d.T6,{children:C.map((function(e,n){return"Close All Positions"===e?(0,u.jsx)(d.is,{children:(0,u.jsx)("div",{children:(0,u.jsx)(d.If,{content:"close all positions as market price",placement:"top",children:(0,u.jsx)(d.u5,{variant:"ghost",color:"warning",onClick:P,children:e})})})},n):(0,u.jsx)(d.is,{children:e},n)}))})}),(0,u.jsx)(d.NR,{children:w.map((function(e,n){return(0,u.jsx)(m,{position:e,isClose:r,closeHandler:N,closeLimitHandler:y,supCloseLimit:a===c.KM},n)}))})]})]})})]})})}),(0,u.jsx)(d.KF,{ref:b,push:j,placement:"top-end"})]})}},78392:function(e,n,r){r.d(n,{W:function(){return i}});var i=2500}}]);
//# sourceMappingURL=422.bcdde3fb.chunk.js.map
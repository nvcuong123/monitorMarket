{"version":3,"file":"static/js/141.bd52113b.chunk.js","mappings":"qKAAO,IAAMA,EAAoB,IAAIC,KAAKC,aAAa,QAAS,CAC9DC,MAAO,WACPC,SAAU,QAOCC,EAAmB,SAACC,GAAM,gBAAQA,EAAOC,QAAQ,GAAE,K,2ICQ1DC,EADgBC,OAAOC,SAASC,OAAOC,QAAQ,QAAS,OAG9DC,QAAQC,IAAI,YAAaN,GAkCzB,IAAMO,EAAW,SAACC,GAChB,IAAMC,EAAQD,EAAMC,MACdC,EAAU,6CAAyCD,EAAME,QAC/D,OACE,SAAC,KAAK,CACJC,UAAU,YACVC,MAAM,UACNC,UAAU,QACVnB,MAAO,CAAEoB,SAAU,SAAU,UAE7B,eACEC,KAAMN,EACNO,OAAO,SACPC,IAAI,sBACJN,UAAU,cAAa,WAEvB,SAAC,KAAW,WACV,iBAAKA,UAAU,4CAA2C,WACxD,yBACE,4BAASH,EAAME,YAEjB,yBAAMQ,IAAMV,EAAMW,MAAMC,OAAO,0BAGnC,UAAC,KAAS,WACa,iBAApBZ,EAAMa,YACL,iCACE,iBAAKV,UAAU,4CAA2C,WACxD,yBAAMH,EAAMa,aACZ,0BAAMzB,EAAAA,EAAAA,IAAiBY,EAAMc,mBAE/B,iBAAKX,UAAU,4CAA2C,WACxD,wCACA,yBAAMH,EAAMe,gBAEd,iBAAKZ,UAAU,4CAA2C,WACxD,oCACA,yBAAMpB,EAAAA,GAAAA,OAAyBiB,EAAMgB,eAItB,QAApBhB,EAAMa,YACL,iCACE,iBAAKV,UAAU,4CAA2C,WACxD,yBAAMH,EAAMiB,WACZ,yBAAMjB,EAAMkB,UAEd,iBAAKf,UAAU,4CAA2C,WACxD,wCACA,yBAAMH,EAAMe,kBAIG,cAApBf,EAAMa,YACL,iCACE,iBAAKV,UAAU,4CAA2C,WACxD,yBAAMH,EAAMa,aACZ,0BAAMzB,EAAAA,EAAAA,IAAiBY,EAAMmB,kBAE/B,iBAAKhB,UAAU,4CAA2C,WACxD,wCACA,yBAAMH,EAAMe,gBAEd,iBAAKZ,UAAU,4CAA2C,WACxD,4CACA,yBACGpB,EAAAA,GAAAA,OAAyBiB,EAAMoB,qCASlD,EA4GA,UA7DsB,WACpB,OAAiDC,EAAAA,EAAAA,IAAa9B,EAAW,CACvE+B,OAAO,EACPC,cAAc,EACdC,kBAAmB,IACnBC,kBAAmB,IAEnBC,gBAAiB,kBAAM,CAAI,EAC3BC,OAAQ,SAACC,GAAK,OAAKhC,QAAQC,IAAI,YAAa+B,EAAM,EAClDC,QAAS,SAACC,GAAU,OAAKlC,QAAQC,IAAI,YAAaiC,EAAW,EAC7DC,QAAS,SAACC,GAAQ,OAAKpC,QAAQC,IAAI,QAASmC,EAAS,EACrDC,gBAAiB,SAACC,GAAS,OAAKtC,QAAQC,IAAI,oBAAqBqC,EAAU,IAVxDC,GAAF,EAAXC,YAAwB,EAAXD,aAYrB,GAZ4C,EAAVE,YAYMC,EAAAA,EAAAA,UAAS,CAAC,IAAE,eAA7CC,EAAa,KAAEC,EAAc,KACpC,GAAoCF,EAAAA,EAAAA,UAAS,IAAG,eAA9B,KAAc,KA2BhC,OAzBAG,EAAAA,EAAAA,YAAU,WACR,GAAoB,OAAhBN,EAAsB,CACxB,IAQIO,EARSC,KAAKC,MAAMT,EAAYU,MAQXC,UAAUC,UACnCC,IAAAA,QAAUN,GACVF,GAAe,SAACS,GAAU,OAAKP,CAAa,GAE9C,CACF,GAAG,CAACP,KAWF,+BACE,gBAAKhC,UAAU,wEAAuE,UAClF6C,IAAAA,QAAUT,IACVA,EAAcW,KAAI,SAAClD,GACjB,OACE,SAAC,KAAI,CAACmD,GAAI,EAAE,UACV,SAACrD,EAAQ,CAACE,MAAOA,KAGvB,OAQV,C","sources":["Utils/index.js","pages/Analysis/Binance/BinanceAlerts.js"],"sourcesContent":["export const CurrencyFormatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n\n  // These options are needed to round to whole numbers if that's what you want.\n  //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n  //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});\n\nexport const PercentFormatter = (number) => `${number.toFixed(2)}%`;\n\nconst Utils = {\n  CurrencyFormatter,\n  PercentFormatter,\n};\n\nexport default Utils;\n","import { useEffect, useState } from \"react\";\nimport React from \"react\";\nimport useWebSocket from \"react-use-websocket\";\nimport { Alert, Toast, ToastContainer } from \"react-bootstrap\";\nimport _ from \"lodash\";\nimport dayjs from \"dayjs\";\nimport {\n  CCol,\n  CCard,\n  CCardHeader,\n  CCardBody,\n  CCardTitle,\n  CCardText,\n} from \"@coreui/react\";\nimport { CurrencyFormatter, PercentFormatter } from \"../../../Utils\";\n\nconst productionUrl = window.location.origin.replace(\"https\", \"wss\");\nconst socketUrl =\n  process.env.NODE_ENV === \"production\" ? productionUrl : \"ws://127.0.0.1:3000\";\nconsole.log(\"socketUrl\", socketUrl);\n\n/**{\n  time: 1696857471364,\n  alertType: 'PRICE_CHANGE',\n  timestamp: 1696857300000,\n  symbol: 'BNTUSDT',\n  timeframe: '5m',\n  price: '0.5228000',\n  priceChange: -2.0239880059969866\n} \n\n{\n  time: 1696860003596,\n  alertType: 'RSI',\n  timestamp: 1696860000000,\n  symbol: 'QTUMUSDT',\n  timeframe: '30m',\n  rsi: 19.39,\n  rsiType: 'RSI_OVERSOLD'\n}\n\n{\n  alertType: 'OI_CHANGE',\n  alertSubType: 'REALTIME_OI',\n  time: 1696862013746,\n  sumOpenInterest: '27621345',\n  sumOpenInterestValue: 6667792.683,\n  prevChange: 9.869097861511296,\n  timestamp: 1696860900000,\n  symbol: 'BNXUSDT',\n  timeframe: '15m'\n}\n*/\nconst BotAlert = (props) => {\n  const alert = props.alert;\n  const binanceUrl = `https://www.binance.com/en/futures/${alert.symbol}`;\n  return (\n    <CCard\n      className=\"mx-3 mb-3\"\n      color=\"warning\"\n      textColor=\"white\"\n      style={{ maxWidth: \"24rem\" }}\n    >\n      <a\n        href={binanceUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"custom-link\"\n      >\n        <CCardHeader>\n          <div className=\"d-flex d-flex-row justify-content-between\">\n            <h5>\n              <strong>{alert.symbol}</strong>\n            </h5>\n            <div>{dayjs(alert.time).format(\"DD/MM HH:mm:ss\")}</div>\n          </div>\n        </CCardHeader>\n        <CCardBody>\n          {alert.alertType === \"PRICE_CHANGE\" && (\n            <>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>{alert.alertType}</div>\n                <div>{PercentFormatter(alert.priceChange)}</div>\n              </div>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>Timeframe</div>\n                <div>{alert.timeframe}</div>\n              </div>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>Price</div>\n                <div>{CurrencyFormatter.format(alert.price)}</div>\n              </div>\n            </>\n          )}\n          {alert.alertType === \"RSI\" && (\n            <>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>{alert.rsiType}</div>\n                <div>{alert.rsi}</div>\n              </div>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>Timeframe</div>\n                <div>{alert.timeframe}</div>\n              </div>\n            </>\n          )}\n          {alert.alertType === \"OI_CHANGE\" && (\n            <>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>{alert.alertType}</div>\n                <div>{PercentFormatter(alert.prevChange)}</div>\n              </div>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>Timeframe</div>\n                <div>{alert.timeframe}</div>\n              </div>\n              <div className=\"d-flex d-flex-row justify-content-between\">\n                <div>Open Interest</div>\n                <div>\n                  {CurrencyFormatter.format(alert.sumOpenInterestValue)}\n                </div>\n              </div>\n            </>\n          )}\n        </CCardBody>\n      </a>\n    </CCard>\n  );\n};\n\nconst StackingAlertToast = (props) => {\n  const { alertToasts, onCloseHandler } = props;\n  //\n  const closeAlert = (index) => {\n    console.log(\"closeAlert\", index);\n    onCloseHandler(index);\n    // $alertToats((prevToats) => _.pull(prevToats, prevToats[index]));\n  };\n  //\n  return (\n    <ToastContainer className=\"position-static\" position=\"bottom-end\">\n      {!_.isEmpty(alertToasts) &&\n        alertToasts.map((index) => {\n          return (\n            <Toast\n              className=\"my-2 mx-2\"\n              bg=\"warning\"\n              key={index}\n              onClose={() => closeAlert(index)}\n            >\n              <Toast.Header>\n                <img\n                  src=\"holder.js/20x20?text=%20\"\n                  className=\"rounded me-2\"\n                  alt=\"\"\n                />\n                <strong className=\"me-auto\">\n                  {`${index} symbol timeframe`}{\" \"}\n                </strong>\n                <small className=\"text-muted\">\n                  {dayjs().format(\"DD/MM HH:mm:ss\")}\n                </small>\n              </Toast.Header>\n              <Toast.Body className=\"text-black\">\n                <div>Price/OI/RSI:</div>\n                <div>Change:%</div>\n                <div>Just like this</div>\n              </Toast.Body>\n            </Toast>\n          );\n        })}\n    </ToastContainer>\n  );\n};\n\nconst BinanceAlerts = () => {\n  const { sendMessage, lastMessage, readyState } = useWebSocket(socketUrl, {\n    share: true,\n    retryOnError: true,\n    reconnectAttempts: 1000,\n    reconnectInterval: 3000,\n    //Will attempt to reconnect on all close events, such as server shutting down\n    shouldReconnect: () => true,\n    onOpen: (event) => console.log(\"opened ws\", event),\n    onClose: (closeEvent) => console.log(\"ws closed\", closeEvent),\n    onError: (errEvent) => console.log(\"error\", errEvent),\n    onReconnectStop: (numAttemp) => console.log(\"reconnect stopped\", numAttemp),\n  });\n  const [binanceAlerts, $binanceAlerts] = useState({});\n  const [alertToasts, $alertToasts] = useState([]);\n  //\n  useEffect(() => {\n    if (lastMessage !== null) {\n      const json = JSON.parse(lastMessage.data);\n      /**\n       * const alertData = {\n    symbols: alertSymbList,\n    alertlist: binanceAlertsList,\n    marketdata: alertDataList,\n  };\n       */\n      let respAlertList = json.alertData.alertlist;\n      _.reverse(respAlertList);\n      $binanceAlerts((prevAlerts) => respAlertList);\n      // $alertToasts((prevToasts) => _.takeRight(respAlertList, 5));\n    }\n  }, [lastMessage]);\n  //\n  function alertToastClose(index) {\n    $alertToasts((prevAlerts) => {\n      const newAlerts = prevAlerts.splice(index, 1);\n      console.log(newAlerts, newAlerts);\n      return newAlerts;\n    });\n  }\n\n  return (\n    <>\n      <div className=\"d-flex flex-row flex-wrap justify-content-around align-content-around\">\n        {!_.isEmpty(binanceAlerts) &&\n          binanceAlerts.map((alert) => {\n            return (\n              <CCol sm={4}>\n                <BotAlert alert={alert} />\n              </CCol>\n            );\n          })}\n      </div>\n      {/* <StackingAlertToast\n        alertList={alertToasts}\n        onCloseHandler={alertToastClose}\n      /> */}\n    </>\n  );\n};\n\nexport default BinanceAlerts;\n"],"names":["CurrencyFormatter","Intl","NumberFormat","style","currency","PercentFormatter","number","toFixed","socketUrl","window","location","origin","replace","console","log","BotAlert","props","alert","binanceUrl","symbol","className","color","textColor","maxWidth","href","target","rel","dayjs","time","format","alertType","priceChange","timeframe","price","rsiType","rsi","prevChange","sumOpenInterestValue","useWebSocket","share","retryOnError","reconnectAttempts","reconnectInterval","shouldReconnect","onOpen","event","onClose","closeEvent","onError","errEvent","onReconnectStop","numAttemp","lastMessage","sendMessage","readyState","useState","binanceAlerts","$binanceAlerts","useEffect","respAlertList","JSON","parse","data","alertData","alertlist","_","prevAlerts","map","sm"],"sourceRoot":""}
/*! For license information please see 633.6bd7f0a2.chunk.js.LICENSE.txt */
(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[633],{23131:function(e,n,r){"use strict";r(72791);var i=r(78983),s=r(80184);n.Z=function(e,n){return(0,s.jsx)(i.oo,{color:"secondary",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(i.xZ,{closeButton:!0,children:(0,s.jsx)("div",{className:"fw-bold me-auto",children:e})}),(0,s.jsx)(i.S3,{children:n})]})})}},49265:function(e,n,r){"use strict";r.d(n,{Z:function(){return m}});var i=r(74165),s=r(15861),t=r(29439),l=r(72791),a=(r(71047),r(55230)),c=r(81694),o=r.n(c),u=r(78983),d=r(80184),h=function(e){var n=e.position,r=e.index,i=e.isClose,s=e.closeHandler,a=e.closeLimitHandler,c=(0,l.useState)(""),h=(0,t.Z)(c,2),x=h[0],m=h[1];var p=n.positionAmt>0?"info":"danger",f=n.pnl>0?"success":"danger";return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(u.T6,{className:"",children:[(0,d.jsxs)(u.NN,{className:"align-middle",children:[(0,d.jsx)(u.C_,{color:p,children:n.symbol}),(0,d.jsx)("span",{children:(0,d.jsxs)(u.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})})]}),(0,d.jsx)(u.NN,{className:o()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.entryPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.markPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-warning",children:n.liquidationPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-info",children:n.lastPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.marginSize}),(0,d.jsxs)(u.NN,{className:o()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]}),i&&(0,d.jsx)(u.NN,{className:"align-middle",children:(0,d.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){s(n)},size:"sm",children:"Market"}),(0,d.jsx)("div",{className:"vr align-middle"}),(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){a(n,x),m("")},size:"sm",children:"Limit"}),(0,d.jsx)("div",{className:"col-4",children:(0,d.jsx)(u.jO,{type:"number",size:"sm",placeholder:"price",value:x,id:"limit-price",onChange:function(e){return m(e.target.value)}})})]})})]},r)})},x=r(23131),m=function(e){var n=e.positions,r=e.isClose,c=(0,l.useState)(0),o=(0,t.Z)(c,2),m=o[0],p=o[1],f=(0,l.useRef)();function j(e,n,r){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)((0,i.Z)().mark((function e(n,r,s){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.closePosition(n,r,s);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){j(e,"market",0).then((function(e){p((0,x.Z)("Close Position",e.message))}))}function N(e,n){var r=e.markPrice-50*e.markPrice/100,i=1.5*e.markPrice;n>=r&&n<=i?j(e,"limit",n).then((function(e){p((0,x.Z)("Close Position",e.message))})):p((0,x.Z)("Close Position","price should be larger or smaller than mark price maximum of 50%"))}function b(){!function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.clearPositions();case 2:return n=e.sent,p((0,x.Z)("Close All Positions","".concat(n.msg))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}var P=n.map((function(e,n){var r=e.symbol,i=e.entryPrice,s=e.unRealizedProfit,t=e.positionAmt,l=(e.isolatedMargin,e.markPrice),a=e.liquidationPrice,c=e.lastPrice,o=e.isolatedWallet,u=e.leverage,d=e.pricePrecision;console.log("position",n,e);var h=t*i,x=100*s/(Math.abs(h)/u);return{symbol:r,positionAmt:t,size:Number(h).toFixed(2),entryPrice:Number(i).toFixed(d),markPrice:Number(l).toFixed(d),lastPrice:Number(c).toFixed(d),liquidationPrice:Number(a).toFixed(d),marginSize:Number(o).toFixed(2),pnl:Number(s).toFixed(2),roe:Number(x).toFixed(2),leverage:u}})),y=["Symbol","Size","Entry Price","Mark Price","Liq.Price","Last Price","Margin","PNL (ROE%)"];return r&&y.push("Close All Positions"),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.rb,{children:(0,d.jsx)(u.b7,{xl:12,children:(0,d.jsxs)(u.xH,{className:"mb-4",children:[(0,d.jsxs)(u.bn,{children:["Positions (",P.length,")"]}),(0,d.jsx)(u.sl,{children:(0,d.jsxs)("table",{className:"table",children:[(0,d.jsx)("thead",{className:"",children:(0,d.jsx)("tr",{children:y.map((function(e,n){return"Close All Positions"===e?(0,d.jsx)("th",{children:(0,d.jsx)("div",{children:(0,d.jsx)(u.If,{content:"close all positions as market price",placement:"top",children:(0,d.jsx)(u.u5,{variant:"ghost",color:"warning",onClick:b,children:e})})})},n):(0,d.jsx)("th",{children:e},n)}))})}),(0,d.jsx)(u.NR,{children:P.map((function(e,n){return(0,d.jsx)(h,{position:e,isClose:r,closeHandler:v,closeLimitHandler:N},n)}))})]})})]})})}),(0,d.jsx)(u.KF,{ref:f,push:m,placement:"top-end"})]})}},58633:function(e,n,r){"use strict";r.r(n);var i=r(74165),s=r(15861),t=r(29439),l=r(72791),a=r(55230),c=r(78983),o=r(49265),u=r(80184);n.default=function(e){var n=(0,l.useState)(null),r=(0,t.Z)(n,2),d=r[0],h=r[1];function x(){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.fetchTradeInfo();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,l.useEffect)((function(){x().then((function(e){return h(e)}));var e=setInterval((function(){x().then((function(e){return h(e)}))}),3e3);return function(){return clearInterval(e)}}),[]),d){var p=d.openOrders,f=d.positions;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{children:"Current Orders and Positions"}),p.length>0&&(0,u.jsx)(c.rb,{children:(0,u.jsx)(c.b7,{xl:12,children:(0,u.jsxs)(c.xH,{className:"mb-4",children:[(0,u.jsx)(c.bn,{children:"Orders"}),(0,u.jsx)(c.sl,{children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{children:Object.keys(p[0]).map((function(e,n){return(0,u.jsx)("th",{children:e},n)}))})}),(0,u.jsx)("tbody",{children:p.map((function(e,n){return(0,u.jsx)("tr",{index:n,children:Object.values(e).map((function(e,n){return(0,u.jsx)("td",{children:(0,u.jsx)("span",{className:"h6",children:e},n)})}))})}))})]})})]})})}),f.length>0&&(0,u.jsx)(c.rb,{children:(0,u.jsx)(c.b7,{xl:12,children:Array.isArray(d.positions)&&(0,u.jsx)(o.Z,{positions:d.positions,isClose:!1})})}),0===p.length&&0===f.length&&(0,u.jsx)(c.rb,{children:"There is not any open order or position"})]})}return(0,u.jsx)(c.LQ,{color:"info"})}},81694:function(e,n){var r;!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var t=typeof r;if("string"===t||"number"===t)e.push(r);else if(Array.isArray(r)){if(r.length){var l=s.apply(null,r);l&&e.push(l)}}else if("object"===t){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(n,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=633.6bd7f0a2.chunk.js.map
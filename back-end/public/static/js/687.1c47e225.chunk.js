"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[687],{17687:function(e,t,n){n.r(t);var r=n(29439),o=n(72791),c=n(19829),s=n(80184),u=window.location.origin.replace("https","wss");console.log("socketUrl",u);t.default=function(){var e,t,n,a=(0,c.ZP)(u,{onOpen:function(){return console.log("opened ws")},shouldReconnect:function(e){return!0}}),i=(a.sendMessage,a.lastMessage),l=a.readyState,f=(0,o.useState)({}),d=(0,r.Z)(f,2),p=d[0],S=d[1];return(0,o.useEffect)((function(){if(null!==i){console.log("lastMessage",i);var e=JSON.parse(i.data);S(e)}}),[i]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Binance Heatmap"}),(0,s.jsxs)("div",{class:"row",children:[(0,s.jsxs)("div",{class:"column",children:[(0,s.jsx)("h2",{children:"24h Change"}),l&&(null===(e=p.change24Hs)||void 0===e?void 0:e.slice(0,10).map((function(e){return(0,s.jsxs)("h4",{children:[(0,s.jsx)("span",{children:e.symbol}),(0,s.jsxs)("span",{children:[" : ",e.priceChangePercent]})]})})))]}),(0,s.jsxs)("div",{class:"column",children:[(0,s.jsx)("h2",{children:"Trading Volume"}),l&&(null===(t=p.tradingVol24H)||void 0===t?void 0:t.slice(0,10).map((function(e){return(0,s.jsxs)("h4",{children:[(0,s.jsx)("span",{children:e.symbol}),(0,s.jsxs)("span",{children:[" : $",e.quoteVolume]})]})})))]}),(0,s.jsxs)("div",{class:"column",children:[(0,s.jsx)("h2",{children:"Funding Rates"}),null===(n=p.fundingRates)||void 0===n?void 0:n.slice(0,10).map((function(e){return(0,s.jsxs)("h4",{children:[(0,s.jsx)("span",{children:e.symbol}),(0,s.jsxs)("span",{children:[" : ",e.fundingRate]})]})}))]})]})]})}},19829:function(e,t,n){t.ZP=void 0;var r=n(96632);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return r.useWebSocket}});var o=n(32570);var c=n(13879);var s=n(43536);var u=n(35141)},95624:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachListeners=void 0;var o=n(82820),c=n(13879),s=n(35141);t.attachListeners=function(e,t,n,u,a,i){var l,f,d,p=t.setLastMessage,S=t.setReadyState;return n.current.fromSocketIO&&(l=(0,o.setUpSocketIOPing)(i)),function(e,t,n){e.onmessage=function(e){t.current.onMessage&&t.current.onMessage(e),"function"===typeof t.current.filter&&!0!==t.current.filter(e)||n(e)}}(e,n,p),function(e,t,n,r){e.onopen=function(e){t.current.onOpen&&t.current.onOpen(e),r.current=0,n(c.ReadyState.OPEN)}}(e,n,S,a),f=function(e,t,n,r,o){return c.isEventSourceSupported&&e instanceof EventSource?function(){}:((0,s.assertIsWebSocket)(e,t.current.skipAssert),e.onclose=function(e){var s;if(t.current.onClose&&t.current.onClose(e),n(c.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(e)){var a=null!==(s=t.current.reconnectAttempts)&&void 0!==s?s:c.DEFAULT_RECONNECT_LIMIT;if(o.current<a){var i="function"===typeof t.current.reconnectInterval?t.current.reconnectInterval(o.current):t.current.reconnectInterval;u=window.setTimeout((function(){o.current++,r()}),null!==i&&void 0!==i?i:c.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(a),console.warn("Max reconnect attempts of ".concat(a," exceeded"))}},function(){return u&&window.clearTimeout(u)});var u}(e,n,S,u,a),d=function(e,t,n,o,s){var u;return e.onerror=function(a){var i;if(t.current.onError&&t.current.onError(a),c.isEventSourceSupported&&e instanceof EventSource&&(t.current.onClose&&t.current.onClose(r(r({},a),{code:1006,reason:"An error occurred with the EventSource: ".concat(a),wasClean:!1})),n(c.ReadyState.CLOSED),e.close()),t.current.retryOnError)if(s.current<(null!==(i=t.current.reconnectAttempts)&&void 0!==i?i:c.DEFAULT_RECONNECT_LIMIT)){var l="function"===typeof t.current.reconnectInterval?t.current.reconnectInterval(s.current):t.current.reconnectInterval;u=window.setTimeout((function(){s.current++,o()}),null!==l&&void 0!==l?l:c.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))},function(){return u&&window.clearTimeout(u)}}(e,n,S,u,a),function(){S(c.ReadyState.CLOSING),f(),d(),e.close(),l&&clearInterval(l)}}},59221:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachSharedListeners=void 0;var o=n(65650),c=n(13879),s=n(777),u=n(82820);t.attachSharedListeners=function(e,t,n,a){var i;return n.current.fromSocketIO&&(i=(0,u.setUpSocketIOPing)(a)),function(e,t){e.onmessage=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onMessage&&t.optionsRef.current.onMessage(e),"function"===typeof t.optionsRef.current.filter&&!0!==t.optionsRef.current.filter(e)||t.setLastMessage(e)}))}}(e,t),function(e,t){e instanceof WebSocket&&(e.onclose=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onClose&&t.optionsRef.current.onClose(e),t.setReadyState(c.ReadyState.CLOSED)})),delete o.sharedWebSockets[t],(0,s.getSubscribers)(t).forEach((function(t){var n;if(t.optionsRef.current.shouldReconnect&&t.optionsRef.current.shouldReconnect(e)){var r=null!==(n=t.optionsRef.current.reconnectAttempts)&&void 0!==n?n:c.DEFAULT_RECONNECT_LIMIT;if(t.reconnectCount.current<r){var o="function"===typeof t.optionsRef.current.reconnectInterval?t.optionsRef.current.reconnectInterval(t.reconnectCount.current):t.optionsRef.current.reconnectInterval;setTimeout((function(){t.reconnectCount.current++,t.reconnect.current()}),null!==o&&void 0!==o?o:c.DEFAULT_RECONNECT_INTERVAL_MS)}else t.optionsRef.current.onReconnectStop&&t.optionsRef.current.onReconnectStop(t.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(r," exceeded"))}}))})}(e,t),function(e,t){e.onopen=function(e){(0,s.getSubscribers)(t).forEach((function(t){t.reconnectCount.current=0,t.optionsRef.current.onOpen&&t.optionsRef.current.onOpen(e),t.setReadyState(c.ReadyState.OPEN)}))}}(e,t),function(e,t){e.onerror=function(n){(0,s.getSubscribers)(t).forEach((function(t){t.optionsRef.current.onError&&t.optionsRef.current.onError(n),c.isEventSourceSupported&&e instanceof EventSource&&(t.optionsRef.current.onClose&&t.optionsRef.current.onClose(r(r({},n),{code:1006,reason:"An error occurred with the EventSource: ".concat(n),wasClean:!1})),t.setReadyState(c.ReadyState.CLOSED))})),c.isEventSourceSupported&&e instanceof EventSource&&e.close()}}(e,t),function(){i&&clearInterval(i)}}},13879:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0;t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25e3,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={},function(e){e[e.UNINSTANTIATED=-1]="UNINSTANTIATED",e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.ReadyState||(t.ReadyState={}));t.isReactNative="undefined"!==typeof navigator&&"ReactNative"===navigator.product,t.isEventSourceSupported=!t.isReactNative&&function(){try{return"EventSource"in globalThis}catch(e){return!1}}()},30343:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrJoinSocket=void 0;var r=n(65650),o=n(13879),c=n(95624),s=n(59221),u=n(777);t.createOrJoinSocket=function(e,t,n,a,i,l,f,d){if(!o.isEventSourceSupported&&a.current.eventSourceOptions)throw o.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(a.current.share){var p=null;void 0===r.sharedWebSockets[t]?(r.sharedWebSockets[t]=a.current.eventSourceOptions?new EventSource(t,a.current.eventSourceOptions):new WebSocket(t,a.current.protocols),e.current=r.sharedWebSockets[t],n(o.ReadyState.CONNECTING),p=(0,s.attachSharedListeners)(r.sharedWebSockets[t],t,a,d)):(e.current=r.sharedWebSockets[t],n(r.sharedWebSockets[t].readyState));var S={setLastMessage:i,setReadyState:n,optionsRef:a,reconnectCount:f,reconnect:l};return(0,u.addSubscriber)(t,S),function(e,t,n,c,s){return function(){if((0,u.removeSubscriber)(e,t),!(0,u.hasSubscribers)(e)){try{var a=r.sharedWebSockets[e];a instanceof WebSocket&&(a.onclose=function(e){n.current.onClose&&n.current.onClose(e),c(o.ReadyState.CLOSED)}),a.close()}catch(i){}s&&s(),delete r.sharedWebSockets[e]}}}(t,S,a,n,p)}if(e.current=a.current.eventSourceOptions?new EventSource(t,a.current.eventSourceOptions):new WebSocket(t,a.current.protocols),n(o.ReadyState.CONNECTING),!e.current)throw new Error("WebSocket failed to be created");return(0,c.attachListeners)(e.current,{setLastMessage:i,setReadyState:n},a,l.current,f,d)}},25890:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function s(e){try{a(r.next(e))}catch(t){c(t)}}function u(e){try{a(r.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,c,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(u){c=[6,u],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var c=n(82820);t.getUrl=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return"function"!==typeof e?[3,2]:[4,e()];case 1:return n=o.sent(),[3,3];case 2:n=e,o.label=3;case 3:return r=t.current.fromSocketIO?(0,c.parseSocketIOUrl)(n):n,[2,t.current.queryParams?(0,c.appendQueryParams)(r,t.current.queryParams):r]}}))}))}},65650:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={};t.resetWebSockets=function(e){if(e&&t.sharedWebSockets.hasOwnProperty(e))delete t.sharedWebSockets[e];else for(var n in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(n)&&delete t.sharedWebSockets[n]}},777:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var n={},r=[];t.getSubscribers=function(e){return(0,t.hasSubscribers)(e)?Array.from(n[e]):r};t.hasSubscribers=function(e){var t;return(null===(t=n[e])||void 0===t?void 0:t.size)>0};t.addSubscriber=function(e,t){n[e]=n[e]||new Set,n[e].add(t)};t.removeSubscriber=function(e,t){n[e].delete(t)};t.resetSubscribers=function(e){if(e&&n.hasOwnProperty(e))delete n[e];else for(var t in n)n.hasOwnProperty(t)&&delete n[t]}},81625:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0;t.websocketWrapper=function(e,t){return new Proxy(e,{get:function(e,n){var r=e[n];return"reconnect"===n?t:"function"===typeof r?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):r},set:function(e,t,n){return/^on/.test(t)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(e[t]=n,!0)}})},t.default=t.websocketWrapper},82820:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setUpSocketIOPing=t.appendQueryParams=t.parseSocketIOUrl=void 0;var r=n(13879);t.parseSocketIOUrl=function(e){if(e){var t=/^https|wss/.test(e),n=e.replace(/^(https?|wss?)(:\/\/)?/,"").replace(/\/$/,"");return"".concat(o=t?"wss":"ws","://").concat(n).concat(r.SOCKET_IO_PATH)}if(""===e){var o=(t=/^https/.test(window.location.protocol))?"wss":"ws",c=window.location.port?":".concat(window.location.port):"";return"".concat(o,"://").concat(window.location.hostname).concat(c).concat(r.SOCKET_IO_PATH)}return e};t.appendQueryParams=function(e,t){void 0===t&&(t={});var n=/\?([\w]+=[\w]+)/.test(e),r="".concat(Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e+"".concat(n,"=").concat(r,"&")}),"").slice(0,-1));return"".concat(e).concat(n?"&":"?").concat(r)};t.setUpSocketIOPing=function(e,t){void 0===t&&(t=r.SOCKET_IO_PING_INTERVAL);return window.setInterval((function(){return e(r.SOCKET_IO_PING_CODE)}),t)}},43536:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var c=n(72791),s=n(96632),u=n(13879);t.useEventSource=function(e,t,n){void 0===t&&(t=u.DEFAULT_EVENT_SOURCE_OPTIONS);var a=t.withCredentials,i=t.events,l=o(t,["withCredentials","events"]);void 0===n&&(n=!0);var f=r(r({},l),{eventSourceOptions:{withCredentials:a}}),d=(0,c.useRef)(u.EMPTY_EVENT_HANDLERS);i&&(d.current=i);var p=(0,s.useWebSocket)(e,f,n),S=p.lastMessage,v=p.readyState,h=p.getWebSocket;return(0,c.useEffect)((function(){(null===S||void 0===S?void 0:S.type)&&Object.entries(d.current).forEach((function(e){var t=e[0],n=e[1];t===S.type&&n(S)}))}),[S]),{lastEvent:S,readyState:v,getEventSource:h}}},32570:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var o=n(72791),c=n(96632),s=n(13879),u={type:"empty",payload:null};t.useSocketIO=function(e,t,n){void 0===t&&(t=s.DEFAULT_OPTIONS),void 0===n&&(n=!0);var a=(0,o.useMemo)((function(){return r(r({},t),{fromSocketIO:!0})}),[]),i=(0,c.useWebSocket)(e,a,n),l=i.sendMessage,f=i.sendJsonMessage,d=i.lastMessage,p=i.readyState,S=i.getWebSocket,v=(0,o.useMemo)((function(){return function(e){if(!e||!e.data)return u;var t=e.data.match(/\[.*]/);if(!t)return u;var n=JSON.parse(t);return Array.isArray(n)&&n[1]?{type:n[0],payload:n[1]}:u}(d)}),[d]);return{sendMessage:l,sendJsonMessage:f,lastMessage:v,lastJsonMessage:v,readyState:p,getWebSocket:S}}},96632:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function s(e){try{a(r.next(e))}catch(t){c(t)}}function u(e){try{a(r.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,o,c,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(u){c=[6,u],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useWebSocket=void 0;var u=n(72791),a=n(54164),i=n(13879),l=n(30343),f=n(25890),d=s(n(81625)),p=n(35141);t.useWebSocket=function(e,t,n){void 0===t&&(t=i.DEFAULT_OPTIONS),void 0===n&&(n=!0);var s=(0,u.useState)(null),S=s[0],v=s[1],h=(0,u.useState)({}),b=h[0],E=h[1],O=(0,u.useMemo)((function(){if(S)try{return JSON.parse(S.data)}catch(e){return i.UNPARSABLE_JSON_OBJECT}return null}),[S]),y=(0,u.useRef)(null),_=(0,u.useRef)(null),N=(0,u.useRef)((function(){})),R=(0,u.useRef)(0),w=(0,u.useRef)([]),T=(0,u.useRef)(null),g=(0,u.useRef)(t);g.current=t;var C=y.current&&void 0!==b[y.current]?b[y.current]:null!==e&&!0===n?i.ReadyState.CONNECTING:i.ReadyState.UNINSTANTIATED,I=t.queryParams?JSON.stringify(t.queryParams):null,k=(0,u.useCallback)((function(e,t){var n;void 0===t&&(t=!0),i.isEventSourceSupported&&_.current instanceof EventSource?console.warn("Unable to send a message from an eventSource"):(null===(n=_.current)||void 0===n?void 0:n.readyState)===i.ReadyState.OPEN?((0,p.assertIsWebSocket)(_.current,g.current.skipAssert),_.current.send(e)):t&&w.current.push(e)}),[]),P=(0,u.useCallback)((function(e,t){void 0===t&&(t=!0),k(JSON.stringify(e),t)}),[k]),m=(0,u.useCallback)((function(){return!0!==g.current.share||i.isEventSourceSupported&&_.current instanceof EventSource?_.current:(null===T.current&&_.current&&((0,p.assertIsWebSocket)(_.current,g.current.skipAssert),T.current=(0,d.default)(_.current,N)),T.current)}),[]);return(0,u.useEffect)((function(){if(null!==e&&!0===n){var t,s=!1,u=!0,d=function(){return o(void 0,void 0,void 0,(function(){var n,o,i;return c(this,(function(c){switch(c.label){case 0:return n=y,[4,(0,f.getUrl)(e,g)];case 1:return n.current=c.sent(),o=function(e){s||(0,a.flushSync)((function(){return v(e)}))},i=function(e){s||(0,a.flushSync)((function(){return E((function(t){var n;return r(r({},t),y.current&&((n={})[y.current]=e,n))}))}))},u&&(t=(0,l.createOrJoinSocket)(_,y.current,i,g,o,N,R,k)),[2]}}))}))};return N.current=function(){s||(T.current&&(T.current=null),null===t||void 0===t||t(),d())},d(),function(){s=!0,u=!1,T.current&&(T.current=null),null===t||void 0===t||t(),v(null)}}null!==e&&!1!==n||(R.current=0,E((function(e){var t;return r(r({},e),y.current&&((t={})[y.current]=i.ReadyState.CLOSED,t))})))}),[e,n,I,k]),(0,u.useEffect)((function(){C===i.ReadyState.OPEN&&w.current.splice(0).forEach((function(e){k(e)}))}),[C]),{sendMessage:k,sendJsonMessage:P,lastMessage:S,lastJsonMessage:O,readyState:C,getWebSocket:m}}},35141:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.assertIsWebSocket=void 0;var r=n(65650),o=n(777);t.assertIsWebSocket=function(e,t){if(!t&&e instanceof WebSocket===!1)throw new Error("")},t.resetGlobalState=function(e){(0,o.resetSubscribers)(e),(0,r.resetWebSockets)(e)}}}]);
//# sourceMappingURL=687.1c47e225.chunk.js.map
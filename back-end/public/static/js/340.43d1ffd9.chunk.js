/*! For license information please see 340.43d1ffd9.chunk.js.LICENSE.txt */
(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[340],{23131:function(e,n,r){"use strict";r(72791);var t=r(78983),i=r(80184);n.Z=function(e,n){return(0,i.jsx)(t.oo,{color:"secondary",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(t.xZ,{closeButton:!0,children:(0,i.jsx)("div",{className:"fw-bold me-auto",children:e})}),(0,i.jsx)(t.S3,{children:n})]})})}},42340:function(e,n,r){"use strict";r.r(n);var t=r(93433),i=r(74165),s=r(15861),l=r(29439),a=r(72791),o=r(55230),c=r(78983),u=r(49265),d=r(80184),m="Short",h="Isolated",p=function(e){var n=e.onCloseHandler,r=(e.onSubmitHandler,(0,a.useRef)(null)),u=(0,a.useState)([]),p=(0,l.Z)(u,2),x=p[0],f=p[1],j=(0,a.useRef)(m),b=(0,a.useRef)("30"),v=(0,a.useRef)("5"),g=(0,a.useRef)(h),N=(0,a.useRef)("1000"),y=(0,a.useState)("BTCUSDT"),Z=(0,l.Z)(y,2),w=Z[0],P=Z[1],S=(0,a.useState)(5),C=(0,l.Z)(S,2),k=C[0],F=C[1],L=(0,a.useState)(Array(5)),R=(0,l.Z)(L,2),V=R[0],A=R[1],M=(0,a.useState)(Array(5)),T=(0,l.Z)(M,2),z=T[0],O=T[1],Y=(0,a.useState)(null),I=(0,l.Z)(Y,2),H=I[0],E=I[1],_=(0,a.useState)(null),D=(0,l.Z)(_,2),q=D[0],B=D[1],X=(0,a.useState)("---"),U=(0,l.Z)(X,2),G=U[0],K=U[1],Q=(0,a.useState)("---"),W=(0,l.Z)(Q,2),J=W[0],$=W[1],ee=(0,a.useRef)(null),ne=(0,a.useRef)(null);function re(e){var n=Number(e.target.id.replace("price",""));A((function(r){var i=(0,t.Z)(r);return i[n]=Number(e.target.value),i}))}function te(e){var n=Number(e.target.id.replace("amount",""));O((function(r){var i=(0,t.Z)(r);return i[n]=Number(e.target.value),i}))}return(0,a.useEffect)((function(){(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.getSymbolList();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbols.sort();f(n)}))}),[]),(0,a.useEffect)((function(){function e(){(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.getSymbolMarketInfo(w);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var n=e.symbolMarketInfo;K(n.markPrice),$(n.lastPrice)}))}if(e(),w){var n=setInterval(e,2e3);return function(){return clearInterval(n)}}}),[w]),(0,a.useEffect)((function(){var e,n=0,r=0;V.slice(0,k).forEach((function(e,t){var i=z[t];void 0!==e&&void 0!==i&&(n+=i,r+=e*i)})),e=(r/n).toFixed(2),B(e),E(n)}),[V,z,k]),(0,d.jsxs)(c.lx,{ref:r,onSubmit:function(e){e.preventDefault(),console.log(w),console.log(j.current.value,b.current.value),console.log(g.current.value,v.current.value),console.log(N.current.value,k),console.log(V,z),console.log(ee.current.value,ne.current.value),function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=V.map((function(e,n){return[e,z[n]]})),r={symbol:w,mode:g.current.value.toLowerCase(),direction:j.current.value.toLowerCase(),leverage:Number(v.current.value),maxBalance:Number(N.current.value),levels:(0,t.Z)(n),takeProfit:{trigger:"mark",type:"market",percent:Number(ee.current.value)},stopLoss:{trigger:"last",type:"limit",percent:Number(ne.current.value)}},e.next=4,o.Z.placeGridOrder(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(e){console.log(e)}))},children:[(0,d.jsx)(c.p0,{children:(0,d.jsx)(c.fl,{children:"New Trade"})}),(0,d.jsx)(c.sD,{children:(0,d.jsxs)(c.rb,{className:"d-flex d-flex-row justify-content-around",children:[(0,d.jsxs)(c.b7,{xs:10,lg:5,children:[(0,d.jsxs)(c.YR,{className:"mb-2",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputSymbol",className:"",children:"Symbol"}),(0,d.jsx)(c.LX,{id:"inputSymbol",onChange:function(e){P(e.target.value),F(5),A(new Array(5)),O(new Array(5))},value:w,children:x.map((function(e,n){return(0,d.jsx)("option",{children:e},n)}))})]}),(0,d.jsxs)(c.YR,{className:"mb-2",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputMode",children:"Mode"}),(0,d.jsxs)(c.LX,{ref:g,id:"inputMode",defaultValue:h,children:[(0,d.jsx)("option",{children:"Isolated"}),(0,d.jsx)("option",{children:"Cross"})]})]}),(0,d.jsxs)(c.YR,{className:"mb-2",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputSide",children:"Direction"}),(0,d.jsxs)(c.LX,{id:"inputSide",ref:j,defaultValue:m,children:[(0,d.jsx)("option",{children:"Long"}),(0,d.jsx)("option",{children:"Short"})]})]}),(0,d.jsxs)(c.YR,{className:"mb-2",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputLeverage",children:"Leverage"}),(0,d.jsx)(c.jO,{ref:v,type:"number","aria-label":"profit target",className:"col-4",defaultValue:"5",id:"inputLeverage"}),(0,d.jsx)(c.wV,{component:"label",children:"x"})]}),(0,d.jsxs)(c.YR,{className:"mb-2",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputInitialMargin",children:"Max Balance"}),(0,d.jsx)(c.jO,{ref:N,type:"number",placeholder:"100","aria-label":"profit target",className:"col-4",defaultValue:1e3,id:"inputInitialMargin"}),(0,d.jsx)(c.wV,{component:"label",children:"USDT"})]})]}),(0,d.jsxs)(c.b7,{xs:10,lg:6,children:[(0,d.jsxs)(c.rb,{children:[(0,d.jsx)(c.b7,{children:(0,d.jsxs)(c.C_,{color:"info",children:["Mark Price: ",Number(G).toFixed(2)]})}),(0,d.jsx)(c.b7,{children:(0,d.jsxs)(c.C_,{color:"warning",children:["Last Price: ",Number(J).toFixed(2)]})})]}),(0,d.jsxs)(c.YR,{className:"mt-1 mb-2 md-col-4",children:[(0,d.jsxs)(c.YR,{className:"mb-0",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputLevels",children:"Number Levels"}),(0,d.jsx)(c.jO,{type:"number",placeholder:k,"aria-label":"",value:k,id:"inputLevels",onChange:function(e){F(e.target.value)}})]}),!!k&&Array.from({length:k}).map((function(e,n){return(0,d.jsxs)(c.YR,{className:"mb-0",size:"sm",children:[(0,d.jsxs)(c.wV,{component:"label",htmlFor:"price"+n,children:["Price ",n+1]}),(0,d.jsx)(c.jO,{type:"number",placeholder:"","aria-label":"price",value:V[n],id:"price"+n,onChange:re}),(0,d.jsxs)(c.wV,{component:"label",htmlFor:"amout"+n,children:["Amt ",n+1]}),(0,d.jsx)(c.jO,{type:"number",placeholder:"","aria-label":"amount",defaultValue:"",id:"amount"+n,onChange:te})]},n)})),(0,d.jsxs)(c.rb,{children:[(0,d.jsx)(c.b7,{children:(0,d.jsxs)(c.C_,{color:"danger",children:["Average Price: ",q]})}),(0,d.jsx)(c.b7,{children:(0,d.jsxs)(c.C_,{color:"warning",children:["Total Amount: ",H]})})]})]}),(0,d.jsxs)(c.YR,{className:"my-2",children:[(0,d.jsxs)(c.YR,{className:"mb-1",children:[(0,d.jsx)(c.wV,{component:"label",htmlFor:"inputTP",children:"Take Profit (option)"}),(0,d.jsx)(c.jO,{ref:ee,type:"number",placeholder:"","aria-label":"Take Profit",defaultValue:"",id:"inputTP"}),(0,d.jsx)(c.wV,{component:"label",children:"%"})]}),(0,d.jsxs)(c.YR,{className:"mb-1",children:[(0,d.jsx)(c.wV,{className:"",component:"label",htmlFor:"inputSL",children:"Stop Loss (option)"}),(0,d.jsx)(c.jO,{ref:ne,type:"number",placeholder:"","aria-label":"stoploss percent",defaultValue:"",id:"inputSL"}),(0,d.jsx)(c.wV,{component:"label",children:"%"})]})]})]})]})}),(0,d.jsxs)(c.Ym,{children:[(0,d.jsx)(c.u5,{color:"secondary",onClick:function(){return n},children:"Close"}),(0,d.jsx)(c.u5,{color:"primary",type:"submit",children:"Submit"})]})]})};n.default=function(){var e=(0,a.useState)(null),n=(0,l.Z)(e,2),r=n[0],t=n[1],m=(0,a.useState)(!1),h=(0,l.Z)(m,2),x=h[0],f=h[1];function j(){return b.apply(this,arguments)}function b(){return b=(0,s.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.getTrade();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}return(0,a.useEffect)((function(){j().then((function(e){return t(e)}));var e=setInterval((function(){j().then((function(e){return t(e)}))}),1700);return function(){return clearInterval(e)}}),[]),r?!1===r.success?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h1",{children:"Manual Trade"}),(0,d.jsx)("p",{children:r.message})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[(0,d.jsx)("h1",{children:"Manual Trade"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{onClick:function(e){f(!0)},className:"btn btn-warning",children:"New Trade"}),(0,d.jsx)(c.Tk,{size:"lg",alignment:"center",visible:x,onClose:function(){return f(!1)},children:(0,d.jsx)(p,{onCloseHandler:function(){return f(!1)}})})]})]}),(0,d.jsx)(u.Z,{positions:r.positions})]}):(0,d.jsx)(c.LQ,{color:"info"})}},49265:function(e,n,r){"use strict";r.d(n,{Z:function(){return p}});var t=r(74165),i=r(15861),s=r(29439),l=r(72791),a=(r(71047),r(55230)),o=r(81694),c=r.n(o),u=r(78983),d=r(80184),m=function(e){var n=e.position,r=e.index,t=e.isClose,i=e.closeHandler,a=e.closeLimitHandler,o=(0,l.useState)(""),m=(0,s.Z)(o,2),h=m[0],p=m[1];var x=n.positionAmt>0?"info":"danger",f=n.pnl>0?"success":"danger";return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(u.T6,{className:"",children:[(0,d.jsxs)(u.NN,{className:"align-middle",children:[(0,d.jsx)(u.C_,{color:x,children:n.symbol}),(0,d.jsx)("span",{children:(0,d.jsxs)(u.u5,{variant:"ghost",color:"warning",size:"sm",children:[n.leverage,"x"]})})]}),(0,d.jsx)(u.NN,{className:c()({"text-info":n.size>0,"text-danger":n.size<0,"align-middle":!0}),children:n.size}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.entryPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.markPrice}),(0,d.jsx)(u.NN,{className:"align-middle text-warning",children:n.liquidationPrice}),(0,d.jsx)(u.NN,{className:"align-middle",children:n.marginSize}),(0,d.jsxs)(u.NN,{className:c()({"text-success":n.pnl>0,"text-danger":n.pnl<0,"align-middle":!0}),children:[n.pnl," (",n.roe,"%)"]}),t&&(0,d.jsx)(u.NN,{className:"align-middle",children:(0,d.jsxs)("div",{className:"d-inline-flex justify-content-start align-items-center align-self-center flex-fill",children:[(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){i(n)},size:"sm",children:"Market"}),(0,d.jsx)("div",{className:"vr align-middle"}),(0,d.jsx)(u.u5,{color:f,variant:"ghost",value:n,onClick:function(e){a(n,h),p("")},size:"sm",children:"Limit"}),(0,d.jsx)("div",{className:"col-4",children:(0,d.jsx)(u.jO,{type:"number",size:"sm",placeholder:"price",value:h,id:"limit-price",onChange:function(e){return p(e.target.value)}})})]})})]},r)})},h=r(23131),p=function(e){var n=e.positions,r=e.isClose,o=(0,l.useState)(0),c=(0,s.Z)(o,2),p=c[0],x=c[1],f=(0,l.useRef)();function j(e,n,r){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)((0,t.Z)().mark((function e(n,r,i){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.closePosition(n,r,i);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){x((0,h.Z)("Close Position","submitting order...")),j(e,"market",0).then((function(e){x((0,h.Z)("Close Position",e.message))}))}function g(e,n){var r=e.markPrice-50*e.markPrice/100,t=1.5*e.markPrice;n>=r&&n<=t?(x((0,h.Z)("Close Position","submitting order...")),j(e,"limit",n).then((function(e){x((0,h.Z)("Close Position",e.message))}))):x((0,h.Z)("Close Position","price should be larger or smaller than mark price maximum of 50%"))}function N(){x((0,h.Z)("Close All Positions","submitting order...")),function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.clearPositions();case 2:return n=e.sent,x((0,h.Z)("Close All Positions","".concat(n.msg))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}var y=n.map((function(e,n){var r=e.symbol,t=e.entryPrice,i=e.unRealizedProfit,s=e.positionAmt,l=(e.isolatedMargin,e.markPrice),a=e.liquidationPrice,o=e.isolatedWallet,c=e.leverage,u=e.pricePrecision,d=s*t,m=100*i/(Math.abs(d)/c);return{symbol:r,positionAmt:s,size:Number(d).toFixed(2),entryPrice:Number(t).toFixed(u),markPrice:Number(l).toFixed(u),liquidationPrice:Number(a).toFixed(u),marginSize:Number(o).toFixed(2),pnl:Number(i).toFixed(2),roe:Number(m).toFixed(2),leverage:c}})),Z=["Symbol","Size","Entry Price","Mark Price","Liq.Price","Margin","PNL (ROE%)"];return r&&Z.push("Close All Positions"),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.rb,{children:(0,d.jsx)(u.b7,{xl:12,children:(0,d.jsxs)(u.xH,{className:"mb-4",children:[(0,d.jsxs)(u.bn,{children:["Positions (",y.length,")"]}),(0,d.jsx)(u.sl,{children:(0,d.jsxs)("table",{className:"table",children:[(0,d.jsx)("thead",{className:"",children:(0,d.jsx)("tr",{children:Z.map((function(e,n){return"Close All Positions"===e?(0,d.jsx)("th",{children:(0,d.jsx)("div",{children:(0,d.jsx)(u.If,{content:"close all positions as market price",placement:"top",children:(0,d.jsx)(u.u5,{variant:"ghost",color:"warning",onClick:N,children:e})})})},n):(0,d.jsx)("th",{children:e},n)}))})}),(0,d.jsx)(u.NR,{children:y.map((function(e,n){return(0,d.jsx)(m,{position:e,isClose:r,closeHandler:v,closeLimitHandler:g},n)}))})]})})]})})}),(0,d.jsx)(u.KF,{ref:f,push:p,placement:"top-end"})]})}},81694:function(e,n){var r;!function(){"use strict";var t={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var l=i.apply(null,r);l&&e.push(l)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var a in r)t.call(r,a)&&r[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(n,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=340.43d1ffd9.chunk.js.map